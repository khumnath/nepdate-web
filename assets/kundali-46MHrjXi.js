import{r as b,j as e,s as bt,t as ut,u as gt,v as pt,w as yt,e as ft,X as jt,x as kt,h as Re}from"./vendor-react-BaosodHq.js";import{g as he,t as I,a as Nt,b as vt,N as a,c as g,d as te,G as wt,f as St,e as Dt,h as Z,i as _,j as M,R as Ct,k as _e,l as Ue,m as Pt,n as we,r as Mt,o as At,p as be}from"./bikram-DT3LmB0w.js";import{n as ue,T as xe,L as Lt,a as Ze,X as Ce,S as It,b as Tt,C as de,P as He}from"./data-COqTRNzN.js";import{t as $t}from"./vendor-utils-y-iLWhYP.js";const Bt=ue.find(t=>t.romanization.toLowerCase()==="kathmandu"),me=Bt??ue[0],Ft=({label:t,children:o,...c})=>e.jsxs("div",{className:"relative w-full",children:[e.jsx("select",{...c,className:"w-full appearance-none bg-white border border-gray-300 rounded-md py-2 px-3 text-sm text-gray-800 focus:outline-none focus:bg-gray-50 focus:border-blue-400 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200 dark:focus:bg-blue-400 dark:focus:border-blue-400",children:o}),e.jsx("label",{className:"absolute -top-2 left-2.5 bg-white px-1 text-xs text-gray-500 dark:bg-gray-700 dark:text-gray-400",children:t}),e.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700 dark:text-gray-300",children:e.jsx(de,{className:"w-4 h-4"})})]}),Et=()=>{const t=gt();return b.useEffect(()=>{const o=setTimeout(()=>{try{t.invalidateSize()}catch{}},150);return()=>clearTimeout(o)},[t]),null},zt=({onClose:t,onLocationSelect:o,initialPosition:c})=>{const[x,i]=b.useState(c),l=()=>(pt({click(n){i([n.latlng.lat,n.latlng.lng])}}),e.jsx(yt,{position:x})),r=()=>{o(x[0],x[1]),t()};return e.jsx("div",{style:{position:"fixed",inset:0,top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",zIndex:9999,display:"flex",justifyContent:"center",alignItems:"center",padding:12},children:e.jsxs("div",{style:{width:"95%",maxWidth:960,height:620,display:"flex",flexDirection:"column",borderRadius:12,overflow:"hidden",background:void 0},className:"bg-white dark:bg-gray-800 dark:text-gray-200 rounded-lg shadow-lg",children:[e.jsxs("div",{className:"flex justify-between items-center border-b p-3 dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-semibold",children:a.selectOnMap}),e.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-100",children:e.jsx(Ce,{className:"w-5 h-5"})})]}),e.jsx("div",{style:{flex:1,minHeight:420,display:"flex",justifyContent:"center",alignItems:"center",position:"relative"},children:e.jsxs(bt,{center:c,zoom:7,scrollWheelZoom:!0,style:{height:"100%",width:"100%"},children:[e.jsx(ut,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),e.jsx(Et,{}),e.jsx(l,{})]},`${c[0]}-${c[1]}`)}),e.jsxs("div",{className:"border-t p-3 flex justify-between items-center dark:border-gray-700",children:[e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:["Lat: ",x[0].toFixed(4),", Lon: ",x[1].toFixed(4)]}),e.jsx("button",{onClick:r,className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 dark:bg-blue-400 dark:text-blue-900 dark:hover:bg-blue-500 dark:hover:text-white",children:a.selectLocation})]})]})})},Oe=({children:t})=>e.jsx("div",{className:"grid grid-cols-3 border border-gray-300 rounded-md overflow-hidden divide-x divide-gray-300 focus-within:border-blue-500 focus-within:ring-1 focus-within:ring-blue-500 dark:border-gray-600 dark:divide-gray-600 dark:focus-within:border-blue-400 dark:focus-within:ring-blue-400",children:t}),le=({label:t,children:o,...c})=>e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"absolute top-1 left-2 text-xs text-gray-500 z-10 dark:text-gray-400",children:t}),e.jsx("select",{...c,className:"relative w-full appearance-none bg-white pt-5 pb-1.5 px-2 text-sm text-gray-800 focus:outline-none focus:bg-gray-50 z-0 dark:bg-gray-700 dark:text-gray-200 dark:focus:bg-gray-600",children:o}),e.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700 z-10 dark:text-gray-300",children:e.jsx(de,{className:"w-4 h-4"})})]}),Rt=({label:t,type:o="number",...c})=>e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"absolute top-1 left-2 text-xs text-gray-500 z-10 dark:text-gray-400",children:t}),e.jsx("input",{...c,type:o,className:"relative w-full bg-white pt-5 pb-1.5 px-2 text-sm text-gray-800 focus:outline-none focus:bg-gray-50 z-0 dark:bg-gray-700 dark:text-gray-200 dark:focus:bg-gray-600"})]}),_t=1900,Ot=2150,Kt=1960,Yt=2210,Ke=b.forwardRef(({onCalculate:t,isLoading:o,hideSubmitButton:c=!1,defaultValues:x},i)=>{const l=he(),r=I(l),[n,m]=b.useState(x?.name||"प्रयोगकर्ता"),[d,y]=b.useState(x?.dateSystem||"BS"),[w,S]=b.useState(!1),[k,p]=b.useState("search"),[N,D]=b.useState(l.getUTCFullYear()),[v,C]=b.useState(l.getUTCMonth()+1),[A,f]=b.useState(l.getUTCDate()),[j,h]=b.useState(x?.bsYear||r.year),[P,$]=b.useState(x?.bsMonth||r.monthIndex+1),[B,ae]=b.useState(x?.bsDay||r.day),L=b.useRef(null),[H,F]=b.useState(!1),[O,V]=b.useState(null);let T=l.getUTCHours(),K="AM";T===0?(T=12,K="AM"):T===12?K="PM":T>12?(T=T-12,K="PM"):K="AM";const[q,ie]=b.useState(x?.period||K),[G,E]=b.useState(x?.hour||T),[Pe,qe]=b.useState(x?.minute||l.getUTCMinutes()),[Me,Ge]=b.useState(x?.second||l.getUTCSeconds()),W=x?.location||me,[X,Ae]=b.useState(W),[Y,pe]=b.useState(W.latitude),[U,ye]=b.useState(W.longitude),[fe,se]=b.useState(W.zoneId),[Le,We]=b.useState(W.romanization==="Manual Selection"?W.name:""),[Xe,je]=b.useState(!1),[ce,Je]=b.useState(""),Qe=b.useMemo(()=>{const s=ce.trim().toLowerCase();return s?ue.filter(u=>u.romanization.toLowerCase().includes(s)||u.name.includes(ce.trim())):ue},[ce]);b.useEffect(()=>{if(!(typeof Y!="number"||typeof U!="number"||isNaN(Y)||isNaN(U)))try{const s=$t(Y,U),u=xe.some(re=>re.zoneId===s);se(u?s:me?.zoneId??"Asia/Kathmandu")}catch{se(me?.zoneId??"Asia/Kathmandu")}},[Y,U,me?.zoneId]);const et=b.useMemo(()=>Array.from({length:12},(s,u)=>u+1),[]),Ie=b.useMemo(()=>Array.from({length:60},(s,u)=>u),[]),J=b.useMemo(()=>{const u=(d==="BS"?j:N)||(d==="BS"?r.year:l.getUTCFullYear());return d==="BS"?Nt(u,P-1).totalDays:vt(u,v)},[d,j,P,N,v,r.year,l]);b.useEffect(()=>{d==="BS"&&B>J&&ae(J),d==="AD"&&A>J&&f(J)},[J,d,B,A]);const tt=s=>{const u=s.target.value,z=St(u).replace(/[^0-9]/g,"");if(z===""){d==="BS"?h(null):D(null);return}const Q=parseInt(z,10);isNaN(Q)||(d==="BS"?h(Q):D(Q))},at=()=>{const s=d==="BS"?j:N;L.current=s,d==="BS"?h(null):D(null)},st=()=>{const s=d==="BS"?j:N;(s===null||String(s).trim()==="")&&(d==="BS"?h(L.current):D(L.current))},ke=()=>{const s=he(),u=I(s);D(s.getUTCFullYear()),C(s.getUTCMonth()+1),f(s.getUTCDate()),h(u.year),$(u.monthIndex+1),ae(u.day)},rt=s=>{Ae(s),pe(s.latitude),ye(s.longitude),se(s.zoneId),S(!1)},nt=(s,u)=>{pe(s),ye(u),je(!1)},Te=()=>{let s=j,u=N;if(s===null&&u===null&&(ke(),s=r.year,u=l.getUTCFullYear()),(d==="BS"?s:N)===null)return null;const z=ne=>ne.toString().padStart(2,"0");let Q=u??l.getUTCFullYear(),Be=v,Fe=A;if(d==="BS"){const ne=s??r.year,ve=Dt(ne,P-1,B);Q=ve.getFullYear(),Be=ve.getMonth()+1,Fe=ve.getDate()}let Ne=G;q==="PM"&&G<12&&(Ne+=12),q==="AM"&&G===12&&(Ne=0);const ct=`${Q}-${z(Be)}-${z(Fe)}T${z(Ne)}:${z(Pe)}:${z(Me)}`,xt=X.latitude,mt=X.longitude,Ee=X.zoneId,ze=xe.find(ne=>ne.zoneId===Ee),ht=ze?ze.offset:5.75;return{name:n,datetime:ct,latitude:xt,longitude:mt,zoneId:Ee,offset:ht,locationName:X.name,options:{zodiac:"SIDEREAL",ayanamsa:"LAHIRI",houseSystem:"WHOLE_SIGN",divisionalCharts:[9],dashaSystem:"VIMSHOTTARI"}}},lt=()=>{const s=d==="BS"?j:N;if(s===null||String(s).length<4)return!1;const[u,re]=d==="BS"?[Kt,Yt]:[_t,Ot];return!(s<u||s>re)},$e=()=>new Promise(s=>{lt()?s(Te()):(ke(),F(!0),V(()=>s))});b.useImperativeHandle(i,()=>({validateAndGetData:$e}));const ot=()=>{F(!1);const s=Te();O&&(O(s),V(null))},dt=()=>{F(!1),O&&(O(null),V(null))},it=async s=>{s.preventDefault();const u=await $e();u&&t(u)};return e.jsxs(e.Fragment,{children:[e.jsxs("form",{onSubmit:it,className:"space-y-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",id:"name",value:n,onChange:s=>m(s.target.value),required:!0,className:"w-full bg-white border border-gray-300 rounded-md py-2 px-3 text-sm text-gray-800 focus:outline-none focus:bg-gray-50 focus:border-blue-400 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-100 dark:focus:bg-gray-600 dark:focus:border-blue-400"}),e.jsx("label",{htmlFor:"name",className:"absolute -top-2 left-2.5 bg-white px-1 text-xs text-gray-500 dark:bg-gray-700 dark:text-gray-400",children:a.name})]}),e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"flex p-1 bg-gray-200 dark:bg-gray-700 rounded-md",children:[e.jsx("button",{type:"button",onClick:()=>{y("BS")},className:`px-4 py-1 text-sm rounded ${d==="BS"?"bg-blue-500 text-white":"text-gray-600 dark:text-gray-300"}`,children:a.bs}),e.jsx("button",{type:"button",onClick:()=>{y("AD")},className:`px-4 py-1 text-sm rounded ${d==="AD"?"bg-blue-500 text-white":"text-gray-600 dark:text-gray-300"}`,children:a.ad})]})}),e.jsx("div",{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex-1",children:e.jsxs(Oe,{children:[e.jsx(Rt,{label:a.year,value:d==="BS"?g(j??""):N??"",onChange:tt,onFocus:at,onBlur:st,type:"tel",inputMode:"numeric",autoComplete:"off"}),e.jsx(le,{label:a.month,value:d==="BS"?P:v,onChange:s=>d==="BS"?$(Number(s.target.value)):C(Number(s.target.value)),children:Array.from({length:12},(s,u)=>e.jsx("option",{value:u+1,children:d==="BS"?te[u]:wt[u]},u+1))}),e.jsx(le,{label:a.day,value:d==="BS"?B:A,onChange:s=>d==="BS"?ae(Number(s.target.value)):f(Number(s.target.value)),children:Array.from({length:J},(s,u)=>e.jsx("option",{value:u+1,children:g(u+1)},u+1))})]})}),e.jsx("button",{type:"button",onClick:ke,className:"px-3 py-2 text-sm bg-gray-200 dark:bg-gray-600 rounded-md hover:bg-gray-300 dark:hover:bg-gray-500","aria-label":a.resetToToday,children:a.resetToToday})]})}),e.jsxs(Oe,{children:[e.jsx(le,{label:a.hour,value:G,onChange:s=>E(Number(s.target.value)),children:et.map(s=>e.jsx("option",{value:s,children:g(s)},s))}),e.jsx(le,{label:a.minute,value:Pe,onChange:s=>qe(Number(s.target.value)),children:Ie.map(s=>e.jsx("option",{value:s,children:g(s)},s))}),e.jsx(le,{label:a.second,value:Me,onChange:s=>Ge(Number(s.target.value)),children:Ie.map(s=>e.jsx("option",{value:s,children:g(s)},s))})]}),e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"flex p-1 bg-gray-200 dark:bg-gray-700 rounded-md",children:[e.jsx("button",{type:"button",onClick:()=>ie("AM"),className:`px-4 py-1 text-sm rounded ${q==="AM"?"bg-blue-500 text-white":"text-gray-600 dark:text-gray-300"}`,children:a.am}),e.jsx("button",{type:"button",onClick:()=>ie("PM"),className:`px-4 py-1 text-sm rounded ${q==="PM"?"bg-blue-500 text-white":"text-gray-600 dark:text-gray-300"}`,children:a.pm})]})}),e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"absolute -top-2 left-2.5 bg-white px-1 text-xs text-gray-500 dark:bg-gray-700 dark:text-gray-400 z-10",children:a.location}),e.jsxs("button",{type:"button",onClick:()=>{S(!0),p("search")},className:"w-full bg-white border border-gray-300 rounded-md py-2 px-3 text-sm text-gray-800 focus:outline-none focus:bg-gray-50 focus:border-blue-400 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200 flex justify-between items-center text-left",children:[e.jsxs("span",{children:[X.name," ",e.jsxs("span",{className:"text-gray-500 dark:text-gray-400 text-xs",children:["(",X.romanization,")"]})]}),e.jsx(Lt,{className:"w-4 h-4 text-gray-500"})]})]}),!c&&e.jsx("div",{className:"pt-4",children:e.jsx("button",{type:"submit",disabled:o,className:"w-full flex justify-center items-center py-3 border border-transparent rounded-md shadow-sm text-base font-medium text-white bg-blue-500 hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:bg-gray-400 disabled:cursor-not-allowed dark:bg-blue-600 dark:hover:bg-blue-700 dark:disabled:bg-gray-500",children:o?e.jsxs(e.Fragment,{children:[e.jsx(Ze,{className:"w-5 h-5 mr-3 animate-spin"}),a.calculating]}):a.calculate})})]}),w&&e.jsx("div",{className:"fixed inset-0 flex items-start justify-center bg-black/60 z-50 p-4 pt-8 sm:pt-8 transition-opacity",onClick:()=>S(!1),children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 w-full h-3/6 sm:h-[480px] sm:max-h-[90vh] sm:rounded-lg shadow-xl max-w-lg p-4 flex flex-col transition-transform",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"flex justify-between items-center pb-3 border-b dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-semibold",children:k==="search"?a.searchOrSelectLocation:a.enterManually}),e.jsx("button",{onClick:()=>S(!1),className:"text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-100",children:e.jsx(Ce,{className:"w-5 h-5"})})]}),k==="search"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative my-4",children:[e.jsx(It,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:a.locationSearchPlaceholder,value:ce,onChange:s=>Je(s.target.value),className:"w-full bg-white border border-gray-300 rounded-md py-2 pl-10 pr-3 text-sm text-gray-800 focus:outline-none focus:bg-gray-50 focus:border-blue-400 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-100 dark:focus:bg-gray-600 dark:focus:border-blue-400"})]}),e.jsx("div",{className:"overflow-y-auto flex-1",children:Qe.map(s=>e.jsxs("div",{onClick:()=>rt(s),className:"p-2.5 cursor-pointer hover:bg-blue-100 dark:hover:bg-blue-900/50 rounded-md text-sm flex justify-between",children:[e.jsx("span",{children:s.name}),e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:s.romanization})]},s.name))}),e.jsx("div",{className:"pt-3 mt-3 border-t dark:border-gray-700 text-center",children:e.jsxs("button",{onClick:()=>p("manual"),className:"text-sm text-blue-600 dark:text-blue-400 hover:underline",children:[a.cantFindLocation," ",a.enterManuallyOrMap]})})]}):e.jsxs("div",{className:"pt-4 space-y-4 overflow-y-auto",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",step:"0.0001",id:"latitude",value:Y,onChange:s=>pe(parseFloat(s.target.value)),required:!0,className:"w-full bg-white border border-gray-300 rounded-md py-2 px-3 text-sm text-gray-800 focus:outline-none focus:bg-gray-50 focus:border-blue-400 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-100 dark:focus:bg-gray-600 dark:focus:border-blue-400"}),e.jsx("label",{htmlFor:"latitude",className:"absolute -top-2 left-2.5 bg-white px-1 text-xs text-gray-500 dark:bg-gray-800 dark:text-gray-400",children:a.latitudeShort})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",step:"0.0001",id:"longitude",value:U,onChange:s=>ye(parseFloat(s.target.value)),required:!0,className:"w-full bg-white border border-gray-300 rounded-md py-2 px-3 text-sm text-gray-800 focus:outline-none focus:bg-gray-50 focus:border-blue-400 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-100 dark:focus:bg-gray-600 dark:focus:border-blue-400"}),e.jsx("label",{htmlFor:"longitude",className:"absolute -top-2 left-2.5 bg-white px-1 text-xs text-gray-500 dark:bg-gray-800 dark:text-gray-400",children:a.longitudeShort})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",id:"manualPlaceName",value:Le,onChange:s=>We(s.target.value),placeholder:a.place,className:"w-full bg-white border border-gray-300 rounded-md py-2 px-3 text-sm text-gray-800 focus:outline-none focus:bg-gray-50 focus:border-blue-400 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-100 dark:focus:bg-gray-600 dark:focus:border-blue-400"}),e.jsx("label",{htmlFor:"manualPlaceName",className:"absolute -top-2 left-2.5 bg-white px-1 text-xs text-gray-500 dark:bg-gray-800 dark:text-gray-400",children:a.place})]}),e.jsx(Ft,{label:a.timezone,value:fe,onChange:s=>se(s.target.value),children:xe.map(s=>e.jsx("option",{value:s.zoneId,children:s.label},s.zoneId))}),e.jsxs("button",{type:"button",onClick:()=>je(!0),className:"w-full flex justify-center items-center gap-2 py-2 bg-gray-200 hover:bg-gray-300 rounded-md dark:bg-gray-600 dark:hover:bg-gray-500","aria-label":a.selectOnMap,children:[e.jsx(Tt,{className:"w-5 h-5"})," ",a.selectOnMap]}),e.jsx("button",{type:"button",onClick:()=>{const s=Le.trim()||a.unknown;Ae({name:s,romanization:"Manual Selection",latitude:Y,longitude:U,zoneId:fe,offset:xe.find(u=>u.zoneId===fe)?.offset??5.75}),S(!1)},className:"w-full py-2.5 bg-blue-600 text-white rounded-md font-bold hover:bg-blue-700 transition shadow-md",children:a.selectLocationConform}),e.jsx("div",{className:"text-center",children:e.jsxs("button",{onClick:()=>p("search"),className:"text-sm text-blue-600 dark:text-blue-400 hover:underline",children:["← ",a.backToSearch]})})]})]})}),Xe&&e.jsx(zt,{onClose:()=>je(!1),onLocationSelect:nt,initialPosition:[Y,U]}),H&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black/60 z-50 p-4 transition-opacity",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-sm w-full p-6 text-center",onClick:s=>s.stopPropagation(),children:[e.jsx("h3",{className:"text-lg font-semibold text-amber-700 dark:text-amber-400",children:a.invalidDateTitle}),e.jsx("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-300",children:a.invalidDateMessage(d)}),e.jsxs("div",{className:"mt-6 flex justify-center gap-4",children:[e.jsx("button",{onClick:dt,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-300 rounded-md hover:bg-gray-400 dark:bg-gray-600 dark:text-gray-200 dark:hover:bg-gray-500",children:a.edit}),e.jsx("button",{onClick:ot,className:"px-4 py-2 text-sm font-medium text-white bg-blue-500 rounded-md hover:bg-blue-600",children:a.proceed})]})]})})]})}),Ut=({cx:t,cy:o,onSelect:c})=>e.jsxs("svg",{className:"absolute inset-0 w-full h-full",viewBox:"0 0 400 400",children:[e.jsx("defs",{children:e.jsx("path",{id:"lotus-petal",d:`M 200 200
             C 150 150, 150 50, 200 0
             C 250 50, 250 150, 200 200 Z`})}),Array.from({length:12},(x,i)=>e.jsx("use",{href:"#lotus-petal",fill:"transparent",className:"overlay-wedge",style:{cursor:"pointer",pointerEvents:"auto"},transform:`rotate(${-i*30-90}, ${t}, ${o})`,onClick:()=>c(i+1)},i))]}),Zt={10:0,11:-30,12:-60,1:-90,2:-120,3:-150,4:-180,5:-210,6:-240,7:-270,8:-300,9:-330};function ge(t){const o=Math.floor(t),c=Math.floor((t-o)*60);return`${g(o)}°${g(c)}′`}function Ht(t){const o=Math.round(t/30*100);return`${g(o)}%`}const Vt=[{path:"M 50,0 L 75,25 L 50,50 L 25,25 Z",centroid:{x:50,y:20},rashiPos:{x:50,y:40}},{path:"M 50,0 L 25,25 L 0,0 Z",centroid:{x:25,y:10},rashiPos:{x:12,y:8}},{path:"M 0,0 L 25,25 L 0,50 Z",centroid:{x:10,y:25},rashiPos:{x:8,y:12}},{path:"M 0,50 L 25,25 L 50,50 L 25,75 Z",centroid:{x:25,y:50},rashiPos:{x:42,y:50}},{path:"M 0,50 L 25,75 L 0,100 Z",centroid:{x:10,y:75},rashiPos:{x:8,y:88}},{path:"M 0,100 L 25,75 L 50,100 Z",centroid:{x:25,y:90},rashiPos:{x:12,y:92}},{path:"M 50,100 L 25,75 L 50,50 L 75,75 Z",centroid:{x:50,y:80},rashiPos:{x:50,y:60}},{path:"M 50,100 L 75,75 L 100,100 Z",centroid:{x:75,y:90},rashiPos:{x:88,y:92}},{path:"M 100,100 L 75,75 L 100,50 Z",centroid:{x:90,y:75},rashiPos:{x:92,y:88}},{path:"M 100,50 L 75,25 L 50,50 L 75,75 Z",centroid:{x:75,y:50},rashiPos:{x:58,y:50}},{path:"M 100,50 L 75,25 L 100,0 Z",centroid:{x:90,y:25},rashiPos:{x:92,y:12}},{path:"M 50,0 L 75,25 L 100,0 Z",centroid:{x:75,y:10},rashiPos:{x:88,y:8}}],qt=({planets:t,ascendantSign:o,ascendantDegrees:c,ascendantNakshatra:x,ascendantNakshatraPada:i,chartType:l="lagna",chartStyle:r="north"})=>{const[n,m]=b.useState(null),d=t.find(p=>p.planet==="MOON"),y=d?.rashi??1,w=b.useMemo(()=>{const p=new Map;return t.forEach(N=>{const D=N.rashi,v=l==="chandra"?(D-y+12)%12+1:D;p.has(v)||p.set(v,[]),p.get(v).push(N)}),p},[t,l,y]),S=p=>{m(p)},k=()=>n&&e.jsx(Gt,{selectedHouse:n,onClose:()=>m(null),planetsByHouse:w,ascendantSign:o,ascendantDegrees:c,ascendantNakshatra:x,ascendantNakshatraPada:i,chartType:l,moon:d});return r==="north"?e.jsxs("div",{className:"birth-chart-wrapper",children:[e.jsx(Wt,{planets:t,ascendantSign:l==="chandra"?y:o,isChandraChart:l==="chandra",onSelectRashi:S}),e.jsx(k,{})]}):r==="south"?e.jsxs("div",{className:"birth-chart-wrapper",children:[e.jsx(Xt,{planets:t,ascendantSign:l==="chandra"?y:o,isChandraChart:l==="chandra",onSelectRashi:S}),e.jsx(k,{})]}):e.jsxs("div",{className:"birth-chart-wrapper text-stone-800 dark:text-stone-100",children:[e.jsxs("div",{className:"birth-chart",children:[Array.from({length:12},(p,N)=>N+1).map(p=>{const N=w.get(p)||[],D=Zt[p];if(D===void 0)return null;const v=[];return l!=="chandra"&&p===o&&v.push(e.jsxs("div",{className:"planet-item ascendant",children:[e.jsx("span",{children:Z.ASCENDANT}),c!==void 0&&e.jsx("span",{className:"planet-deg",children:ge(c)})]},"asc")),l==="chandra"&&p===1&&v.push(e.jsx("div",{className:"planet-item ascendant",children:e.jsxs("span",{children:[Z.ASCENDANT," (चन्द्र)"]})},"asc-chandra")),N.forEach(C=>{v.push(e.jsxs("div",{className:"planet-item",children:[e.jsx("span",{className:C.retrograde?"retrograde":"",children:Z[C.planet]}),C.degreesInSign!==void 0&&e.jsx("span",{className:"planet-deg",children:ge(C.degreesInSign)})]},C.planet))}),e.jsxs("div",{className:"petal",style:{transform:`translateX(-50%) rotate(${D}deg)`},children:[e.jsx("div",{className:"rashi-number font-semibold",children:g(p)}),e.jsx("div",{className:"planets-container",children:v})]},p)}),e.jsx("div",{className:"chart-center-dot text-2xl font-bold dark:text-red-400",children:"ॐ"}),e.jsx(Ut,{cx:200,cy:200,onSelect:p=>m(p)})]}),e.jsx(k,{})]})},Gt=({selectedHouse:t,onClose:o,planetsByHouse:c,ascendantSign:x,ascendantDegrees:i,ascendantNakshatra:l,ascendantNakshatraPada:r,chartType:n,moon:m})=>e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black/50 z-50 pointer-events-auto",onClick:o,children:e.jsxs("div",{className:"bg-slate-200 dark:bg-gray-800 dark:text-stone-100 rounded-lg shadow-lg p-6 max-w-md w-full transition-colors duration-300 pointer-events-auto",onClick:d=>d.stopPropagation(),children:[e.jsxs("h3",{className:"font-bold text-lg mb-2 text-blue-600 dark:text-blue-400",children:["घर ",g(t)," – ",_[t-1]," (स्वामी:"," ",M[Ct[t]],")"]}),n!=="chandra"&&t===x&&i!==void 0&&e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"flex justify-between text-stone-800 dark:text-stone-100",children:[e.jsxs("span",{children:[Z.ASCENDANT," (",_[x-1],")"]}),e.jsxs("span",{children:[ge(i)," (",Ht(i),")"]})]}),l&&r&&e.jsxs("div",{className:"text-sm ml-2 text-gray-600 dark:text-gray-400",children:[_e[l],g(r)]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 h-2 rounded",children:e.jsx("div",{className:"bg-green-500 h-2 rounded",style:{width:`${Math.round(i/30*100)}%`}})})]}),n==="chandra"&&t===1&&m&&e.jsxs("div",{className:"mb-2",children:[e.jsx("div",{className:"flex justify-between text-stone-800 dark:text-stone-100",children:e.jsxs("span",{children:[Z.ASCENDANT," (चन्द्र)"]})}),m.nakshatra&&m.nakshatraPada&&e.jsxs("div",{className:"text-sm text-red-600 dark:text-red-400 font-semibold mt-1",children:["जनम नक्षत्र:"," ",_e[m.nakshatra],g(m.nakshatraPada)]})]}),(c.get(t)||[]).map(d=>n==="chandra"&&t===1&&d.planet==="MOON"?null:e.jsx("div",{className:"mb-2",children:e.jsxs("div",{className:"flex justify-between text-stone-800 dark:text-stone-100",children:[e.jsx("span",{className:d.retrograde?"font-bold text-blue-600 dark:text-blue-400":"",children:M[d.planet]}),d.degreesInSign!==void 0&&e.jsx("span",{children:ge(d.degreesInSign)})]})},d.planet))]})}),Wt=({planets:t,ascendantSign:o,isChandraChart:c,onSelectRashi:x})=>{const i=l=>(o+l-2)%12+1;return e.jsx("div",{className:"w-full max-w-[85%] mx-auto aspect-square relative bg-[#fffaf0] dark:bg-gray-800 border-2 border-[#d2b48c] dark:border-gray-600 select-none rounded-2xl overflow-hidden",children:e.jsxs("svg",{viewBox:"0 0 100 100",className:"w-full h-full",children:[Vt.map((l,r)=>{const n=r+1,m=i(n),d=t.filter(y=>y.rashi===m);return e.jsxs("g",{onClick:()=>x(m),className:"cursor-pointer hover:opacity-80 transition-opacity",children:[e.jsx("path",{d:l.path,className:"fill-transparent stroke-[#d2b48c] dark:stroke-gray-500 stroke-[0.5px] hover:fill-orange-400/20 dark:hover:fill-orange-500/20 transition-colors"}),e.jsx("text",{x:l.rashiPos.x,y:l.rashiPos.y,fontSize:"4",textAnchor:"middle",dominantBaseline:"middle",className:"fill-red-600 dark:fill-red-400 font-bold pointer-events-none",children:g(m)}),e.jsxs("g",{transform:`translate(${l.centroid.x}, ${l.centroid.y})`,children:[d.map((y,w)=>e.jsx("text",{y:-2+w*3.5,fontSize:"3",textAnchor:"middle",className:`fill-stone-800 dark:fill-stone-200 pointer-events-none ${y.retrograde?"font-bold underline":""}`,children:Z[y.planet]},y.planet)),n===1&&e.jsx("text",{y:"-5",fontSize:"3",textAnchor:"middle",className:"fill-blue-600 dark:fill-blue-400 font-bold pointer-events-none",children:c?"चन्द्र":"ल"})]})]},n)}),e.jsx("rect",{x:"0",y:"0",width:"100",height:"100",rx:"5",ry:"5",fill:"none",className:"stroke-[#d2b48c] dark:stroke-gray-600 stroke-[1px] pointer-events-none"})]})})},Xt=({planets:t,ascendantSign:o,isChandraChart:c,onSelectRashi:x})=>{const i=[{r:1,x:1,y:0},{r:2,x:2,y:0},{r:3,x:3,y:0},{r:4,x:3,y:1},{r:5,x:3,y:2},{r:6,x:3,y:3},{r:7,x:2,y:3},{r:8,x:1,y:3},{r:9,x:0,y:3},{r:10,x:0,y:2},{r:11,x:0,y:1},{r:12,x:0,y:0}],l=r=>(r-o+12)%12+1;return e.jsxs("div",{className:"w-full max-w-[85%] mx-auto aspect-square relative bg-[#fffaf0] dark:bg-gray-800 border-2 border-[#d2b48c] dark:border-gray-600 grid grid-cols-4 grid-rows-4 select-none rounded-2xl overflow-hidden",children:[e.jsx("div",{className:"col-start-2 col-span-2 row-start-2 row-span-2 flex items-center justify-center border border-[#d2b48c] dark:border-gray-600",children:e.jsx("span",{className:"text-4xl text-red-500 font-bold dark:text-red-400 opacity-20",children:"ॐ"})}),i.map(({r,x:n,y:m})=>{const d=t.filter(k=>k.rashi===r),y=r===o,w=l(r),S={gridColumnStart:n+1,gridRowStart:m+1};return e.jsxs("div",{style:S,onClick:()=>x(r),className:"border border-[#d2b48c] dark:border-gray-600 p-0.5 flex flex-col items-center relative overflow-hidden cursor-pointer hover:bg-orange-100/50 dark:hover:bg-gray-700/50 transition-colors",children:[e.jsx("span",{className:"absolute top-0.5 right-0.5 text-[8px] text-gray-500 dark:text-gray-400 pointer-events-none font-medium",children:g(w)}),y&&e.jsx("span",{className:"text-[9px] font-bold text-blue-600 dark:text-blue-400 mb-0.5 pointer-events-none",children:c?"चन्द्र":"ल"}),e.jsx("div",{className:"flex flex-wrap justify-center gap-0.5 content-center flex-grow pointer-events-none",children:d.map(k=>e.jsx("span",{className:`text-[9px] px-0.5 ${k.retrograde?"font-bold underline":""} dark:text-gray-200`,children:Z[k.planet]},k.planet))})]},r)})]})},Jt=({planets:t})=>e.jsxs("div",{className:"kundali-card p-4 sm:p-6 rounded-lg overflow-x-auto dark:bg-gray-800 dark:text-stone-100 transition-colors duration-300 print:bg-white print:shadow-none print:border-none",children:[e.jsx("h3",{className:"text-xl font-bold text-blue-400 dark:text-blue-400 mb-4",children:a.planetaryPositions}),e.jsxs("table",{className:"w-full text-left text-sm sm:text-base",children:[e.jsx("thead",{className:"border-b-2 border-amber-200 dark:border-amber-700 text-stone-600 dark:text-stone-300",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 px-2",children:a.planet}),e.jsx("th",{className:"py-2 px-2",children:a.rashi}),e.jsx("th",{className:"py-2 px-2",children:a.degrees}),e.jsx("th",{className:"py-2 px-2",children:a.nakshatra}),e.jsx("th",{className:"py-2 px-2",children:a.pada})]})}),e.jsx("tbody",{children:t.map(o=>e.jsxs("tr",{className:"border-b border-amber-100 dark:border-stone-700 hover:bg-amber-50/70 dark:hover:bg-gray-800 transition-colors duration-200",children:[e.jsxs("td",{className:"py-2 px-2 font-medium text-stone-800 dark:text-stone-100",children:[M[o.planet],o.retrograde&&e.jsxs("span",{className:"text-blue-600 dark:text-blue-400 ml-1",children:["(",a.retrograde,")"]})]}),e.jsx("td",{className:"py-2 px-2",children:_[o.rashi-1]}),e.jsx("td",{className:"py-2 px-2 font-mono",children:Ue(o.degreesInSign)}),e.jsx("td",{className:"py-2 px-2",children:o.nakshatra}),e.jsx("td",{className:"py-2 px-2",children:g(o.nakshatraPada)})]},o.planet))})]})]}),De=({data:t,title:o,titleClassName:c})=>{const x=f=>{if(!f)return"?";try{const j=new Date(f),h=j.getUTCHours(),P=j.getUTCMinutes(),$=At(h),B=h%12===0?12:h%12;return`${g(B)}:${g(P.toString().padStart(2,"0"))} ${$}`}catch{return"?"}};function i(f){let j,h;if(f>=1&&f<=15)j=f,h="शुक्ल पक्ष";else if(f>=16&&f<=30)j=f-15,h="कृष्ण पक्ष";else return`अवैध तिथि (${f})`;return Mt(j,h)}const l=(f,j,h)=>{if(!f||!j||!h)return"?";try{const P=G=>{const E=new Date(G);return new Date(E.getUTCFullYear(),E.getUTCMonth(),E.getUTCDate(),E.getUTCHours(),E.getUTCMinutes(),E.getUTCSeconds())},$=P(h),B=P(f),ae=P(j),L=I($),H=I(B),F=I(ae),O=x(f),V=x(j),T=H.year===L.year&&H.monthIndex===L.monthIndex&&H.day===L.day,K=F.year===L.year&&F.monthIndex===L.monthIndex&&F.day===L.day,q=T?O:`${g(H.day)} गते ${O}`,ie=K?V:`${g(F.day)} गते ${V}`;return`${q} देखि ${ie} सम्म`}catch{return"N/A"}},r=t.planets.find(f=>f.planet==="MOON"),n=t.planets.find(f=>f.planet==="SUN"),m=new Date(t.birthDetails.datetime),d=I(m),y=`${g(d.year)} ${te[d.monthIndex]} ${g(d.day)}`,w=Pt[m.getDay()],S=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"long",day:"numeric"}).format(m),k=new Intl.DateTimeFormat("ne-NP",{hour:"numeric",minute:"numeric",hour12:!0}).format(m),p=we[t.nakshatra.index],N=p?p.syllables[t.nakshatra.pada-1]:"?";function D(f,j){const h=we.findIndex($=>$.name===f);return h===-1?"?":we[h].syllables[j-1]||"?"}const v=r?D(r.nakshatra,r.nakshatraPada):"?",C=_[t.ascendant.sign-1],A=Ue(t.ascendant.degreesInSign);return e.jsxs("div",{className:"kundali-card p-4 sm:p-6 rounded-lg h-full bg-white/60 print:bg-white dark:bg-gray-800 print:shadow-none print:border-none border border-amber-200/50 dark:border-gray-700",children:[e.jsx("h3",{className:`text-xl font-bold mb-4 text-center ${c||"text-blue-400 dark:text-blue-400"}`,children:o||a.birthDetails}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-6 gap-y-2 text-sm",children:[e.jsxs("div",{className:"flex gap-1 items-start ",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[a.birthDateBS,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:y})]}),e.jsxs("div",{className:"flex gap-1 items-start",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[a.birthDateAD,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:S})]}),e.jsxs("div",{className:"flex gap-1 items-start",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[a.birthTime,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:k})]}),e.jsxs("div",{className:"flex gap-1 items-start",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[a.dayOfWeek,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:w})]}),e.jsxs("div",{className:"flex gap-1 items-start",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[a.place,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:t.birthDetails.locationName||`${t.birthDetails.latitude.toFixed(4)}, ${t.birthDetails.longitude.toFixed(4)}`})]}),e.jsxs("div",{className:"flex gap-1 items-start",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[a.latitudeShort,"/",a.longitudeShort,":"]}),e.jsxs("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:[t.birthDetails.latitude.toFixed(4),"° / ",t.birthDetails.longitude.toFixed(4),"°"]})]}),e.jsxs("div",{className:"flex gap-1 items-start",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[a.timeZone,":"]}),e.jsxs("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:[t.birthDetails.zoneId," (GMT",t.birthDetails.offset>=0?"+":"",t.birthDetails.offset,")"]})]})]}),e.jsxs("div",{className:"mt-6 pt-4 border-t-2 border-amber-200 dark:border-amber-700",children:[e.jsx("h3",{className:"text-lg font-bold text-blue-400 dark:text-blue-400 mb-3",children:a.dailyTimings}),e.jsxs("div",{className:"grid grid-cols-[auto_1fr] sm:grid-cols-[auto_1fr_auto_1fr] items-center gap-x-4 gap-y-2 text-sm",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400 text-right",children:[a.sunrise,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100 text-left",children:g(t.sunRise)}),e.jsxs("span",{className:"text-stone-500 dark:text-stone-400 text-right sm:text-right",children:[a.sunset,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100 text-left",children:g(t.sunSet)})]})]}),e.jsxs("div",{className:"mt-6 pt-4 border-t-2 border-amber-200 dark:border-amber-700",children:[e.jsx("h3",{className:"text-lg font-bold text-blue-400 dark:text-blue-400 mb-3",children:a.astrologicalDetails}),e.jsxs("div",{className:"grid grid-cols-[auto_1fr] items-center gap-x-4 gap-y-3 text-sm",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400 text-right",children:[a.lagna,":"]}),e.jsxs("span",{className:"font-semibold text-stone-800 dark:text-stone-100 text-left",children:[C," (",A,")"]}),t.ashtaKoota.lagnesh&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400 text-right",children:[a.lagnesh,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100 text-left",children:t.ashtaKoota.lagnesh})]}),r&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400 text-right",children:[a.moonSign,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100 text-left",children:_[r.rashi-1]})]}),t.ashtaKoota.rashiLord&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400 text-right",children:[a.rashiLord,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100 text-left",children:t.ashtaKoota.rashiLord})]}),n&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400 text-right",children:[a.sunSign,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100 text-left",children:_[n.rashi-1]})]}),e.jsxs("span",{className:"text-stone-500 dark:text-stone-400 text-right",children:[a.birthNakshatra,":"]}),e.jsxs("div",{className:"text-left",children:[e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:t.nakshatra.nameNepali}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:l(t.nakshatra.start,t.nakshatra.end,t.birthDetails.datetime)}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[e.jsxs("span",{className:"font-semibold",children:["पद ",g(t.nakshatra.pada),": "]}),l(t.nakshatra.padaStart,t.nakshatra.padaEnd,t.birthDetails.datetime)]}),r&&(t.nakshatra.nameNepali!==r.nakshatra||t.nakshatra.pada!==r.nakshatraPada)&&e.jsxs("span",{className:"font-semibold text-green-700 dark:text-green-600",children:[a.modernAstroInfo,": ",a.nakshatra,": ",r.nakshatra," ",a.pada,": ",g(r.nakshatraPada)]})]}),e.jsxs("span",{className:"text-stone-500 dark:text-stone-400 text-right",children:[a.tithi,":"]}),e.jsxs("div",{className:"text-left",children:[e.jsxs("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:[t.tithi.paksha,"  ",i(t.tithi.tithiNumber),"(",g(t.tithi.tithiNumber),")"]}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:l(t.tithi.start,t.tithi.end,t.birthDetails.datetime)})]}),e.jsxs("span",{className:"text-stone-500 dark:text-stone-400 text-right",children:[a.yoga,":"]}),e.jsxs("div",{className:"text-left",children:[e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:t.yoga.name}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:l(t.yoga.start,t.yoga.end,t.birthDetails.datetime)})]}),e.jsxs("span",{className:"text-stone-500 dark:text-stone-400 text-right",children:[a.karana,":"]}),e.jsxs("div",{className:"text-left",children:[e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:t.karana.name}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:l(t.karana.start,t.karana.end,t.birthDetails.datetime)})]}),e.jsxs("span",{className:"text-stone-500 dark:text-stone-400 text-right",children:[a.suggestedSyllable,":"]}),e.jsx("span",{className:"font-bold text-amber-600 dark:text-amber-600 text-lg text-left",children:N})]}),r&&(t.nakshatra.nameNepali!==r.nakshatra||t.nakshatra.pada!==r.nakshatraPada)&&e.jsx("div",{className:"text-left mt-2 pl-4 border-l-2 border-green-200",children:e.jsxs("span",{className:"font-semibold text-green-700 dark:text-green-600",children:[a.modernAstroInfo,": ",v]})})]}),t.ashtaKoota&&e.jsxs("div",{className:"mt-6 pt-4 border-t-2 border-amber-200 dark:border-amber-700",children:[e.jsx("h3",{className:"text-lg font-bold text-blue-400 dark:text-blue-400 mb-3",children:a.gunaMilanDetails}),e.jsxs("div",{className:"grid grid-cols-[auto_1fr_auto_1fr] sm:grid-cols-[auto_1fr_auto_1fr_auto_1fr] gap-x-4 gap-y-2 text-sm items-baseline",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[a.varna,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:t.ashtaKoota.varna}),e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[a.vasya,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:t.ashtaKoota.vasya}),e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[a.gana,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:t.ashtaKoota.gana}),e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[a.yoni,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:t.ashtaKoota.yoni}),e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[a.nadi,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:t.ashtaKoota.nadi}),e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[a.tatva,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:t.ashtaKoota.tatva}),e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[a.paya,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:t.ashtaKoota.paya})]})]}),e.jsxs("div",{className:"mt-6 pt-4 border-t-2 border-amber-200 dark:border-amber-700",children:[e.jsx("h3",{className:"text-lg font-bold text-blue-400 dark:text-blue-400 mb-2",children:a.calculationDetails}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-6 gap-y-2 text-sm",children:[e.jsxs("div",{className:"flex gap-1 items-start",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[a.backend,":"]}),e.jsxs("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:[t.calculationMeta.backend,": ",t.calculationMeta.version]})]}),e.jsxs("div",{className:"flex gap-1 items-start",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[a.ayanamsa,":"]}),e.jsxs("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:[t.calculationMeta.ayanamsa," (",t.calculationMeta.ayanamsaString,")"]})]}),e.jsxs("div",{className:"flex gap-1 items-start",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[a.houseSystem,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:t.calculationMeta.houseSystem})]})]})]})]})},ee=t=>{if(!t||t==="N/A")return"N/A";try{const o=new Date(t);if(isNaN(o.getTime()))return"N/A";const c=I(o),x=g(c.year.toString()),i=te[c.monthIndex],l=g(c.day.toString());return`${x} ${i} ${l}`}catch(o){return console.error("Date formatting error:",o),"N/A"}},oe=({dashaSequence:t,title:o})=>{const[c,x]=b.useState(null),i=o===a.jaiminiDasha,l=r=>{x(n=>n===r?null:r)};return e.jsxs("div",{className:"kundali-card p-2 sm:p-6 mb-11 print:mb-2 rounded-lg bg-white/60 dark:bg-gray-800 break-inside-avoid-page page-break-inside-avoid print:bg-white print:shadow-none print:border-none border border-amber-200/50 dark:border-gray-700",children:[e.jsx("h3",{className:"text-xl font-bold text-blue-400 dark:text-blue-400 mb-4 print:hidden",children:o}),i&&e.jsx("p",{className:"text-xs text-stone-500 dark:text-stone-400 -mt-3 mb-3 px-2 print:hidden",children:a.jaiminiProportionalNote}),e.jsx("div",{className:"print:hidden",children:e.jsxs("table",{className:"w-full text-left text-sm sm:text-base border-collapse",children:[e.jsx("thead",{className:"border-b-2 border-amber-200 dark:border-amber-700 text-stone-600 dark:text-stone-300",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 px-2",children:i?"दशा राशि":a.mahaDasha}),e.jsx("th",{className:"py-2 px-2",children:a.startsOn}),e.jsx("th",{className:"py-2 px-2",children:a.endsOn})]})}),e.jsx("tbody",{children:t.map(r=>{const n=r.planet+r.start,m=r.subDashas&&r.subDashas.length>0;return e.jsxs(ft.Fragment,{children:[e.jsxs("tr",{className:`border-b border-amber-100 dark:border-amber-800 ${m?"cursor-pointer hover:bg-amber-50/70 dark:hover:bg-amber-900/40":""}`,onClick:()=>m&&l(n),"aria-expanded":m&&c===n,"aria-controls":`antardasha-${n}`,children:[e.jsxs("td",{className:"py-2 px-2 font-medium text-stone-800 dark:text-stone-100 flex items-center relative",children:[m&&e.jsxs("div",{className:"relative group",children:[e.jsx(de,{className:`w-4 h-4 mr-2 text-amber-700 dark:text-blue-400 transition-transform duration-300 ${c===n?"rotate-180":""}`}),e.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 mt-1 px-2 py-1 bg-zinc-800 text-white text-xs rounded shadow-md opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap z-[999] dark:bg-gray-800 dark:text-stone-200",children:a.antarDasha_clickToExpand})]}),e.jsx("span",{className:`z-0 ${m?"":"ml-6"}`,children:i?r.planet:M[r.planet]||M[r.planet.toUpperCase()]||r.planet})]}),e.jsx("td",{className:"py-2 px-2 text-stone-700 dark:text-stone-200",children:ee(r.start)}),e.jsx("td",{className:"py-2 px-2 text-stone-700 dark:text-stone-200",children:ee(r.end)})]}),m&&e.jsx("tr",{className:"bg-white/40 dark:bg-gray-800",children:e.jsx("td",{colSpan:3,className:"p-0 border-none",children:e.jsx("div",{id:`antardasha-${n}`,className:`overflow-hidden transition-all duration-500 ease-in-out ${c===n?"max-h-[1000px]":"max-h-0"}`,children:e.jsxs("div",{className:"p-4 bg-amber-50/50 dark:bg-amber-900/20",children:[e.jsx("h4",{className:"font-semibold text-blue-400 dark:text-blue-400 mb-2 pl-2",children:i?"अन्तरदशा राशि":a.antarDasha}),e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"text-stone-500 dark:text-stone-400",children:e.jsxs("tr",{children:[e.jsx("th",{className:"font-medium py-1 px-2 text-left",children:i?"राशि":a.planet}),e.jsx("th",{className:"font-medium py-1 px-2 text-left",children:a.startsOn}),e.jsx("th",{className:"font-medium py-1 px-2 text-left",children:a.endsOn})]})}),e.jsx("tbody",{children:r.subDashas.map(d=>e.jsxs("tr",{className:"border-b border-amber-100 dark:border-amber-800 last:border-b-0",children:[e.jsx("td",{className:"py-1.5 px-2 text-stone-800 dark:text-stone-100",children:i?d.planet:M[d.planet]||M[d.planet.toUpperCase()]||d.planet}),e.jsx("td",{className:"py-1.5 px-2 text-stone-700 dark:text-stone-200",children:ee(d.start)}),e.jsx("td",{className:"py-1.5 px-2 text-stone-700 dark:text-stone-200",children:ee(d.end)})]},d.planet+d.start))})]})]})})})})]},n)})})]})}),e.jsxs("div",{className:"hidden print:block mt-1",children:[e.jsx("h4",{className:"text-lg font-semibold mb-1 text-stone-800",children:o}),i&&e.jsx("p",{className:"text-xs text-stone-500 -mt-1 mb-1 px-2 italic",children:a.jaiminiProportionalNote}),e.jsxs("table",{className:"w-full text-left text-sm border-collapse mb-1",children:[e.jsx("thead",{className:"border-b-2 border-stone-400 text-stone-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-1 px-2",children:i?"दशा राशि":a.mahaDasha}),e.jsx("th",{className:"py-1 px-2",children:a.startsOn}),e.jsx("th",{className:"py-1 px-2",children:a.endsOn})]})}),e.jsx("tbody",{children:t.slice(0,12).map(r=>e.jsxs("tr",{className:"border-b border-stone-200",children:[e.jsx("td",{className:"py-1 px-2 font-medium text-stone-800",children:i?r.planet:M[r.planet]||M[r.planet.toUpperCase()]||r.planet}),e.jsx("td",{className:"py-1 px-2 text-stone-700",children:ee(r.start)}),e.jsx("td",{className:"py-1 px-2 text-stone-700",children:ee(r.end)})]},`print-${r.planet}-${r.start}`))})]}),e.jsx("p",{className:"text-xs text-stone-600 px-2 italic",children:a.subDashaPrintNote})]})]})},Ve=({isOpen:t,onClose:o,onPrint:c})=>{const[x,i]=b.useState("confirm"),[l,r]=b.useState(5),n=typeof window<"u"&&!!window.Android;b.useEffect(()=>{t&&(i("confirm"),r(5))},[t]),b.useEffect(()=>{let y;return x==="countdown"&&l>0?y=setTimeout(()=>r(w=>w-1),1e3):x==="countdown"&&l===0&&i("ready"),()=>clearTimeout(y)},[x,l]);const m=()=>{n&&window.Android?.triggerFullScreenAd?(window.Android.triggerFullScreenAd(),i("countdown")):(c(),o())},d=()=>{n&&window.Android?.printPage?window.Android.printPage():c(),o()};return!t||!n?null:e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-sm w-full p-6 relative animate-in fade-in zoom-in duration-200",children:[e.jsx("button",{onClick:o,className:"absolute top-3 right-3 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200",children:e.jsx(jt,{size:20})}),x==="confirm"&&e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto bg-blue-100 dark:bg-blue-900/30 w-12 h-12 rounded-full flex items-center justify-center mb-4",children:e.jsx(kt,{className:"text-blue-600 dark:text-blue-400",size:24})}),e.jsxs("h3",{className:"text-lg font-bold text-gray-900 dark:text-gray-100 mb-2",children:["Support ",a.project]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm mb-6",children:"Please watch a short ad to print this document. Your support helps us keep the app free."}),e.jsx("button",{onClick:m,className:"w-full py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium shadow-md transition-all active:scale-95 flex items-center justify-center gap-2",children:"Watch Ad & Print"})]}),x==="countdown"&&e.jsxs("div",{className:"text-center py-4",children:[e.jsx("div",{className:"text-4xl font-bold text-blue-600 dark:text-blue-400 mb-2 animate-pulse",children:l}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm",children:"Preparing print..."}),e.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Please wait for the ad to finish"})]}),x==="ready"&&e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto bg-green-100 dark:bg-green-900/30 w-12 h-12 rounded-full flex items-center justify-center mb-4",children:e.jsx(Re,{className:"text-green-600 dark:text-green-400",size:24})}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Ready to Print"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm mb-6",children:"Thank you for your support!"}),e.jsxs("button",{onClick:d,className:"w-full py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium shadow-md transition-all active:scale-95 flex items-center justify-center gap-2",children:[e.jsx(Re,{size:18})," Print Now"]})]})]})})},Ye=t=>{if(!t||t==="N/A")return"N/A";try{const o=new Date(t);if(isNaN(o.getTime()))return"N/A";const c=I(o),x=g(c.year.toString()),i=te[c.monthIndex],l=g(c.day.toString());return`${x} ${i} ${l}`}catch(o){return console.error("Date formatting error:",o),"N/A"}},Se=({chart:t,style:o})=>{if(!t.chartData)return null;const c="planets"in t.chartData?t.chartData.planets:[],x="ascendant"in t.chartData?t.chartData.ascendant.sign:1,i="ascendant"in t.chartData?t.chartData.ascendant.degreesInSign:void 0,l="ascendant"in t.chartData?t.chartData.ascendant.nakshatra:void 0,r="ascendant"in t.chartData?t.chartData.ascendant.nakshatraPada:void 0;return e.jsxs("div",{className:"chart-instance dark:bg-gray-800 break-inside-avoid-page page-break-inside-avoid print:mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold mb-1 text-center dark:text-blue-400",children:t.title}),e.jsx("div",{className:"chart-card dark:bg-gray-800 rounded-lg p-2 transition-colors duration-300",children:e.jsx(qt,{planets:c.map(n=>({planet:n.planet,rashi:"rashi"in n?n.rashi:n.sign,degreesInSign:"degreesInSign"in n?n.degreesInSign:void 0,retrograde:n.retrograde,nakshatra:n.nakshatra,nakshatraPada:n.nakshatraPada})),ascendantSign:x,ascendantDegrees:i,ascendantNakshatra:l,ascendantNakshatraPada:r,chartType:t.type,chartStyle:o})})]},t.title)},na=({data:t,onReturnToForm:o})=>{const[c,x]=b.useState(!1),[i,l]=b.useState(!1),[r,n]=b.useState("north"),[m,d]=b.useState(!1),y=t.divisionalCharts.find(h=>h.name.includes("D9")),w=t.divisionalCharts.find(h=>h.name.includes("D10")),S=t.divisionalCharts.find(h=>h.name.includes("D3")),k=t.divisionalCharts.find(h=>h.name.includes("D12")),p=t.divisionalCharts.find(h=>h.name.includes("D4")),N=t.divisionalCharts.find(h=>h.name.includes("D60")),D=[{type:"lagna",title:a.rashiChart,chartData:t},{type:"chandra",title:a.chandraChart,chartData:t},{type:"navamsha",title:a.navamsaChart,chartData:y},{type:"dashamsa",title:a.dashamsaChart,chartData:w}],v=[{type:"drekkana",title:a.drekkanaChart,chartData:S},{type:"dwadamsha",title:a.dwadamshaChart,chartData:k},{type:"chaturthamsha",title:a.chaturthamshaChart,chartData:p},{type:"shashtiamsha",title:a.shashtiamshaChart,chartData:N}].filter(h=>h.chartData),C=he(),A=I(C),f=`${g(A.year)} ${te[A.monthIndex]} ${g(A.day)}`,j=C.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0,timeZone:"UTC"});return e.jsxs("div",{className:"kundali-display-container flex flex-col bg-[#fff8e1] print:bg-white rounded-xl shadow-lg print:shadow-none w-full lg:max-w-4xl xl:max-w-6xl mx-auto lg:p-4 md:p-1 space-y-4 text-sm md:text-base dark:bg-gray-800 dark:text-gray-200 dark:border pb-32 print:pb-2 print:space-y-2 border-4 border-amber-400 dark:border-gray-600 border-double",children:[e.jsxs("header",{className:"kundali-card rounded-lg text-center dark:bg-gray-800 dark:text-blue-400 transition-colors duration-300 print:bg-white print:shadow-none",children:[e.jsx("h2",{className:"text-3xl self-center font-bold text-blue-400 dark:text-blue-400",children:a.kundaliOf(t.birthDetails.name)}),e.jsxs("div",{className:"hidden text-xs self-center print:block font-bold text-gray-700 dark:text-gray-400",children:[a.printedDate,": ",f," ",j]}),e.jsx("div",{className:"mt-2 text-xs text-orange-600 dark:text-orange-400 text-center px-2",children:a.kundaliDisclaimer})]}),e.jsx("div",{className:"grid grid-cols-1 gap-4 print:gap-2",children:e.jsxs("div",{className:"flex flex-col gap-4 print:gap-2",children:[e.jsx("div",{className:"kundali-card p-4 print:p-2 rounded-lg bg-white/60 print:bg-white dark:bg-gray-800 shadow-sm print:shadow-none print:border print:border-gray-300 border border-amber-200/50 dark:border-gray-700",children:e.jsx(De,{data:t})}),e.jsx("div",{className:"kundali-card p-4 print:p-2 rounded-lg bg-white/60 print:bg-white dark:bg-gray-800 shadow-sm print:shadow-none print:border print:border-gray-300 border border-amber-200/50 dark:border-gray-700",children:e.jsx(Jt,{planets:t.planets})})]})}),e.jsxs("div",{className:"print:break-inside-avoid-page",children:[e.jsx("div",{className:"print:hidden flex justify-center gap-2 mb-4",children:e.jsxs("div",{className:"bg-amber-200/40 dark:bg-gray-700 rounded-lg p-1 flex shadow-inner border border-amber-200/50 dark:border-gray-600",children:[e.jsx("button",{onClick:()=>n("default"),className:`px-3 py-1 rounded-md text-sm font-medium transition-all ${r==="default"?"bg-white dark:bg-gray-600 text-amber-700 dark:text-blue-400 shadow-sm":"text-amber-800/70 dark:text-gray-400 hover:bg-amber-100/50 dark:hover:bg-gray-600/50"}`,children:"पद्म चक्र"}),e.jsx("button",{onClick:()=>n("north"),className:`px-3 py-1 rounded-md text-sm font-medium transition-all ${r==="north"?"bg-white dark:bg-gray-600 text-amber-700 dark:text-blue-400 shadow-sm":"text-amber-800/70 dark:text-gray-400 hover:bg-amber-100/50 dark:hover:bg-gray-600/50"}`,children:"वज्र वर्ग"}),e.jsx("button",{onClick:()=>n("south"),className:`px-3 py-1 rounded-md text-sm font-medium transition-all ${r==="south"?"bg-white dark:bg-gray-600 text-amber-700 dark:text-blue-400 shadow-sm":"text-amber-800/70 dark:text-gray-400 hover:bg-amber-100/50 dark:hover:bg-gray-600/50"}`,children:"चतुराश्र चक्र"})]})}),e.jsxs("div",{className:"print:hidden",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-6",children:D.map(h=>e.jsx(Se,{chart:h,style:r},h.type))}),v.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`grid grid-cols-1 md:grid-cols-2 gap-6 mt-6 transition-all duration-500 overflow-hidden ${c?"max-h-[2000px] opacity-100":"max-h-0 opacity-0"}`,children:c&&v.map(h=>e.jsx(Se,{chart:h,style:r},h.type))}),e.jsx("div",{className:"text-center mt-4",children:e.jsxs("button",{onClick:()=>x(!c),className:"flex items-center justify-center gap-2 mx-auto px-4 py-2 text-sm font-medium text-blue-600 dark:text-blue-400 bg-blue-100/50 dark:bg-blue-900/20 rounded-lg hover:bg-blue-100 dark:hover:bg-blue-900/40 transition",children:[e.jsx("span",{children:c?a.showLessCharts:a.showMoreCharts}),e.jsx(de,{className:`w-4 h-4 transition-transform duration-300 ${c?"rotate-180":""}`})]})})]})]}),e.jsx("div",{className:"hidden print:block",children:e.jsx("div",{className:"flex flex-wrap -mx-2 mt-2 pt-4 border-t border-gray-300 dark:border-gray-700",children:[...D,...v].map(h=>e.jsx("div",{className:"w-1/2 px-2 mb-4 ",children:e.jsx(Se,{chart:h,style:r})},`print-${h.type}`))})})]}),e.jsxs("div",{className:"space-y-4 print:space-y-2 print:pt-2",children:[e.jsx(oe,{dashaSequence:t.dashaSequence,title:a.dashaPeriods}),t.yoginiDasha?.length>0&&e.jsx(oe,{dashaSequence:t.yoginiDasha,title:a.yoginiDasha}),t.ashtottariDasha?.length>0&&e.jsx(oe,{dashaSequence:t.ashtottariDasha,title:a.ashtottariDasha}),t.jaiminiDasha?.length>0&&e.jsx(oe,{dashaSequence:t.jaiminiDasha,title:a.jaiminiDasha}),t.tribhagiDasha?.length>0&&e.jsxs("div",{className:"kundali-card p-2 sm:p-6 mb-11 print:mb-2 rounded-lg bg-white/60 dark:bg-gray-800 break-inside-avoid-page page-break-inside-avoid print:bg-white print:shadow-none print:border-none border border-amber-200/50 dark:border-gray-700",children:[e.jsxs("button",{onClick:()=>d(!m),className:"w-full flex items-center justify-between text-xl font-bold text-blue-400 dark:text-blue-400 mb-2 print:hidden",children:[e.jsx("span",{children:a.tribhagiDasha}),e.jsx(de,{className:`w-5 h-5 transition-transform duration-300 ${m?"rotate-180":""}`})]}),!m&&e.jsxs("div",{className:"print:hidden cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700/50 rounded-lg p-2 transition-colors",onClick:()=>d(!0),children:[e.jsxs("table",{className:"w-full text-left text-sm border-collapse",children:[e.jsx("thead",{className:"border-b-2 border-amber-200 dark:border-amber-700 text-stone-600 dark:text-stone-300",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 px-2",children:a.mahaDasha}),e.jsx("th",{className:"py-2 px-2",children:a.startsOn}),e.jsx("th",{className:"py-2 px-2",children:a.endsOn})]})}),e.jsx("tbody",{children:t.tribhagiDasha.slice(0,3).map(h=>e.jsxs("tr",{className:"border-b border-amber-100 dark:border-amber-800",children:[e.jsx("td",{className:"py-2 px-2 font-medium text-stone-800 dark:text-stone-100",children:M[h.planet]||M[h.planet.toUpperCase()]||h.planet}),e.jsx("td",{className:"py-2 px-2 text-stone-700 dark:text-stone-200",children:Ye(h.start)}),e.jsx("td",{className:"py-2 px-2 text-stone-700 dark:text-stone-200",children:Ye(h.end)})]},h.planet+h.start))})]}),e.jsx("p",{className:"text-xs text-amber-600 dark:text-amber-400 mt-2 text-center underline decoration-dotted underline-offset-4",children:"थप हेर्न क्लिक गर्नुहोस्..."})]}),e.jsx("div",{className:`transition-all duration-500 overflow-hidden ${m?"max-h-[2000px] opacity-100":"max-h-0 opacity-0"}`,children:m&&e.jsx(oe,{dashaSequence:t.tribhagiDasha,title:""})})]})]}),e.jsxs("div",{className:"hidden print:block text-center text-xs text-gray-500 pt-4 mt-8 border-t border-gray-300",children:[e.jsx("p",{children:"Printed from nepdate web/android application."}),e.jsx("p",{className:"mt-1",children:e.jsx("a",{href:"https://play.google.com/store/apps/details?id=com.khumnath.nepdate",className:"text-blue-600 underline",children:"https://play.google.com/store/apps/details?id=com.khumnath.nepdate"})}),e.jsxs("p",{children:["© ",new Date().getFullYear()," ",a.project]})]}),e.jsx("div",{className:"mt-8 mb-8 w-full px-4 text-center print:hidden",children:e.jsxs("div",{className:"flex gap-4 justify-center",children:[e.jsxs("button",{className:"bg-blue-600 dark:bg-blue-600 text-white px-6 py-2 rounded shadow-md hover:bg-blue-700 transition flex items-center gap-2",onClick:o,children:["← ",a.returnToForm]}),e.jsxs("button",{className:"bg-gray-600 dark:bg-gray-500 text-white px-6 py-2 rounded shadow-md hover:bg-gray-700 transition flex items-center gap-2",onClick:()=>{window.Android?l(!0):be()},children:[e.jsx(He,{className:"w-4 h-4"})," ",a.print]})]})}),e.jsx(Ve,{isOpen:i,onClose:()=>l(!1),onPrint:be})]})},Qt={name:"सुरज",dateSystem:"BS",bsYear:2050,bsMonth:2,bsDay:2,hour:10,minute:15,second:0,period:"AM",location:{name:"काठमाडौं",romanization:"kathmandu",latitude:27.7172,longitude:85.324,offset:5.75,zoneId:"Asia/Kathmandu"}},ea={name:"अम्रिता",dateSystem:"BS",bsYear:2053,bsMonth:8,bsDay:9,hour:2,minute:30,second:0,period:"PM",location:{name:"काठमाडौं",romanization:"kathmandu",latitude:27.7172,longitude:85.324,offset:5.75,zoneId:"Asia/Kathmandu"}},la=({onCalculate:t,isLoading:o,defaultValues:c})=>{const x=b.useRef(null),i=b.useRef(null),l=async()=>{const r=x.current?.validateAndGetData(),n=i.current?.validateAndGetData();if(r&&n){const[m,d]=await Promise.all([r,n]);m&&d&&t(m,d)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-slate-50 rounded-xl shadow-lg p-4 dark:bg-gray-800/50",children:[e.jsx("h2",{className:"text-xl font-bold text-blue-700 dark:text-blue-300 mb-4 text-center",children:a.groomDetails}),e.jsx(Ke,{ref:x,onCalculate:()=>{},isLoading:!1,hideSubmitButton:!0,defaultValues:c?.groom||Qt})]}),e.jsxs("div",{className:"bg-slate-50 rounded-xl shadow-lg p-4 dark:bg-gray-800/50",children:[e.jsx("h2",{className:"text-xl font-bold text-pink-700 dark:text-pink-400 mb-4 text-center",children:a.brideDetails}),e.jsx(Ke,{ref:i,onCalculate:()=>{},isLoading:!1,hideSubmitButton:!0,defaultValues:c?.bride||ea})]})]}),e.jsx("div",{className:"pt-4 pb-16",children:e.jsx("button",{type:"button",onClick:l,disabled:o,className:"w-full flex justify-center items-center py-3 border border-transparent rounded-md shadow-sm text-base font-medium text-white bg-green-500 hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:bg-gray-400 disabled:cursor-not-allowed dark:bg-green-600 dark:hover:bg-green-700 dark:disabled:bg-gray-500",children:o?e.jsxs(e.Fragment,{children:[e.jsx(Ze,{className:"w-5 h-5 mr-3 animate-spin"}),a.calculating]}):a.calculateComparison})})]})},R=({label:t,groomValue:o,brideValue:c,typeLabel:x,maxPoints:i,obtainedPoints:l})=>e.jsxs("tr",{className:"border-b border-amber-100 dark:border-stone-700 last:border-b-0",children:[e.jsx("td",{className:"py-2 font-medium text-stone-800 dark:text-stone-100",children:t}),e.jsx("td",{className:"py-2 text-stone-700 dark:text-stone-200",children:o}),e.jsx("td",{className:"py-2 text-stone-700 dark:text-stone-200",children:c}),e.jsx("td",{className:"py-2 text-center text-blue-600 dark:text-blue-400 font-medium",children:x??""}),e.jsx("td",{className:"py-2 text-center text-stone-700 dark:text-stone-200",children:g(i)}),e.jsx("td",{className:"py-2 text-center font-semibold text-stone-800 dark:text-stone-100",children:g(l)})]}),oa=({result:t,onReturnToForm:o})=>{const[c,x]=b.useState(!1),{groom:i,bride:l,score:r,conclusion:n,labels:m}=t,d=he(),y=I(d),w=`${g(y.year)} ${te[y.monthIndex]} ${g(y.day)}`,S=d.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0,timeZone:"UTC"});return e.jsxs("div",{className:"kundali-display-container flex flex-col bg-slate-200 print:bg-white rounded-xl shadow-lg w-full lg:max-w-4xl xl:max-w-6xl lg:p-4 md:p-1 space-y-4 text-sm md:text-base dark:bg-gray-800 dark:text-gray-200 dark:border dark:border-gray-700 pb-32 print:pb-0 print:m-0 print:rounded-none print:shadow-none",children:[e.jsxs("header",{className:"kundali-card rounded-lg text-center p-4 dark:bg-gray-800 print:bg-white print:shadow-none",children:[e.jsxs("h2",{className:"text-2xl font-bold text-blue-400 dark:text-blue-400",children:[i.birthDetails.name," र ",l.birthDetails.name," को गुण मिलान"]}),e.jsxs("div",{className:"hidden text-xs self-center print:block font-bold text-gray-700 dark:text-gray-400",children:[a.printedDate,": ",w," ",S]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(De,{data:i,title:a.groomDetails,titleClassName:"text-blue-700 dark:text-blue-300"}),e.jsx(De,{data:l,title:a.brideDetails,titleClassName:"text-pink-700 dark:text-pink-400"})]}),e.jsxs("div",{className:"kundali-card p-3 sm:p-5 rounded-lg overflow-x-auto bg-slate-200 dark:bg-gray-800 print:bg-white print:shadow-none",children:[e.jsx("h3",{className:"text-xl font-bold text-blue-400 dark:text-blue-400 mb-4",children:a.gunaMilanTableTitle}),e.jsxs("table",{className:"w-full text-left text-sm sm:text-base",children:[e.jsx("thead",{className:"border-b-2 border-amber-200 dark:border-amber-700 text-stone-600 dark:text-stone-300",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 px-2",children:a.koota}),e.jsx("th",{className:"py-2 px-2",children:a.groom}),e.jsx("th",{className:"py-2 px-2",children:a.bride}),e.jsx("th",{className:"py-2 px-2 text-center",children:a.kootaType}),e.jsx("th",{className:"py-2 px-2 text-center",children:a.maxPoints}),e.jsx("th",{className:"py-2 px-2 text-center",children:a.obtainedPoints})]})}),e.jsxs("tbody",{children:[e.jsx(R,{label:a.varna,groomValue:i.ashtaKoota.varna,brideValue:l.ashtaKoota.varna,typeLabel:m.varnaLabel,maxPoints:1,obtainedPoints:r.varna}),e.jsx(R,{label:a.vasya,groomValue:i.ashtaKoota.vasya,brideValue:l.ashtaKoota.vasya,typeLabel:m.vasyaLabel,maxPoints:2,obtainedPoints:r.vasya}),e.jsx(R,{label:a.tara,groomValue:i.nakshatra.nameNepali,brideValue:l.nakshatra.nameNepali,typeLabel:m.taraLabel,maxPoints:3,obtainedPoints:r.tara}),e.jsx(R,{label:a.yoni,groomValue:i.ashtaKoota.yoni,brideValue:l.ashtaKoota.yoni,typeLabel:m.yoniLabel,maxPoints:4,obtainedPoints:r.yoni}),e.jsx(R,{label:a.grahaMaitri,groomValue:i.ashtaKoota.rashiLord,brideValue:l.ashtaKoota.rashiLord,typeLabel:m.grahaMaitriLabel,maxPoints:5,obtainedPoints:r.grahaMaitri}),e.jsx(R,{label:a.gana,groomValue:i.ashtaKoota.gana,brideValue:l.ashtaKoota.gana,typeLabel:m.ganaLabel,maxPoints:6,obtainedPoints:r.gana}),e.jsx(R,{label:a.bhakoot,groomValue:_[i.planets.find(k=>k.planet==="MOON").rashi-1],brideValue:_[l.planets.find(k=>k.planet==="MOON").rashi-1],typeLabel:m.bhakootLabel,maxPoints:7,obtainedPoints:r.bhakoot}),e.jsx(R,{label:a.nadi,groomValue:i.ashtaKoota.nadi,brideValue:l.ashtaKoota.nadi,typeLabel:m.nadiLabel,maxPoints:8,obtainedPoints:r.nadi})]}),e.jsx("tfoot",{className:"border-t-2 border-amber-300 dark:border-amber-600 font-bold",children:e.jsxs("tr",{children:[e.jsx("td",{colSpan:4,className:"py-2 px-2 text-right text-stone-800 dark:text-stone-100",children:a.totalPoints}),e.jsx("td",{className:"px-2 text-center text-stone-800 dark:text-stone-100",children:g(36)}),e.jsx("td",{className:"px-2 text-center text-lg text-blue-600 dark:text-blue-400",children:g(r.total)})]})})]})]}),e.jsxs("div",{className:"kundali-card rounded-lg bg-slate-200 dark:bg-gray-800 print:bg-white print:shadow-none",children:[e.jsx("h3",{className:"text-lg font-bold text-blue-400 dark:text-blue-400",children:a.conclusion}),e.jsx("p",{className:"text-stone-800 dark:text-stone-100",children:n})]}),e.jsxs("div",{className:"hidden print:block text-center text-xs text-gray-500 pt-4 mt-8 border-t border-gray-300",children:[e.jsx("p",{children:"Printed from nepdate web/android application."}),e.jsxs("p",{className:"mt-1",children:[e.jsx("a",{href:"https://play.google.com/store/apps/details?id=com.khumnath.nepdate",className:"text-blue-600 underline",children:"https://play.google.com/store/apps/details?id=com.khumnath.nepdate"}),e.jsx("br",{}),"© ",new Date().getFullYear()," ",a.project]})]}),e.jsxs("div",{className:"mt-8 mb-8 w-full px-4 text-center screen-only-footer print:hidden",children:[e.jsxs("div",{className:"flex gap-4 justify-center",children:[e.jsxs("button",{className:"bg-blue-600 dark:bg-blue-600 text-white px-6 py-2 rounded shadow-md hover:bg-blue-700 dark:hover:bg-blue-800 transition flex items-center gap-2",onClick:o,children:["← ",a.returnToForm]}),e.jsx("button",{className:"bg-gray-600 dark:bg-gray-500 text-white px-6 py-2 rounded shadow-md hover:bg-gray-700 dark:hover:bg-gray-600 transition flex items-center gap-2",onClick:()=>{window.Android?x(!0):be()},children:e.jsx(He,{className:"w-4 h-4"})})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2 md:hidden",children:a.mobilePrintHint})]}),e.jsx(Ve,{isOpen:c,onClose:()=>x(!1),onPrint:be})]})},da=({onClose:t,onEdit:o,onView:c})=>{const[x,i]=b.useState([]);b.useEffect(()=>{try{const n=localStorage.getItem("savedKundalis");n&&i(JSON.parse(n))}catch(n){console.error("Failed to load saved kundalis:",n)}},[]);const l=n=>{if(window.confirm(a.deleteConfirm)){const m=x.filter(d=>d.id!==n);i(m),localStorage.setItem("savedKundalis",JSON.stringify(m))}},r=n=>{const m=new Date(n);return new Intl.DateTimeFormat("ne-NP-u-nu-deva",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).format(m)};return e.jsx("div",{className:"fixed inset-0 flex flex-wrap items-center justify-center bg-black/60 z-50 p-4 transition-opacity",onClick:t,children:e.jsxs("div",{className:"bg-slate-200 dark:bg-gray-800 rounded-lg shadow-xl max-w-lg w-full max-h-[80vh] flex flex-wrap flex-col p-6",onClick:n=>n.stopPropagation(),children:[e.jsxs("div",{className:"flex flex-wrap justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-blue-500 dark:text-blue-400",children:a.savedKundalis}),e.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:e.jsx(Ce,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"overflow-y-auto flex-1",children:x.length===0?e.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-10",children:a.noSavedKundalis}):e.jsx("ul",{className:"space-y-3",children:x.map(n=>e.jsx("li",{className:"bg-slate-50 dark:bg-gray-700 p-3 rounded-md shadow-sm",children:e.jsxs("div",{className:"flex flex-wrap justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-blue-600 dark:text-blue-300",children:n.type==="individual"?n.name:`${n.groomName} र ${n.brideName}`}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[e.jsx("span",{className:`text-xs font-semibold px-2 py-0.5 rounded-full ${n.type==="individual"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300"}`,children:n.type==="individual"?a.individual:a.comparison}),e.jsxs("span",{className:"ml-2",children:[a.savedOn," ",r(n.timestamp)]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[e.jsx("button",{onClick:()=>c(n),className:"px-3 py-1 text-sm text-white bg-blue-500 rounded hover:bg-blue-600",children:a.view}),e.jsx("button",{onClick:()=>o(n),className:"px-3 py-1 text-sm text-gray-700 bg-gray-300 rounded hover:bg-gray-400 dark:bg-gray-500 dark:text-gray-100 dark:hover:bg-gray-400",children:a.edit}),e.jsx("button",{onClick:()=>l(n.id),className:"px-3 py-1 text-sm text-white bg-red-500 rounded hover:bg-red-600",children:a.delete})]})]})},n.id))})})]})})};export{oa as C,na as K,Ve as P,da as S,la as a,Ke as b};
