const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./pages-bYz7hhhw.js","./vendor-react-CGn20PhQ.js","./vendor-other-B6zHyxvG.js","./vendor-leaflet-Ch3uxlbW.js","./vendor-leaflet-Dgihpmma.css","./data-CfJgDuuc.js","./kundali-DD4fRa5i.js","./bikram-DGCg-481.js","./vendor-utils-y-iLWhYP.js"])))=>i.map(i=>d[i]);
import{r as a,j as e,i as ae,X as Se,H as ke,S as je,a as Ne,I as ne,D as Ee,M as Ce,b as Ie,k as Me}from"./vendor-react-CGn20PhQ.js";import{t as re,H as Le,N as f,I as Te,J as Pe,K as _e,M as De,L as Ae,O as Oe,P as Re,A as Be,Q as Ye,d as Fe}from"./bikram-DGCg-481.js";import{A as $e}from"./pages-bYz7hhhw.js";import{l as Ue,m as ze,a as We,b as Xe}from"./vendor-leaflet-Ch3uxlbW.js";import"./vendor-other-B6zHyxvG.js";import"./data-CfJgDuuc.js";import"./kundali-DD4fRa5i.js";import"./vendor-utils-y-iLWhYP.js";(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))p(n);new MutationObserver(n=>{for(const c of n)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&p(u)}).observe(document,{childList:!0,subtree:!0});function g(n){const c={};return n.integrity&&(c.integrity=n.integrity),n.referrerPolicy&&(c.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?c.credentials="include":n.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function p(n){if(n.ep)return;n.ep=!0;const c=g(n);fetch(n.href,c)}})();const Ve="modulepreload",Ke=function(r,i){return new URL(r,i).href},oe={},F=function(i,g,p){let n=Promise.resolve();if(g&&g.length>0){let k=function(o){return Promise.all(o.map(s=>Promise.resolve(s).then(x=>({status:"fulfilled",value:x}),x=>({status:"rejected",reason:x}))))};const u=document.getElementsByTagName("link"),d=document.querySelector("meta[property=csp-nonce]"),v=d?.nonce||d?.getAttribute("nonce");n=k(g.map(o=>{if(o=Ke(o,p),o in oe)return;oe[o]=!0;const s=o.endsWith(".css"),x=s?'[rel="stylesheet"]':"";if(p)for(let w=u.length-1;w>=0;w--){const j=u[w];if(j.href===o&&(!s||j.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${x}`))return;const m=document.createElement("link");if(m.rel=s?"stylesheet":Ve,s||(m.as="script"),m.crossOrigin="",m.href=o,v&&m.setAttribute("nonce",v),document.head.appendChild(m),s)return new Promise((w,j)=>{m.addEventListener("load",w),m.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${o}`)))})}))}function c(u){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=u,window.dispatchEvent(d),!d.defaultPrevented)throw u}return n.then(u=>{for(const d of u||[])d.status==="rejected"&&c(d.reason);return i().catch(c)})};function le(r={}){const{immediate:i=!1,onNeedRefresh:g,onOfflineReady:p,onRegistered:n,onRegisteredSW:c,onRegisterError:u}=r;let d,v;const k=async(s=!0)=>{await v};async function o(){if("serviceWorker"in navigator){if(d=await F(async()=>{const{Workbox:s}=await import("./vendor-other-B6zHyxvG.js").then(x=>x.w);return{Workbox:s}},[],import.meta.url).then(({Workbox:s})=>new s("./sw.js",{scope:"./",type:"classic"})).catch(s=>{u?.(s)}),!d)return;d.addEventListener("activated",s=>{(s.isUpdate||s.isExternal)&&window.location.reload()}),d.addEventListener("installed",s=>{s.isUpdate||p?.()}),d.register({immediate:i}).then(s=>{c?c("./sw.js",s):n?.(s)}).catch(s=>{u?.(s)})}}return v=o(),k}const He=a.lazy(()=>F(()=>import("./pages-bYz7hhhw.js").then(r=>r.K),__vite__mapDeps([0,1,2,3,4,5,6,7,8]),import.meta.url)),qe=a.lazy(()=>F(()=>import("./pages-bYz7hhhw.js").then(r=>r.C),__vite__mapDeps([0,1,2,3,4,5,6,7,8]),import.meta.url)),Je=a.lazy(()=>F(()=>import("./pages-bYz7hhhw.js").then(r=>r.S),__vite__mapDeps([0,1,2,3,4,5,6,7,8]),import.meta.url)),Ge=({message:r,visible:i})=>e.jsx("div",{className:`fixed bottom-16 left-1/2 -translate-x-1/2 px-4 py-2 rounded shadow z-50 text-sm text-white bg-black transition-opacity duration-500 ${i?"opacity-100":"opacity-0 pointer-events-none"}`,children:r}),Qe=()=>{a.useEffect(()=>{le({immediate:!0})},[]);const[r,i]=a.useState("calendar"),[g,p]=a.useState("light"),[n,c]=a.useState("bs"),[u,d]=a.useState(null),[v,k]=a.useState(!1),[o,s]=a.useState(!1),[x,m]=a.useState(!1),[w,j]=a.useState(null),[q,$]=a.useState(null),[J,U]=a.useState(!1),[D,ie]=a.useState(!1),[ce,A]=a.useState(()=>localStorage.getItem("pwa_installed")==="true"),[z,G]=a.useState(null),[Q,Z]=a.useState(!1),[de,ee]=a.useState(!1),N=a.useRef(null),[E,W]=a.useState("tabs"),[O,X]=a.useState("topbar");a.useEffect(()=>{const t=window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone;if(ie(!!t),t){A(!0);return}const l=()=>{localStorage.setItem("pwa_installed","true"),A(!0),U(!1)};window.addEventListener("appinstalled",l),"getInstalledRelatedApps"in navigator&&navigator.getInstalledRelatedApps().then(b=>{b.length>0&&(localStorage.getItem("pwa_installed")!=="true"&&localStorage.setItem("pwa_installed","true"),A(!0))});const h=b=>{b.preventDefault(),localStorage.removeItem("pwa_installed"),A(!1),G(b),U(!0)};return window.addEventListener("beforeinstallprompt",h),()=>{window.removeEventListener("appinstalled",l),window.removeEventListener("beforeinstallprompt",h)}},[]);const ue=async()=>{z&&(z.prompt(),await z.userChoice,G(null),U(!1))},[y]=a.useState(new Date),[S]=a.useState(()=>re(y)),[_,C]=a.useState(S.year),[I,M]=a.useState(S.monthIndex),[R,L]=a.useState(y.getFullYear()),[T,P]=a.useState(y.getMonth());a.useEffect(()=>{const l=localStorage.getItem("theme")||"light";p(l),document.documentElement.classList.toggle("dark",l==="dark");const h=localStorage.getItem("menuStyle");W(h||"tabs");const b=localStorage.getItem("desktopLayoutStyle");X(b||"topbar")},[]);const V=()=>{const t=g==="light"?"dark":"light";p(t),localStorage.setItem("theme",t),document.documentElement.classList.toggle("dark",t==="dark")},he=t=>{W(t),localStorage.setItem("menuStyle",t)},me=t=>{X(t),localStorage.setItem("desktopLayoutStyle",t)},fe=()=>{localStorage.removeItem("theme"),localStorage.removeItem("menuStyle"),localStorage.removeItem("desktopLayoutStyle"),p("light"),document.documentElement.classList.toggle("dark",!1),W("tabs"),X("topbar")},ge=t=>{if(t===n)return;const l=R===y.getFullYear()&&T===y.getMonth(),h=_===S.year&&I===S.monthIndex;if(t==="bs"&&l||t==="ad"&&h)B();else if(t==="bs"){const b=R??y.getFullYear(),ve=Be(b,T,12),we=Ye(ve),Y=re(we);Y.year===0||!Y.year?B():(C(Y.year),M(Y.monthIndex))}else if(_===null)B();else{const b=Fe(_,I,18);L(b.getUTCFullYear()),P(b.getUTCMonth())}c(t)},B=()=>{C(S.year),M(S.monthIndex),L(y.getFullYear()),P(y.getMonth())},pe=t=>{d(t),k(!0)},te=t=>{if(n==="bs"){const l=t==="prev"?I-1:I+1;l<0?(M(11),C(h=>(h??S.year)-1)):l>11?(M(0),C(h=>(h??S.year)+1)):M(l)}else{const l=t==="prev"?T-1:T+1;l<0?(P(11),L(h=>(h??y.getFullYear())-1)):l>11?(P(0),L(h=>(h??y.getFullYear())+1)):P(l)}},se=t=>{n==="bs"?C(l=>(l??S.year)+(t==="next"?1:-1)):L(l=>(l??y.getFullYear())+(t==="next"?1:-1))},K=n==="bs"?_:R,H=n==="bs"?I:T,xe=t=>{j(t.touches[0].clientX),$(null)},ye=t=>$(t.touches[0].clientX),be=()=>{if(!w||!q)return;const t=q-w;t>60&&w<50?s(!0):t<-60&&o&&s(!1),j(null),$(null)};return a.useEffect(()=>{const t=l=>{o&&l.key==="Backspace"&&(l.preventDefault(),s(!1))};return o&&window.addEventListener("keydown",t),()=>{window.removeEventListener("keydown",t)}},[o]),a.useEffect(()=>{if(!D)return;const t=()=>{if(v){k(!1),window.history.pushState(null,"",window.location.href);return}if(x){m(!1),window.history.pushState(null,"",window.location.href);return}if(o){s(!1),window.history.pushState(null,"",window.location.href);return}if(r!=="kundali"){if(r==="converter"||r==="settings"){i("calendar"),window.history.pushState(null,"",window.location.href);return}Q?window.history.go(-2):(Z(!0),ee(!0),navigator.vibrate&&navigator.vibrate(50),N.current&&clearTimeout(N.current),N.current=window.setTimeout(()=>{Z(!1),ee(!1),N.current=null},2e3),window.history.pushState(null,"",window.location.href))}};return window.history.pushState(null,"",window.location.href),window.addEventListener("popstate",t),()=>{window.removeEventListener("popstate",t),N.current&&clearTimeout(N.current)}},[D,Q,o,v,x,r]),e.jsxs("div",{className:`min-h-screen flex flex-col bg-slate-200 dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-colors relative ${O==="sidebar"?"lg:flex-row":""}`,onTouchStart:xe,onTouchMove:ye,onTouchEnd:be,children:[O==="topbar"&&e.jsx(Le,{activeView:r,onNavigate:t=>i(t)}),e.jsxs("header",{className:"px-4 print:hidden py-2 border-b dark:border-gray-700 bg-slate-200 dark:bg-gray-800 z-30 lg:hidden",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[E==="slide"&&e.jsx("button",{onClick:()=>s(!0),className:"p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-800","aria-label":"Open menu",children:e.jsx(ae,{className:"w-5 h-5"})}),e.jsx("h1",{className:"text-lg sm:text-xl font-semibold text-gray-900 dark:text-gray-100",children:f.Nepdate_calendar})]})}),r==="calendar"&&e.jsx("div",{className:"flex justify-center sm:justify-end",children:e.jsx(Te,{activeSystem:n,bsYear:_,bsMonth:I,adYear:R,adMonth:T,onSystemChange:ge,onTodayClick:B,theme:g,onThemeToggle:V})})]}),o&&e.jsx("div",{className:"fixed inset-0 bg-black/40 z-40 lg:hidden",onClick:()=>s(!1)}),e.jsx("aside",{className:`fixed top-0 left-0 z-50 w-64 h-full bg-slate-200 dark:bg-gray-800 shadow-xl transform transition-transform duration-300 ease-in-out
        ${o?"translate-x-0":"-translate-x-full"}
        ${E==="tabs"?"hidden lg:block":"block"} 
        ${O==="sidebar"?"lg:sticky lg:h-screen lg:translate-x-0 lg:shadow-md":"lg:hidden"}
        `,"inert-hidden":!o,children:e.jsxs("div",{className:"flex flex-col h-full p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100",children:[e.jsx("span",{className:"hidden lg:inline",children:f.Nepdate_calendar}),e.jsx("span",{className:"lg:hidden",children:"Menu"})]}),e.jsx("button",{onClick:()=>s(!1),className:"p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-800 lg:hidden","aria-label":"Close menu",children:e.jsx(Se,{className:"w-5 h-5"})})]}),e.jsxs("nav",{className:"flex flex-col space-y-3 text-gray-800 dark:text-gray-200",children:[e.jsxs("button",{onClick:()=>{i("calendar"),s(!1)},className:"px-3 py-2 text-left rounded hover:bg-gray-200 dark:hover:bg-gray-800 flex items-center gap-2",children:[e.jsx(ke,{className:"w-4 h-4"})," ",f.home]}),e.jsxs("button",{onClick:()=>{i("converter"),s(!1)},className:"px-3 py-2 text-left rounded hover:bg-gray-200 dark:hover:bg-gray-800 flex items-center gap-2",children:[e.jsx(je,{className:"w-4 h-4"})," ",f.converter]}),e.jsxs("button",{onClick:()=>{i("kundali"),s(!1)},className:"px-3 py-2 text-left rounded hover:bg-gray-200 dark:hover:bg-gray-800 flex items-center gap-2",children:[e.jsxs("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("path",{d:"M12 2v20M2 12h20"})]})," ",f.kundali]}),e.jsxs("button",{onClick:()=>{i("settings"),s(!1)},className:"px-3 py-2 text-left rounded hover:bg-gray-200 dark:hover:bg-gray-800 flex items-center gap-2",children:[e.jsx(Ne,{className:"w-4 h-4"})," ",f.settings]}),e.jsxs("a",{href:"https://github.com/khumnath/nepdate/tree/page",target:"_blank",rel:"noopener noreferrer",onClick:()=>s(!1),className:"px-3 py-2 text-left rounded hover:bg-gray-200 dark:hover:bg-gray-800 flex items-center gap-2",children:[e.jsx(ae,{className:"w-4 h-4"}),"  ",f.sourceCode]}),e.jsxs("button",{onClick:()=>{m(!0),s(!1)},className:"px-3 py-2 text-left rounded hover:bg-gray-200 dark:hover:bg-gray-800 flex items-center gap-2",children:[e.jsx(ne,{className:"w-4 h-4"})," ",f.about]}),!D&&J&&e.jsxs("button",{onClick:()=>{ue(),s(!1)},className:"px-3 py-2 text-left rounded bg-blue-600 text-white hover:bg-blue-700 flex items-center gap-2",children:[e.jsx(Ee,{className:"w-4 h-4"})," ",f.installApp]}),!D&&ce&&!J&&e.jsxs("a",{href:"web+nepdate://open",onClick:()=>s(!1),className:"px-3 py-2 text-left rounded bg-green-600 text-white hover:bg-green-700 flex items-center gap-2",children:[e.jsx(ne,{className:"w-4 h-4"})," ",f.openApp]}),e.jsxs("button",{onClick:()=>{V(),s(!1)},className:"px-3 py-2 text-left rounded hover:bg-gray-200 dark:hover:bg-gray-800 flex items-center gap-2",children:[g==="light"?e.jsx(Ce,{className:"w-4 h-4"}):e.jsx(Ie,{className:"w-4 h-4"}),e.jsx("span",{children:g==="light"?f.darkMode:f.lightMode})]})]}),e.jsxs("div",{className:"mt-auto text-xs text-gray-500 dark:text-gray-400 border-t border-gray-200 dark:border-gray-700 pt-4",children:["© ",new Date().getFullYear()," ",f.project]})]})}),x&&e.jsx($e,{setIsAboutOpen:m}),e.jsx("div",{className:"flex-1 overflow-hidden",children:e.jsx("div",{className:`h-full overflow-auto px-2 sm:px-4 md:px-6 max-w-7xl mx-auto w-full ${E==="tabs"?"pb-24 lg:pb-6":"pb-20 lg:pb-6"}`,children:r==="kundali"?e.jsx(a.Suspense,{fallback:e.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}),children:e.jsx(He,{onBack:()=>i("calendar")})}):r==="calendar"?e.jsxs("main",{className:"flex flex-col min-h-[60vh]",children:[e.jsx("section",{className:"py-2 sm:py-3",children:e.jsx(Pe,{activeSystem:n,currentYear:K,currentMonth:H,onYearChange:t=>n==="bs"?C(t):L(t),onMonthChange:t=>n==="bs"?M(t):P(t),onPrevMonth:()=>te("prev"),onNextMonth:()=>te("next"),onPrevYear:()=>se("prev"),onNextYear:()=>se("next")})}),e.jsxs("section",{className:"flex-1 overflow-auto p-2 sm:p-3 md:p-4",children:[e.jsx(_e,{activeSystem:n,currentYear:K,currentMonth:H,onDayClick:pe}),e.jsx("section",{className:"events mt-3 sm:mt-4",children:e.jsx(De,{activeSystem:n,currentYear:K,currentMonth:H})})]})]}):r==="converter"?e.jsx(a.Suspense,{fallback:e.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}),children:e.jsx(qe,{onBack:()=>i("calendar")})}):r==="settings"?e.jsx(a.Suspense,{fallback:e.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}),children:e.jsx(Je,{onBack:()=>i("calendar"),currentTheme:g,onThemeChange:V,currentMenuStyle:E,onMenuStyleChange:he,currentDesktopLayoutStyle:O,onDesktopLayoutStyleChange:me,onResetSettings:fe})}):null})}),E==="slide"&&e.jsx("div",{className:"fixed bottom-0 left-0 right-0 w-full bg-slate-200 dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 z-50 print:hidden lg:hidden",children:e.jsx(Ae,{})}),E==="tabs"&&e.jsx(Oe,{activeView:r,onNavigate:t=>{t==="about"?m(!0):i(t)}}),e.jsx(Re,{date:u,isOpen:v,onClose:()=>k(!1)}),e.jsx(Ge,{message:n==="bs"?"बन्द गर्नको लागि फेरि थिच्नुहोस्":"Press back again to exit",visible:de})]})};Ue.Icon.Default.mergeOptions({iconUrl:Xe,shadowUrl:We,iconRetinaUrl:ze});le({onNeedRefresh(){confirm("A new version is available. Reload to update?")&&window.location.reload()},onOfflineReady(){console.log("App ready to work offline")}});Me.createRoot(document.getElementById("root")).render(e.jsx(a.StrictMode,{children:e.jsx(Qe,{})}));
