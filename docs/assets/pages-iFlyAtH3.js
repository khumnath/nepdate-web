import{j as S,r as R}from"./vendor-react-CMh7LEwM.js";import{X as St,G as Nt,U as bt,b as yt}from"./data-CMNPzb4Y.js";import{K as kt,C as At,a as Dt,b as It}from"./kundali-J7qE4FIY.js";import{V as tt,m as F,Y as wt,h as H,n as st,a as vt,o as W,p as Lt,q as Pt,r as Ot,s as Ut,u as Rt,R as et,T as _t,v as Tt,w as Et,x as jt,y as Ct,e as $,z as Yt,A as Kt,B as ot,C as Jt,D as Ht,N as _,E as Vt}from"./bikram-BtM4GS44.js";const zt="2.0.0",xe=({setIsAboutOpen:e})=>S.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4",children:S.jsxs("div",{className:"bg-slate-200 dark:bg-gray-800 rounded-2xl shadow-xl p-6 max-w-sm w-full text-center relative border border-gray-200 dark:border-gray-700",children:[S.jsx("button",{onClick:()=>e(!1),className:"absolute top-3 right-3 p-1.5 rounded-full text-gray-500 hover:text-gray-800 dark:hover:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors","aria-label":"Close",children:S.jsx(St,{className:"w-5 h-5"})}),S.jsx("h2",{className:"text-xl font-bold mb-2 text-gray-900 dark:text-gray-100",children:"About Bikram Calendar"}),S.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:"A modern Nepali Bikram Sambat and Gregorian calendar app built using React and PWA technology."}),S.jsx("span",{children:"App Version: "}),S.jsx("span",{className:"font-mono",children:zt}),S.jsxs("div",{className:"space-y-3 my-6",children:[S.jsxs("a",{href:"https://github.com/khumnath/nepdate/tree/page",target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-3 w-full bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 font-semibold py-2.5 px-4 rounded-lg transition-colors",children:[S.jsx(Nt,{className:"w-5 h-5"}),S.jsx("span",{children:"Source Code"})]}),S.jsxs("a",{href:"https://github.com/khumnath/nepdate/graphs/contributors",target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-3 w-full bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 font-semibold py-2.5 px-4 rounded-lg transition-colors",children:[S.jsx(bt,{className:"w-5 h-5"}),S.jsx("span",{children:"Contributors"})]}),S.jsxs("a",{href:"https://github.com/khumnath/nepdate/issues/new",target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-3 w-full bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 font-semibold py-2.5 px-4 rounded-lg transition-colors",children:[S.jsx(yt,{className:"w-5 h-5"}),S.jsx("span",{children:"Suggestions and issues"})]})]}),S.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[S.jsxs("p",{className:"mt-1",children:["© 2024–",new Date().getFullYear()," khumnath cg"]}),S.jsx("p",{className:"mt-1",children:"All rights reserved."})]})]})}),b=Math.PI/180,X=180/Math.PI;function s(e,n,t,a,p){return{mlcor:e,mscor:n,fcor:t,dcor:a,lcor:p}}function D(e,n,t,a,p){return{l:e,ml:n,ms:t,f:a,d:p}}const O=[s(0,0,0,4,13.902),s(0,0,0,2,2369.912),s(1,0,0,4,1.979),s(1,0,0,2,191.953),s(1,0,0,0,22639.5),s(1,0,0,-2,-4586.465),s(1,0,0,-4,-38.428),s(1,0,0,-6,-.393),s(0,1,0,4,-.289),s(0,1,0,2,-24.42),s(0,1,0,0,-668.146),s(0,1,0,-2,-165.145),s(0,1,0,-4,-1.877),s(0,0,0,3,.403),s(0,0,0,1,-125.154),s(2,0,0,4,.213),s(2,0,0,2,14.387),s(2,0,0,0,769.016),s(2,0,0,-2,-211.656),s(2,0,0,-4,-30.773),s(2,0,0,-6,-.57),s(1,1,0,2,-2.921),s(1,1,0,0,-109.673),s(1,1,0,-2,-205.962),s(1,1,0,-4,-4.391),s(1,-1,0,4,.283),s(1,-1,0,2,14.577),s(1,-1,0,0,147.687),s(1,-1,0,-2,28.475),s(1,-1,0,-4,.636),s(0,2,0,2,-.189),s(0,2,0,0,-7.486),s(0,2,0,-2,-8.096),s(0,0,2,2,-5.741),s(0,0,2,0,-411.608),s(0,0,2,-2,-55.173),s(0,0,2,-4,.025),s(1,0,0,1,-8.466),s(1,0,0,-1,18.609),s(1,0,0,-3,3.215),s(0,1,0,1,18.023),s(0,1,0,-1,.56),s(3,0,0,2,1.06),s(3,0,0,0,36.124),s(3,0,0,-2,-13.193),s(3,0,0,-4,-1.187),s(3,0,0,-6,-.293),s(2,1,0,2,-.29),s(2,1,0,0,-7.649),s(2,1,0,-2,-8.627),s(2,1,0,-4,-2.74),s(2,-1,0,2,1.181),s(2,-1,0,0,9.703),s(2,-1,0,-2,-2.494),s(2,-1,0,-4,.36),s(1,2,0,0,-1.167),s(1,2,0,-2,-7.412),s(1,2,0,-4,-.311),s(1,-2,0,2,.757),s(1,-2,0,0,2.58),s(1,-2,0,-2,2.533),s(0,3,0,-2,-.344),s(1,0,2,2,-.992),s(1,0,2,0,-45.099),s(1,0,2,-2,-.179),s(1,0,-2,2,-6.382),s(1,0,-2,0,39.528),s(1,0,-2,-2,9.366),s(0,1,2,0,.415),s(0,1,2,-2,-2.152),s(0,1,-2,2,-1.44),s(0,1,-2,-2,.384),s(2,0,0,1,-.586),s(2,0,0,-1,1.75),s(2,0,0,-3,1.225),s(1,1,0,1,1.267),s(1,-1,0,-1,-1.089),s(0,0,2,-1,.584),s(4,0,0,0,1.938),s(4,0,0,-2,-.952),s(3,1,0,0,-.551),s(3,1,0,-2,-.482),s(3,-1,0,0,.681),s(2,0,2,0,-3.996),s(2,0,2,-2,.557),s(2,0,-2,2,-.459),s(2,0,-2,0,-1.298),s(2,0,-2,-2,.538),s(1,1,-2,-2,.426),s(1,-1,2,0,-.304),s(1,-1,-2,2,-.372),s(0,0,4,0,.418),s(2,-1,0,-1,-.352)],J=[D(.127,0,0,0,6),D(-.151,0,2,0,-4),D(-.085,0,0,2,4),D(.15,0,1,0,3),D(-.091,2,1,0,-6),D(-.103,0,3,0,0),D(-.301,1,0,2,-4),D(.202,1,0,-2,-4),D(.137,1,1,0,-1),D(.233,1,1,0,-3),D(-.122,1,-1,0,1),D(-.276,1,-1,0,-3),D(.255,0,0,2,1),D(.254,0,0,2,-3),D(-.1,3,1,0,-4),D(-.183,3,-1,0,-2),D(-.297,2,2,0,-2),D(-.161,2,2,0,-4),D(.197,2,-2,0,0),D(.254,2,-2,0,-2),D(-.25,1,3,0,-2),D(-.123,2,0,2,2),D(.173,2,0,-2,-4),D(.263,1,1,2,0),D(.13,3,0,0,-1),D(.113,5,0,0,0),D(.092,3,0,2,-2)];function y(e){return e=e-Math.floor(e/360)*360,e<0?e+360:e}function ht(e,n){let t=e;for(let a=0;a<7;a++)t=e+n*Math.sin(t);return t}function ft(e){const n=(e-2415020)/36525,t=n*n,a=(279.6967+36000.7689*n+303e-6*t)*b,p=(270.4341639+481267.8831417*n-.0011333333*t)*b,u=(358.4758333+35999.04975*n-15e-5*t)*b,r=(296.1046083+477198.8491083*n+.0091916667*t)*b,h=(259.183275-1934.1420083*n+.0020777778*t)*b;return((-17.2327-.01737*n)*Math.sin(h)+.2088*Math.sin(2*h)-1.2729*Math.sin(2*a)+.1261*Math.sin(u)-.2037*Math.sin(2*p)+.0675*Math.sin(r)-.0497*Math.sin(2*a+u)+.0214*Math.sin(2*a-u)+.0261*Math.sin(2*p+r))/3600}function U(e){const n=(e-2451545)/36525;return 24.144206-.013972*n-9e-6*n*n}function B(e){let n=e+.5,t=Math.floor(n),a=n-t,p=t;if(t>=2299161){const m=Math.floor((t-186721625e-2)/36524.25);p=t+1+m-Math.floor(m/4)}const u=p+1524,r=Math.floor((u-122.1)/365.25),h=Math.floor(365.25*r),M=Math.floor((u-h)/30.6001),l=u-h-Math.floor(30.6001*M)+a,o=Math.floor(l),f=M<13.5?M-1:M-13,N=f>2.5?r-4716:r-4715,i=(l-o)*24,g=Math.floor(i),c=(i-g)*3600,x=Math.floor(c/60),d=Math.floor(c%60);return new Date(Date.UTC(N,f-1,o,g,x,d))}function G(e){const n=[124,85,62,48,37,26,16,10,9,10,11,11,12,13,15,16,17,17,13.7,12.5,12,7.5,5.7,7.1,7.9,1.6,-5.4,-5.9,-2.7,10.5,21.2,24,24.3,29.2,33.2,40.2,50.5,56.9,63.8,67,69.4,71],t=B(e),a=t.getUTCFullYear()+t.getUTCMonth()/12+(t.getUTCDate()-1)/365.25,p=(e-2378497)/36525;let u;if(a>=1620&&a<2030){const r=Math.floor((a-1620)/10),h=a-(1620+r*10);u=n[r]+(n[r+1]-n[r])*h/10}else a>=2030?u=71+.5*(a-2030):a>=948?u=25.5*p*p:u=1361.7+320*p+44.3*p*p;return u/3600}function L(e){const n=e-2415020,t=n/36525;let a=270.4337361+13.1763965445281*n-5.86*t*t/3600+.0068*t*t*t/3600,p=350.7374861110581+445267.1142166667*t-t*t*.001436111132303874+18888889e-13*t*t*t;const u=334.329556+1464852252e-2*t/3600-37.17*t*t/3600-.045*t*t*t/3600;let r=358.4758333333334+35999.04974999958*t-t*t*.0001500000059604645-t*t*t*33333333623078e-19,h=y(a-u);const M=259.183275-696291123e-2*t/3600+7.48*t*t/3600+.008*t*t*t/3600;let l=y(a-M),o=b*h,f=b*r,N=b*l,i=b*p,g=0,c=0;const x=1-6832e-11*n,d=1,m=d*d;for(let A=0;A<O.length;A++){const w=O[A].mlcor*o+O[A].mscor*f+O[A].fcor*N+O[A].dcor*i;let v=Math.sin(w);O[A].mscor!=0&&(v*=x,(O[A].mscor==2||O[A].mscor==-2)&&(v*=x)),O[A].fcor!=0&&(v*=m),g+=O[A].lcor*v}for(let A=0;A<J.length;A++){const w=J[A].ml*o+J[A].ms*f+J[A].f*N+J[A].d*i;c+=J[A].l*Math.sin(w)}const k=360*b;let I=.822*Math.sin(k*(.3248-.0017125594*n))+.307*Math.sin(k*(.14905-.0034251187*n))+.348*Math.sin(k*(.68266-.0006873156*n))+.662*Math.sin(k*(.65162+.0365724168*n))+.643*Math.sin(k*(.88098-.0025069941*n))+1.137*Math.sin(k*(.85823+.036448727*n))+.436*Math.sin(k*(.71892+.036217918*n))+.327*Math.sin(k*(.97639+173491e-9*n));return a=a+ft(e)+(g+c+I)/3600,y(a)}function T(e){const n=e-2415020,t=n/36525,a=279.696678+.9856473354*n+1.089*t*t/3600,p=281.220833+1.7192*t+45e-5*t*t,u=y(a-p),r=.01675104-418e-7*t-126e-9*t*t,h=ht(u*b,r),M=2*X*Math.atan(Math.sqrt((1+r)/(1-r))*Math.tan(h/2));let l=a+M-u;const o=(153.23+22518.7541*t)*b,f=(216.57+45037.5082*t)*b,N=(312.69+32964.3577*t)*b,i=(350.74+445267.1142*t-.00144*t*t)*b;let g=.00134*Math.cos(o)+.00154*Math.cos(f)+.002*Math.cos(N)+.00179*Math.sin(i)+.00178*Math.sin((5.4-1.5*t)*b);const c=1.0000002*(1-r*r)/(1+r*Math.cos(M*b)),x=20.4898/3600/c;let d=l+g+ft(e)-x;return y(d)}const Ft=2451545,Bt={MERCURY:{N:[48.3313,324587e-10],i:[7.0047,5e-8],w:[29.1241,420258e-10],a:[.387098,0],e:[.205635,559e-12],M:[168.6562,4.0923344368]},VENUS:{N:[76.6799,24659e-9],i:[3.3946,275e-10],w:[54.891,138374e-10],a:[.72333,0],e:[.006773,-132e-11],M:[48.0052,1.6021302244]},EARTH:{N:[0,0],i:[0,0],w:[102.9376,713e-7],a:[1,0],e:[.016709,-1151e-12],M:[356.047,.985609102]},MARS:{N:[49.5574,211081e-10],i:[1.8497,-178e-10],w:[286.5016,292961e-10],a:[1.523688,0],e:[.093405,2516e-12],M:[18.6021,.5240207766]},JUPITER:{N:[100.4542,276854e-10],i:[1.303,-1557e-10],w:[273.8777,164505e-10],a:[5.20256,0],e:[.048498,1611e-12],M:[19.895,.0830853001]},SATURN:{N:[113.6634,23898e-9],i:[2.4886,-1081e-10],w:[339.3939,297661e-10],a:[9.55475,0],e:[.055546,-9499e-12],M:[316.967,.0334442282]}};function Gt(e,n,t){if(n==="SUN"){const i=T(e),g=y(i-t),c=T(e-.1),x=y(c-t);let d=g-x;d<-180&&(d+=360),d>180&&(d-=360);const m=d/.1;return{planet:n,eclipticLongitude:g,rashi:Math.floor(g/30)+1,degreesInSign:g%30,retrograde:m<0,eclipticLatitude:0,speedLon:m}}if(n==="MOON"){const i=L(e),g=y(i-t),c=L(e-.1),x=y(c-t);let d=g-x;d<-180&&(d+=360),d>180&&(d-=360);const m=d/.1;return{planet:n,eclipticLongitude:g,rashi:Math.floor(g/30)+1,degreesInSign:g%30,retrograde:!1,eclipticLatitude:0,speedLon:m}}if(n==="RAHU"||n==="KETU"){const i=(e-2451545)/36525,g=y(125.04452-1934.136261*i),c=y(218.3164477+481267.88123421*i),x=y(280.46646+36000.76983*i),d=y(c-x),m=y(c-g);let k=-1.274*Math.sin((g-2*d)*b)-.227*Math.sin(2*m*b);const I=y(g+k),A=y(I-t),w=n==="RAHU"?A:y(A+180);return{planet:n,eclipticLongitude:w,rashi:Math.floor(w/30)+1,degreesInSign:w%30,retrograde:!0,eclipticLatitude:0,speedLon:-.0529}}const a=e-Ft,p=(i,g)=>{const c=Bt[g],x=y(c.N[0]+c.N[1]*i),d=c.i[0]+c.i[1]*i,m=y(c.w[0]+c.w[1]*i),k=c.a[0],I=c.e[0]+c.e[1]*i;let A=y(c.M[0]+c.M[1]*i);const w=ht(A*b,I),v=k*(Math.cos(w)-I),P=k*Math.sqrt(1-I*I)*Math.sin(w),V=(Math.cos(m*b)*Math.cos(x*b)-Math.sin(m*b)*Math.sin(x*b)*Math.cos(d*b))*v+(-Math.sin(m*b)*Math.cos(x*b)-Math.cos(m*b)*Math.sin(x*b)*Math.cos(d*b))*P,j=(Math.cos(m*b)*Math.sin(x*b)+Math.sin(m*b)*Math.cos(x*b)*Math.cos(d*b))*v+(-Math.sin(m*b)*Math.sin(x*b)+Math.cos(m*b)*Math.cos(x*b)*Math.cos(d*b))*P,C=Math.sin(m*b)*Math.sin(d*b)*v+Math.cos(m*b)*Math.sin(d*b)*P;return{x:V,y:j,z:C}},u=(i,g)=>{const c=p(i,g),x=p(i,"EARTH"),d=c.x-x.x,m=c.y-x.y,k=c.z-x.z,I=y(Math.atan2(m,d)*X),A=Math.sqrt(d*d+m*m),w=Math.atan2(k,A)*X;return{longitude:I,latitude:w}},{longitude:r,latitude:h}=u(a,n),{longitude:M}=u(a-.1,n),l=y(r-t),o=y(M-t);let f=l-o;f<-180&&(f+=360),f>180&&(f-=360);const N=f/.1;return{planet:n,eclipticLongitude:l,rashi:Math.floor(l/30)+1,degreesInSign:l%30,retrograde:N<0,eclipticLatitude:h,speedLon:N}}function rt(e,n,t){let a={};const p=t?6:12,u=t?60:30,r=U(e),h=y(T(e)-r),M=y(L(e)-r),l=y(M-h),o=Math.floor(l/p);for(let f=0;f<2;f++){const i=(o+f+u)%u*p;let g=e,c,x,d;for(let k=0;k<5;k++){const I=U(g),A=T(g),w=L(g),v=A,P=w;if(c=y(v-I),x=y(P-I),d=y(c+i)-x,d>180&&(d-=360),d<-180&&(d+=360),Math.abs(d)<1e-4)break;const j=(T(g+.001)-v)*1e3,Q=(L(g+.001)-P)*1e3-j;g+=d/Q}const m=B(g+(n-G(g))/24);f===0?a.start=m:a.end=m}return{start:a.start.toISOString(),end:a.end.toISOString()}}function Wt(e,n){let t={};const a=13.333333333333334,p=U(e),u=Math.floor(y(L(e)-p)/a);for(let r=0;r<2;r++){const M=(u+r+27)%27*a;let l=e,o,f;for(let i=0;i<5;i++){const g=U(l),x=L(l);if(o=y(x-g),f=M-o,f>180&&(f-=360),f<-180&&(f+=360),Math.abs(f)<1e-4)break;const d=(L(l+.001)-x)*1e3;l+=f/d}const N=B(l+(n-G(l))/24);r===0?t.start=N:t.end=N}return{start:t.start.toISOString(),end:t.end.toISOString()}}function $t(e,n){const t=13.333333333333334,a=t/4,p=U(e),u=y(L(e)-p),r=Math.floor(u/t),h=u%t,M=Math.floor(h/a);let l={};for(let o=0;o<2;o++){const N=(r*4+M+o)*a;let i=e,g,c;for(let d=0;d<5;d++){const m=U(i),I=L(i);if(g=y(I-m),c=N-g,c>180&&(c-=360),c<-180&&(c+=360),Math.abs(c)<1e-4)break;const A=(L(i+.001)-I)*1e3;i+=c/A}const x=B(i+(n-G(i))/24);o===0?l.start=x:l.end=x}return{start:l.start.toISOString(),end:l.end.toISOString()}}function Xt(e,n){let t={};const a=13.333333333333334,p=U(e),u=y(T(e)-p),r=y(L(e)-p),h=Math.floor(y(u+r)/a);for(let M=0;M<2;M++){const o=(h+M+27)%27*a;let f=e,N,i,g,c;for(let d=0;d<5;d++){const m=U(f),k=T(f),I=L(f),A=k,w=I;if(N=y(A-m),i=y(w-m),g=y(N+i),c=o-g,c>180&&(c-=360),c<-180&&(c+=360),Math.abs(c)<1e-4)break;const v=(T(f+.001)-A)*1e3,P=(L(f+.001)-w)*1e3;f+=c/(P+v)}const x=B(f+(n-G(f))/24);M===0?t.start=x:t.end=x}return{start:t.start.toISOString(),end:t.end.toISOString()}}function Qt(e,n,t){const a=(e-2451545)/36525,p=280.46061837+360.98564736629*(e-2451545)+387933e-9*a*a-a*a*a/3871e4,u=y(p+t),r=23.439291-.0130042*a,h=X*Math.atan2(Math.cos(u*b),-(Math.sin(u*b)*Math.cos(r*b)+Math.tan(n*b)*Math.sin(r*b)));return y(h)}function Zt(e){return Array.from({length:12},(n,t)=>({houseNumber:t+1,cuspLongitude:y(e+t*30),sign:Math.floor(y(e+t*30)/30)+1}))}function qt(e){const n=13.333333333333334,t=Math.floor(e/n),a=e%n/n,p=["KETU","VENUS","SUN","MOON","MARS","RAHU","JUPITER","SATURN","MERCURY"],u=[7,20,6,10,7,18,16,19,17],r=t%9,h=p[r],M=(1-a)*u[r];return{lord:h,balance:M}}function it(e,n){const t=["KETU","VENUS","SUN","MOON","MARS","RAHU","JUPITER","SATURN","MERCURY"],a=[7,20,6,10,7,18,16,19,17],p=a.reduce((l,o)=>l+o),u=t.indexOf(e),r=a[u];let h=new Date(n);const M=[];for(let l=0;l<9;l++){const o=(u+l)%9,f=t[o],N=a[o]*r/p,i=new Date(h);i.setDate(i.getDate()+N*365.25),M.push({planet:f,start:h.toISOString(),end:i.toISOString()}),h=i}return M}function gt(e,n){const{lord:t,balance:a}=qt(e),p=["KETU","VENUS","SUN","MOON","MARS","RAHU","JUPITER","SATURN","MERCURY"],u=[7,20,6,10,7,18,16,19,17],r=[];let h=new Date(n);const M=new Date(h);M.setDate(M.getDate()+a*365.25),r.push({planet:t,start:h.toISOString(),end:M.toISOString(),subDashas:it(t,h)}),h=M;let l=(p.indexOf(t)+1)%9;for(let o=0;o<15;o++){const f=p[l],N=u[l],i=new Date(h);i.setDate(i.getDate()+N*365.25),r.push({planet:f,start:h.toISOString(),end:i.toISOString(),subDashas:it(f,h)}),h=i,l=(l+1)%9}return r}function te(e,n){return gt(e,n).map(a=>({...a,start:a.start,end:new Date(new Date(a.start).getTime()+(new Date(a.end).getTime()-new Date(a.start).getTime())/3).toISOString()}))}function ct(e,n,t){const a=["SUN","MOON","MARS","MERCURY","SATURN","JUPITER","RAHU","VENUS"],p=[6,15,8,17,10,19,12,21],u=108,r=a.indexOf(e);if(r===-1)return[];let h=new Date(n);const M=[];for(let l=0;l<8;l++){const o=(r+l)%8,f=a[o],N=p[o]*t/u,i=new Date(h);i.setDate(i.getDate()+N*365.25),M.push({planet:f,start:h.toISOString(),end:i.toISOString()}),h=i}return M}function ee(e,n,t){const a=Math.floor(e/13.333333333333334),p=["SUN","MOON","MARS","MERCURY","SATURN","JUPITER","RAHU","VENUS"],u=[6,15,8,17,10,19,12,21],r=t==="कृष्ण पक्ष",M=(()=>{if(r){if(a===5)return"SATURN";if(a===6)return"JUPITER";if(a===11)return"RAHU";if(a===15)return"VENUS"}return a>=2&&a<=5?"SUN":a>=6&&a<=8?"MOON":a>=9&&a<=11?"MARS":a>=12&&a<=14?"MERCURY":a>=15&&a<=17?"SATURN":a>=18&&a<=20?"JUPITER":a>=21&&a<=23?"RAHU":"VENUS"})(),l=p.indexOf(M);if(l===-1)return[];const o=360/27,N=(1-e%o/o)*u[l],i=[];let g=new Date(n);const c=new Date(g);c.setDate(c.getDate()+N*365.25),i.push({planet:M,start:g.toISOString(),end:c.toISOString(),subDashas:ct(M,g,u[l])}),g=c;let x=(l+1)%8;for(let d=0;d<10;d++){const m=p[x],k=u[x],I=new Date(g);I.setDate(I.getDate()+k*365.25),i.push({planet:m,start:g.toISOString(),end:I.toISOString(),subDashas:ct(m,g,k)}),g=I,x=(x+1)%8}return i}function lt(e,n,t){const a=["Mangala","Pingala","Dhanya","Bhramari","Bhadrika","Ulka","Siddha","Sankata"],p=[1,2,3,4,5,6,7,8],u=36,r=a.indexOf(e);if(r===-1)return[];let h=new Date(n);const M=[];for(let l=0;l<8;l++){const o=(r+l)%8,f=a[o],N=p[o]*t/u,i=new Date(h);i.setDate(i.getDate()+N*365.25),M.push({planet:f,start:h.toISOString(),end:i.toISOString()}),h=i}return M}function ae(e,n){const t=13.333333333333334,a=Math.floor(e/t),p=["Mangala","Pingala","Dhanya","Bhramari","Bhadrika","Ulka","Siddha","Sankata"],u=[1,2,3,4,5,6,7,8],r=(a+3)%8,h=p[r],M=(1-e%t/t)*u[r],l=[];let o=new Date(n);const f=new Date(o);f.setDate(f.getDate()+M*365.25),l.push({planet:h,start:o.toISOString(),end:f.toISOString(),subDashas:lt(h,o,u[r])}),o=f;let N=(r+1)%8;for(let i=0;i<10;i++){const g=p[N],c=u[N],x=new Date(o);x.setDate(x.getDate()+c*365.25),l.push({planet:g,start:o.toISOString(),end:x.toISOString(),subDashas:lt(g,o,c)}),o=x,N=(N+1)%8}return l}const ne={SUN:1,MOON:2,MARS:10,MERCURY:6,JUPITER:4,VENUS:12,SATURN:7},se={SUN:7,MOON:8,MARS:4,MERCURY:12,JUPITER:10,VENUS:6,SATURN:1};function oe(e,n,t){const a=t/12,p=[0,3,6,9],u=[1,4,7,10];let r;p.includes(e)?r=e:u.includes(e)?r=(e+6)%12:r=(e+4)%12;let h=new Date(n);const M=[];for(let l=0;l<12;l++){const o=(r+l)%12,f=new Date(h);f.setDate(f.getDate()+a*365.25),M.push({planet:$[o],start:h.toISOString(),end:f.toISOString()}),h=f}return M}function re(e,n,t){const a=Math.floor(n/30),p=(a+1)%2!==0;let u=[];if(p)for(let o=0;o<12;o++)u.push((a+o)%12);else for(let o=0;o<12;o++)u.push((a-o+12)%12);let r=new Date(t);const h=[],M=new Map;e.forEach(o=>{M.set(o.planet,o.rashi-1)});const l=[0,1,2,6,7,8];for(const o of u){const f=o+1,N=et[f],i=M.get(N);if(i===void 0){h.push({planet:$[o],start:"N/A",end:"N/A"});continue}let g;l.includes(o)?g=(i-o+12)%12:g=(o-i+12)%12;let c=g;g===0&&(c=12);const x=i+1;ne[N]===x&&(c+=1),se[N]===x&&(c-=1),c>12&&(c=12),c<1&&(c=1);const d=new Date(r),m=new Date(d);if(m.setFullYear(d.getFullYear()+c),isNaN(m.getTime())){h.push({planet:$[o],start:d.toISOString(),end:"N/A"});continue}h.push({planet:$[o],start:d.toISOString(),end:m.toISOString(),subDashas:oe(o,d,c)}),r=m}return h}function ie(e,n,t){const a=r=>{const h=Math.floor(r/30),M=r%30,l=30/e,o=Math.floor(M/l);let f,N=r*e%30;switch(e){case 3:f=(h+[0,4,8][o])%12;break;case 4:f=(h+o*3)%12;break;case 9:const g=Math.floor(h/4);f=([0,4,8][g]+o)%12;break;case 10:f=((h%2===0?h:(h+8)%12)+o)%12;break;case 12:f=(h+o)%12;break;case 60:const m=r*e;f=Math.floor(m/30)%12;break;default:const k=r*e;f=Math.floor(k/30)%12,N=k%30;break}return{sign:f+1,degreesInSign:N}},p=n.map(r=>{const{sign:h,degreesInSign:M}=a(r.eclipticLongitude);return{planet:r.planet,sign:h,degreesInSign:M,retrograde:r.retrograde,nakshatra:r.nakshatra,nakshatraPada:r.nakshatraPada}}),u=a(t);return{name:`D${e}`,planets:p,ascendant:{...u,nakshatra:"",nakshatraPada:0}}}function ce(e,n,t){return{varna:Rt[Ct[e]],vasya:Ut[tt[e]],yoni:F[jt[n]],gana:Ot[Et[n]],nadi:Pt[Tt[n]],tatva:Lt[_t[e]],paya:(e-1)%4===0?W.Suvarna:(e-2)%4===0?W.Rajat:(e-3)%4===0?W.Tamra:W.Loha,rashiLord:H[et[e]],lagnesh:H[et[t]]}}function le(e,n){const t={varna:0,vasya:0,tara:0,yoni:0,grahaMaitri:0,gana:0,bhakoot:0,nadi:0,total:0},a={ब्राह्मण:4,क्षत्रिय:3,वैश्य:2,शूद्र:1};t.varna=a[e.ashtaKoota.varna]>=a[n.ashtaKoota.varna]?1:0;const p=tt[e.planets.find(m=>m.planet==="MOON").rashi],u=tt[n.planets.find(m=>m.planet==="MOON").rashi];p===u?t.vasya=1:p==="Vanachara"&&u==="Chatushpada"||p==="Dwipada"&&u!=="Jalachara"?t.vasya=2:p==="Jalachara"&&u==="Dwipada"?t.vasya=0:t.vasya=.5;const r=(n.nakshatra.index-e.nakshatra.index+27)%9;t.tara=[0,2,4,6,8].includes(r)?3:1.5;const h=Object.keys(F).find(m=>F[m]===e.ashtaKoota.yoni),M=Object.keys(F).find(m=>F[m]===n.ashtaKoota.yoni);h&&M&&(t.yoni=wt[h][M]??0);const l=Object.keys(H).find(m=>H[m]===e.ashtaKoota.rashiLord),o=Object.keys(H).find(m=>H[m]===n.ashtaKoota.rashiLord),f=st[l][o];f==="Friend"?t.grahaMaitri=5:f==="Neutral"?t.grahaMaitri=4:st[o][l]==="Neutral"?t.grahaMaitri=3:t.grahaMaitri=.5;const N=e.ashtaKoota.gana,i=n.ashtaKoota.gana;N===i||N==="देव"&&i==="मनुष्य"||N==="मनुष्य"&&i==="देव"?t.gana=6:N==="देव"&&i==="राक्षस"||N==="राक्षस"&&i==="देव"?t.gana=1:t.gana=0;const g=e.planets.find(m=>m.planet==="MOON").rashi,c=n.planets.find(m=>m.planet==="MOON").rashi,x=Math.abs(g-c);x===0||x===6?t.bhakoot=0:x===1||x===7?t.bhakoot=7:x===2||x===12?t.bhakoot=0:x===3||x===11||x===4||x===10?t.bhakoot=7:x===5||x===9?t.bhakoot=0:t.bhakoot=7,t.nadi=e.ashtaKoota.nadi===n.ashtaKoota.nadi?0:8,t.total=Object.values(t).reduce((m,k)=>m+k),t.total=Math.round(t.total*2)/2;let d=`कुल ${vt(t.total)}/३६ गुण मिलान भएको छ। `;return t.total>=28?d+="यो अति उत्तम मिलान हो।":t.total>=24?d+="यो उत्तम मिलान हो।":t.total>=18?d+="यो मध्यम मिलान हो, विवाह गर्न सकिन्छ।":d+="यो मिलान विवाहको लागि उपयुक्त मानिदैन।",{score:t,conclusion:d}}async function at(e){try{const[n,t]=e.datetime.split("T"),[a,p,u]=n.split("-").map(Number),[r,h,M]=t.split(":").map(Number),l=new Date(Date.UTC(a,p-1,u,r,h,M)-e.offset*3600*1e3),o=Yt(l.getUTCFullYear(),l.getUTCMonth(),l.getUTCDate())+(l.getUTCHours()+l.getUTCMinutes()/60+l.getUTCSeconds()/3600)/24,f=G(o),N=o+f/24,i=Kt(l,e.latitude,e.longitude,e.offset),g=U(N),c=["SUN","MOON","MARS","MERCURY","JUPITER","VENUS","SATURN","RAHU","KETU"].map(E=>{const Z=Gt(N,E,g),q=360/27,Mt=Math.floor(Z.eclipticLongitude/q);return{...Z,nakshatra:ot[Mt],nakshatraPada:Math.floor(Z.eclipticLongitude%q/(q/4))+1}}),d=Qt(o,e.latitude,e.longitude),m=Zt(d),k=c.find(E=>E.planet==="MOON"),I=c.find(E=>E.planet==="SUN"),A=Math.floor(k.eclipticLongitude/(360/27)),w=rt(N,e.offset,!1),v=Wt(N,e.offset),P=$t(N,e.offset),V=Xt(N,e.offset),j=rt(N,e.offset,!0),C=(k.eclipticLongitude-I.eclipticLongitude+360)%360,Q=Math.floor(C/12)+1,nt=C<180?"शुक्ल पक्ष":"कृष्ण पक्ष",mt=(k.eclipticLongitude+I.eclipticLongitude)%360,pt=Jt[Math.floor(mt/(360/27))],Y=Math.floor(C/6);let K;Y===0||Y===59?K=0:Y===56?K=7:Y===57?K=8:Y===58?K=9:K=(Y-1)%7+1;const xt=Ht[K],z=new Date(e.datetime);return{birthDetails:{...e},calculationMeta:{backend:"PCal/Nepdate-Hybrid",version:"2.0.0",ayanamsa:"Lahiri",ayanamsaValue:g,zodiac:"Sidereal",houseSystem:"Whole Sign",calculationUtc:new Date().toISOString()},sunRise:i.sunrise,sunSet:i.sunset,planets:c,ascendant:{longitude:d,sign:Math.floor(d/30)+1,degreesInSign:d%30,nakshatra:ot[Math.floor(d/(360/27))],nakshatraPada:Math.floor(d%(360/27)/(360/27/4))+1},houses:m,nakshatra:{index:A,pada:k.nakshatraPada,nameNepali:k.nakshatra,start:v.start,end:v.end,padaStart:P.start,padaEnd:P.end},tithi:{tithiNumber:Q,paksha:nt,start:w.start,end:w.end},yoga:{name:pt,start:V.start,end:V.end},karana:{name:xt,start:j.start,end:j.end},dashaSequence:gt(k.eclipticLongitude,z),tribhagiDasha:te(k.eclipticLongitude,z),yoginiDasha:ae(k.eclipticLongitude,z),ashtottariDasha:ee(k.eclipticLongitude,z,nt),jaiminiDasha:re(c,d,z),divisionalCharts:[9,10,3,12,4,60].map(E=>ie(E,c,d)),ashtaKoota:ce(k.rashi,A,Math.floor(d/30)+1)}}catch(n){return{error:n instanceof Error?n.message:"Unknown error during calculation."}}}async function de(e,n){const t=await at(e),a=await at(n);if("error"in t||"error"in a)return{error:"Could not calculate kundali for one or both individuals."};const{score:p,conclusion:u}=le(t,a);return{groom:t,bride:a,score:p,conclusion:u}}const dt={getKundali:at,getComparison:de},ue=({mode:e,onModeChange:n})=>S.jsxs("div",{className:"relative flex w-full max-w-sm mx-auto p-1 bg-gray-200 dark:bg-gray-700 rounded-full mb-6",children:[S.jsx("span",{className:"absolute inset-0 w-1/2 bg-blue-500 rounded-full shadow-md transition-transform duration-300 ease-in-out",style:{transform:e==="individual"?"translateX(0%)":"translateX(100%)"}}),S.jsx("button",{type:"button",onClick:()=>n("individual"),className:`relative w-1/2 py-2 text-sm font-medium transition-colors duration-300 rounded-full ${e==="individual"?"text-white":"text-gray-600 dark:text-gray-300"}`,children:_.individual}),S.jsx("button",{type:"button",onClick:()=>n("comparison"),className:`relative w-1/2 py-2 text-sm font-medium transition-colors duration-300 rounded-full ${e==="comparison"?"text-white":"text-gray-600 dark:text-gray-300"}`,children:_.comparison})]}),ut=({onBack:e})=>{const[n,t]=R.useState("individual"),[a,p]=R.useState(null),[u,r]=R.useState(null),[h,M]=R.useState(!1),[l,o]=R.useState(null),f=R.useCallback(()=>{p(null),r(null),M(!1),o(null)},[]);R.useEffect(()=>{const g=()=>{a||u||l?f():e()};return window.addEventListener("popstate",g),()=>window.removeEventListener("popstate",g)},[f,e,a,u,l]),R.useEffect(()=>{(a||u||l)&&window.history.state?.appState!=="result"&&window.history.pushState({appState:"result"},"")},[a,u,l]);const N=()=>{window.history.state?.appState==="result"?window.history.back():f()},i=()=>h?S.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[300px]",children:[S.jsxs("svg",{className:"animate-spin h-10 w-10 text-amber-800 dark:text-amber-400 mb-4",viewBox:"0 0 24 24",children:[S.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),S.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8z"})]}),S.jsx("div",{className:"text-lg font-semibold text-amber-800 dark:text-amber-400",children:_.calculating})]}):l?S.jsx("div",{className:"mt-4 bg-red-50 dark:bg-red-900/30 rounded-lg text-center p-4",children:S.jsxs("div",{className:"flex flex-col items-center justify-center",children:[S.jsxs("svg",{className:"w-16 h-16 text-red-500 dark:text-red-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[S.jsx("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}),S.jsx("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),S.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),S.jsx("p",{className:"mt-4 text-xl text-red-700 dark:text-red-400",children:l}),S.jsx("button",{className:"mt-4 text-blue-600 dark:text-blue-400 underline",onClick:N,children:_.returnToForm})]})}):a?S.jsx(kt,{data:a,onReturnToForm:N}):u?S.jsx(At,{result:u,onReturnToForm:N}):S.jsxs(S.Fragment,{children:[S.jsx(ue,{mode:n,onModeChange:t}),n==="comparison"?S.jsx(Dt,{onCalculate:async(g,c)=>{M(!0),o(null);const x=new Promise(k=>setTimeout(k,3e3)),d=dt.getComparison(g,c),[,m]=await Promise.all([x,d]);"error"in m?o(m.error):r(m),M(!1)},isLoading:h}):S.jsx(It,{onCalculate:async g=>{if(!g)return;M(!0),o(null);const c=new Promise(m=>setTimeout(m,2e3)),x=dt.getKundali(g),[,d]=await Promise.all([c,x]);"error"in d?o(d.error):p(d),M(!1)},isLoading:h})]});return S.jsx("main",{className:"flex-1 flex flex-col overflow-hidden px-2 md:px-3 max-w-7xl mx-auto w-full bg-slate-200 text-gray-900 dark:bg-gray-800 dark:text-gray-100 transition-colors",children:S.jsxs("div",{className:"min-h-max sm:p-6 md:p-6 lg:p-8",children:[S.jsx("div",{className:"flex items-center mb-4",children:S.jsxs("button",{onClick:e,className:"flex items-center gap-2 px-3 py-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",children:[S.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:S.jsx("path",{d:"M19 12H5M12 19l-7-7 7-7"})}),_.returnTomain]})}),S.jsxs("div",{className:"flex justify-center text-base mb-4 font-bold text-gray-500 dark:text-gray-400",children:[_.Software_name,": ",_.Software_version]}),i()]})})},Me=Object.freeze(Object.defineProperty({__proto__:null,KundaliPage:ut,default:ut},Symbol.toStringTag,{value:"Module"})),he=({onBack:e})=>S.jsx("main",{className:"flex-1 flex flex-col overflow-hidden px-2 sm:px-4 md:px-6 lg:px-40 max-w-7xl mx-auto w-full",children:S.jsxs("div",{className:"min-h-screen p-4 sm:p-6 md:p-8",children:[S.jsx("div",{className:"flex items-center mb-4",children:S.jsxs("button",{onClick:e,className:"flex items-center gap-2 px-3 py-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",children:[S.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:S.jsx("path",{d:"M19 12H5M12 19l-7-7 7-7"})}),_.returnTomain]})}),S.jsx(Vt,{onBack:e})]})}),Se=Object.freeze(Object.defineProperty({__proto__:null,default:he},Symbol.toStringTag,{value:"Module"}));export{xe as A,Se as C,Me as K};
