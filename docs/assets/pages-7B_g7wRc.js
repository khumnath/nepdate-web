import{j as a,r as D,X as ze,I as $e,l as Ge,m as We,n as Xe,o as Qe,b as Ze,M as qe,P as xe,p as et,q as tt}from"./vendor-react-CbS14Ock.js";import{X as at,G as st,U as nt,b as ot,n as rt}from"./data-DIM5766G.js";import{K as it,C as lt,a as ct,b as dt,S as ut}from"./kundali-DMSi0cnR.js";import{o as ht,p as gt,K as ft,V as le,q as Z,Y as mt,i as $,r as be,b as xt,R as ce,h as ne,s as q,u as bt,v as pt,w as St,x as Nt,y as yt,T as wt,z as vt,A as kt,B as Mt,C as At,D as jt,E as Dt,F as J,H as pe,m as ee,I as _,J as X,L as It,M as Se,O as Tt,P as Et,N as A,t as Ot,Q as Pt}from"./bikram-BAlxqUlM.js";const Lt="2.1.0",ga=({setIsAboutOpen:e})=>a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4",children:a.jsxs("div",{className:"bg-slate-200 dark:bg-gray-800 rounded-2xl shadow-xl p-6 max-w-sm w-full text-center relative border border-gray-200 dark:border-gray-700",children:[a.jsx("button",{onClick:()=>e(!1),className:"absolute top-3 right-3 p-1.5 rounded-full text-gray-500 hover:text-gray-800 dark:hover:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors","aria-label":"Close",children:a.jsx(at,{className:"w-5 h-5"})}),a.jsx("h2",{className:"text-xl font-bold mb-2 text-gray-900 dark:text-gray-100",children:"About Bikram Calendar"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:"A modern Nepali Bikram Sambat and Gregorian calendar app built using React and PWA technology."}),a.jsx("span",{children:"App Version: "}),a.jsx("span",{className:"font-mono",children:Lt}),a.jsxs("div",{className:"space-y-3 my-6",children:[a.jsxs("a",{href:"https://github.com/khumnath/nepdate/tree/page",target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-3 w-full bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 font-semibold py-2.5 px-4 rounded-lg transition-colors",children:[a.jsx(st,{className:"w-5 h-5"}),a.jsx("span",{children:"Source Code"})]}),a.jsxs("a",{href:"https://github.com/khumnath/nepdate/graphs/contributors",target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-3 w-full bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 font-semibold py-2.5 px-4 rounded-lg transition-colors",children:[a.jsx(nt,{className:"w-5 h-5"}),a.jsx("span",{children:"Contributors"})]}),a.jsxs("a",{href:"https://github.com/khumnath/nepdate/issues/new",target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-3 w-full bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 font-semibold py-2.5 px-4 rounded-lg transition-colors",children:[a.jsx(ot,{className:"w-5 h-5"}),a.jsx("span",{children:"Suggestions and issues"})]})]}),a.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[a.jsxs("p",{className:"mt-1",children:["© 2024–",new Date().getFullYear()," khumnath cg"]}),a.jsx("p",{className:"mt-1",children:"All rights reserved."})]})]})});class G{static instance;toasts=[];listeners=[];toastIdCounter=0;static getInstance(){return G.instance||(G.instance=new G),G.instance}subscribe(s){return this.listeners.push(s),()=>{this.listeners=this.listeners.filter(t=>t!==s)}}emit(){for(const s of this.listeners)s([...this.toasts])}addToast(s,t,n){const g=(this.toastIdCounter++).toString(),i={id:g,message:s,type:t,duration:n};this.toasts.push(i),this.emit(),setTimeout(()=>{this.removeToast(g)},n)}removeToast(s){this.toasts=this.toasts.filter(t=>t.id!==s),this.emit()}}const de=G.getInstance(),Y=(e,s="info",t=3e3)=>{de.addToast(e,s,t)};Y.success=(e,s)=>Y(e,"success",s);Y.error=(e,s)=>Y(e,"error",s);Y.warning=(e,s)=>Y(e,"warning",s);Y.info=(e,s)=>Y(e,"info",s);const Rt=Y,Ct={success:a.jsx(Xe,{className:"w-5 h-5 text-white"}),error:a.jsx(We,{className:"w-5 h-5 text-white"}),warning:a.jsx(Ge,{className:"w-5 h-5 text-black"}),info:a.jsx($e,{className:"w-5 h-5 text-white"})},Ut={success:"bg-green-600 border-green-700 text-white",error:"bg-red-600 border-red-700 text-white",warning:"bg-amber-500 border-amber-600 text-black",info:"bg-blue-600 border-blue-700 text-white"},_t=({toast:e,onDismiss:s})=>{const[t,n]=D.useState(!1);D.useEffect(()=>{if(t){const c=setTimeout(()=>s(e.id),300);return()=>clearTimeout(c)}},[t,s,e.id]);const g=()=>n(!0),i=t?"opacity-0 scale-90":"opacity-100 scale-100";return a.jsx("div",{className:`relative w-full max-w-sm p-4 pr-10 overflow-hidden border-l-4 rounded-md shadow-lg pointer-events-auto transform transition-all duration-300 ease-in-out ${Ut[e.type]} ${i}`,role:"alert",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx("div",{className:"flex-shrink-0 pt-0.5",children:Ct[e.type]}),a.jsx("div",{className:"ml-3 flex-1",children:a.jsx("p",{className:"text-sm font-medium leading-5",children:e.message})}),a.jsx("div",{className:"absolute top-2 right-2 flex-shrink-0 ml-4",children:a.jsx("button",{onClick:g,className:"inline-flex transition duration-150 ease-in-out rounded-md opacity-70 hover:opacity-100 focus:outline-none","aria-label":"Close",children:a.jsx(ze,{className:"w-5 h-5"})})})]})})},fa=()=>{const[e,s]=D.useState([]);return D.useEffect(()=>de.subscribe(s),[]),a.jsx("div",{className:"fixed z-50 flex flex-col w-auto max-w-sm gap-3 bottom-4 left-1/2 -translate-x-1/2",children:e.map(t=>a.jsx(_t,{toast:t,onDismiss:()=>de.removeToast(t.id)},t.id))})},N=Math.PI/180,ue=180/Math.PI;function M(e){return e=e-Math.floor(e/360)*360,e<0?e+360:e}function Kt(e,s){let t=e;for(let n=0;n<7;n++)t=e+s*Math.sin(t);return t}function Vt(e){const s=(e-2451545)/36525;return 24.144206-.013972*s-9e-6*s*s}function Ae(e){return e-ft}function Ne(e){const s=Ae(e);return gt(s)}function ye(e){const s=Ae(e);return ht(s)}const Yt=2451545,Ht={MERCURY:{N:[48.3313,324587e-10],i:[7.0047,5e-8],w:[29.1241,420258e-10],a:[.387098,0],e:[.205635,559e-12],M:[168.6562,4.0923344368]},VENUS:{N:[76.6799,24659e-9],i:[3.3946,275e-10],w:[54.891,138374e-10],a:[.72333,0],e:[.006773,-132e-11],M:[48.0052,1.6021302244]},EARTH:{N:[0,0],i:[0,0],w:[102.9376,713e-7],a:[1,0],e:[.016709,-1151e-12],M:[356.047,.985609102]},MARS:{N:[49.5574,211081e-10],i:[1.8497,-178e-10],w:[286.5016,292961e-10],a:[1.523688,0],e:[.093405,2516e-12],M:[18.6021,.5240207766]},JUPITER:{N:[100.4542,276854e-10],i:[1.303,-1557e-10],w:[273.8777,164505e-10],a:[5.20256,0],e:[.048498,1611e-12],M:[19.895,.0830853001]},SATURN:{N:[113.6634,23898e-9],i:[2.4886,-1081e-10],w:[339.3939,297661e-10],a:[9.55475,0],e:[.055546,-9499e-12],M:[316.967,.0334442282]}};function Ft(e,s,t){if(s==="SUN"){const r=Ne(e),p=M(r-t),h=Ne(e-.1),f=M(h-t);let x=p-f;x<-180&&(x+=360),x>180&&(x-=360);const d=x/.1;return{planet:s,eclipticLongitude:p,rashi:Math.floor(p/30)+1,degreesInSign:p%30,retrograde:d<0,eclipticLatitude:0,speedLon:d}}if(s==="MOON"){const r=ye(e),p=M(r-t),h=ye(e-.1),f=M(h-t);let x=p-f;x<-180&&(x+=360),x>180&&(x-=360);const d=x/.1;return{planet:s,eclipticLongitude:p,rashi:Math.floor(p/30)+1,degreesInSign:p%30,retrograde:!1,eclipticLatitude:0,speedLon:d}}if(s==="RAHU"||s==="KETU"){const r=(e-2451545)/36525,p=M(125.04452-1934.136261*r),h=M(218.3164477+481267.88123421*r),f=M(280.46646+36000.76983*r),x=M(h-f),d=M(h-p),j=-1.274*Math.sin((p-2*x)*N)-.227*Math.sin(2*d*N),k=M(p+j),E=M(k-t),P=s==="RAHU"?E:M(E+180);return{planet:s,eclipticLongitude:P,rashi:Math.floor(P/30)+1,degreesInSign:P%30,retrograde:!0,eclipticLatitude:0,speedLon:-.0529}}const n=e-Yt,g=(r,p)=>{const h=Ht[p],f=M(h.N[0]+h.N[1]*r),x=h.i[0]+h.i[1]*r,d=M(h.w[0]+h.w[1]*r),j=h.a[0],k=h.e[0]+h.e[1]*r,E=M(h.M[0]+h.M[1]*r),P=Kt(E*N,k),H=j*(Math.cos(P)-k),B=j*Math.sqrt(1-k*k)*Math.sin(P),y=(Math.cos(d*N)*Math.cos(f*N)-Math.sin(d*N)*Math.sin(f*N)*Math.cos(x*N))*H+(-Math.sin(d*N)*Math.cos(f*N)-Math.cos(d*N)*Math.sin(f*N)*Math.cos(x*N))*B,I=(Math.cos(d*N)*Math.sin(f*N)+Math.sin(d*N)*Math.cos(f*N)*Math.cos(x*N))*H+(-Math.sin(d*N)*Math.sin(f*N)+Math.cos(d*N)*Math.cos(f*N)*Math.cos(x*N))*B,w=Math.sin(d*N)*Math.sin(x*N)*H+Math.cos(d*N)*Math.sin(x*N)*B;return{x:y,y:I,z:w}},i=(r,p)=>{const h=g(r,p),f=g(r,"EARTH"),x=h.x-f.x,d=h.y-f.y,j=h.z-f.z,k=M(Math.atan2(d,x)*ue),E=Math.sqrt(x*x+d*d),P=Math.atan2(j,E)*ue;return{longitude:k,latitude:P}},{longitude:c,latitude:l}=i(n,s),{longitude:b}=i(n-.1,s),u=M(c-t),o=M(b-t);let m=u-o;m<-180&&(m+=360),m>180&&(m-=360);const S=m/.1;return{planet:s,eclipticLongitude:u,rashi:Math.floor(u/30)+1,degreesInSign:u%30,retrograde:S<0,eclipticLatitude:l,speedLon:S}}function Bt(e,s,t){const n=(e-2451545)/36525,g=280.46061837+360.98564736629*(e-2451545)+387933e-9*n*n-n*n*n/3871e4,i=M(g+t),c=23.439291-.0130042*n,l=ue*Math.atan2(Math.cos(i*N),-(Math.sin(i*N)*Math.cos(c*N)+Math.tan(s*N)*Math.sin(c*N)));return M(l)}function Jt(e){return Array.from({length:12},(s,t)=>({houseNumber:t+1,cuspLongitude:M(e+t*30),sign:Math.floor(M(e+t*30)/30)+1}))}function zt(e){const s=13.333333333333334,t=Math.floor(e/s),n=e%s/s,g=["KETU","VENUS","SUN","MOON","MARS","RAHU","JUPITER","SATURN","MERCURY"],i=[7,20,6,10,7,18,16,19,17],c=t%9,l=g[c],b=(1-n)*i[c];return{lord:l,balance:b}}function we(e,s){const t=["KETU","VENUS","SUN","MOON","MARS","RAHU","JUPITER","SATURN","MERCURY"],n=[7,20,6,10,7,18,16,19,17],g=n.reduce((u,o)=>u+o),i=t.indexOf(e),c=n[i];let l=new Date(s);const b=[];for(let u=0;u<9;u++){const o=(i+u)%9,m=t[o],S=n[o]*c/g,r=new Date(l);r.setDate(r.getDate()+S*365.25),b.push({planet:m,start:l.toISOString(),end:r.toISOString()}),l=r}return b}function je(e,s){const{lord:t,balance:n}=zt(e),g=["KETU","VENUS","SUN","MOON","MARS","RAHU","JUPITER","SATURN","MERCURY"],i=[7,20,6,10,7,18,16,19,17],c=[];let l=new Date(s);const b=new Date(l);b.setDate(b.getDate()+n*365.25),c.push({planet:t,start:l.toISOString(),end:b.toISOString(),subDashas:we(t,l)}),l=b;let u=(g.indexOf(t)+1)%9;for(let o=0;o<15;o++){const m=g[u],S=i[u],r=new Date(l);r.setDate(r.getDate()+S*365.25),c.push({planet:m,start:l.toISOString(),end:r.toISOString(),subDashas:we(m,l)}),l=r,u=(u+1)%9}return c}function $t(e,s){return je(e,s).map(n=>({...n,start:n.start,end:new Date(new Date(n.start).getTime()+(new Date(n.end).getTime()-new Date(n.start).getTime())/3).toISOString()}))}function ve(e,s,t){const n=["SUN","MOON","MARS","MERCURY","SATURN","JUPITER","RAHU","VENUS"],g=[6,15,8,17,10,19,12,21],i=108,c=n.indexOf(e);if(c===-1)return[];let l=new Date(s);const b=[];for(let u=0;u<8;u++){const o=(c+u)%8,m=n[o],S=g[o]*t/i,r=new Date(l);r.setDate(r.getDate()+S*365.25),b.push({planet:m,start:l.toISOString(),end:r.toISOString()}),l=r}return b}function Gt(e,s,t){const n=Math.floor(e/13.333333333333334),g=["SUN","MOON","MARS","MERCURY","SATURN","JUPITER","RAHU","VENUS"],i=[6,15,8,17,10,19,12,21],c=t==="कृष्ण पक्ष",b=(()=>{if(c){if(n===5)return"SATURN";if(n===6)return"JUPITER";if(n===11)return"RAHU";if(n===15)return"VENUS"}return n>=2&&n<=5?"SUN":n>=6&&n<=8?"MOON":n>=9&&n<=11?"MARS":n>=12&&n<=14?"MERCURY":n>=15&&n<=17?"SATURN":n>=18&&n<=20?"JUPITER":n>=21&&n<=23?"RAHU":"VENUS"})(),u=g.indexOf(b);if(u===-1)return[];const o=360/27,S=(1-e%o/o)*i[u],r=[];let p=new Date(s);const h=new Date(p);h.setDate(h.getDate()+S*365.25),r.push({planet:b,start:p.toISOString(),end:h.toISOString(),subDashas:ve(b,p,i[u])}),p=h;let f=(u+1)%8;for(let x=0;x<10;x++){const d=g[f],j=i[f],k=new Date(p);k.setDate(k.getDate()+j*365.25),r.push({planet:d,start:p.toISOString(),end:k.toISOString(),subDashas:ve(d,p,j)}),p=k,f=(f+1)%8}return r}function ke(e,s,t){const n=["Mangala","Pingala","Dhanya","Bhramari","Bhadrika","Ulka","Siddha","Sankata"],g=[1,2,3,4,5,6,7,8],i=36,c=n.indexOf(e);if(c===-1)return[];let l=new Date(s);const b=[];for(let u=0;u<8;u++){const o=(c+u)%8,m=n[o],S=g[o]*t/i,r=new Date(l);r.setDate(r.getDate()+S*365.25),b.push({planet:m,start:l.toISOString(),end:r.toISOString()}),l=r}return b}function Wt(e,s){const t=13.333333333333334,n=Math.floor(e/t),g=["Mangala","Pingala","Dhanya","Bhramari","Bhadrika","Ulka","Siddha","Sankata"],i=[1,2,3,4,5,6,7,8],c=(n+3)%8,l=g[c],b=(1-e%t/t)*i[c],u=[];let o=new Date(s);const m=new Date(o);m.setDate(m.getDate()+b*365.25),u.push({planet:l,start:o.toISOString(),end:m.toISOString(),subDashas:ke(l,o,i[c])}),o=m;let S=(c+1)%8;for(let r=0;r<10;r++){const p=g[S],h=i[S],f=new Date(o);f.setDate(f.getDate()+h*365.25),u.push({planet:p,start:o.toISOString(),end:f.toISOString(),subDashas:ke(p,o,h)}),o=f,S=(S+1)%8}return u}const Xt={SUN:1,MOON:2,MARS:10,MERCURY:6,JUPITER:4,VENUS:12,SATURN:7},Qt={SUN:7,MOON:8,MARS:4,MERCURY:12,JUPITER:10,VENUS:6,SATURN:1};function Zt(e,s,t){const n=t/12,g=[0,3,6,9],i=[1,4,7,10];let c;g.includes(e)?c=e:i.includes(e)?c=(e+6)%12:c=(e+4)%12;let l=new Date(s);const b=[];for(let u=0;u<12;u++){const o=(c+u)%12,m=new Date(l);m.setDate(m.getDate()+n*365.25),b.push({planet:ne[o],start:l.toISOString(),end:m.toISOString()}),l=m}return b}function qt(e,s,t){const n=Math.floor(s/30),g=(n+1)%2!==0;let i=[];if(g)for(let o=0;o<12;o++)i.push((n+o)%12);else for(let o=0;o<12;o++)i.push((n-o+12)%12);let c=new Date(t);const l=[],b=new Map;e.forEach(o=>{b.set(o.planet,o.rashi-1)});const u=[0,1,2,6,7,8];for(const o of i){const m=o+1,S=ce[m],r=b.get(S);if(r===void 0){l.push({planet:ne[o],start:"N/A",end:"N/A"});continue}let p;u.includes(o)?p=(r-o+12)%12:p=(o-r+12)%12;let h=p;p===0&&(h=12);const f=r+1;Xt[S]===f&&(h+=1),Qt[S]===f&&(h-=1),h>12&&(h=12),h<1&&(h=1);const x=new Date(c),d=new Date(x);if(d.setFullYear(x.getFullYear()+h),isNaN(d.getTime())){l.push({planet:ne[o],start:x.toISOString(),end:"N/A"});continue}l.push({planet:ne[o],start:x.toISOString(),end:d.toISOString(),subDashas:Zt(o,x,h)}),c=d}return l}function ea(e,s,t){const n=c=>{const l=Math.floor(c/30),b=c%30,u=30/e,o=Math.floor(b/u);let m,S=c*e%30;switch(e){case 3:m=(l+[0,4,8][o])%12;break;case 4:m=(l+o*3)%12;break;case 9:const p=Math.floor(l/4);m=([0,4,8][p]+o)%12;break;case 10:m=((l%2===0?l:(l+8)%12)+o)%12;break;case 12:m=(l+o)%12;break;case 60:const d=c*e;m=Math.floor(d/30)%12;break;default:const j=c*e;m=Math.floor(j/30)%12,S=j%30;break}return{sign:m+1,degreesInSign:S}},g=s.map(c=>{const{sign:l,degreesInSign:b}=n(c.eclipticLongitude);return{planet:c.planet,sign:l,degreesInSign:b,retrograde:c.retrograde,nakshatra:c.nakshatra,nakshatraPada:c.nakshatraPada}}),i=n(t);return{name:`D${e}`,planets:g,ascendant:{...i,nakshatra:"",nakshatraPada:0}}}function ta(e,s,t){return{varna:yt[At[e]],vasya:Nt[le[e]],yoni:Z[Mt[s]],gana:St[kt[s]],nadi:pt[vt[s]],tatva:bt[wt[e]],paya:(e-1)%4===0?q.Suvarna:(e-2)%4===0?q.Rajat:(e-3)%4===0?q.Tamra:q.Loha,rashiLord:$[ce[e]],lagnesh:$[ce[t]]}}function aa(e,s){const t={varna:0,vasya:0,tara:0,yoni:0,grahaMaitri:0,gana:0,bhakoot:0,nadi:0,total:0},n={ब्राह्मण:4,क्षत्रिय:3,वैश्य:2,शूद्र:1};t.varna=n[e.ashtaKoota.varna]>=n[s.ashtaKoota.varna]?1:0;const g=le[e.planets.find(d=>d.planet==="MOON").rashi],i=le[s.planets.find(d=>d.planet==="MOON").rashi];g===i?t.vasya=1:g==="Vanachara"&&i==="Chatushpada"||g==="Dwipada"&&i!=="Jalachara"?t.vasya=2:g==="Jalachara"&&i==="Dwipada"?t.vasya=0:t.vasya=.5;const c=(s.nakshatra.index-e.nakshatra.index+27)%9;t.tara=[0,2,4,6,8].includes(c)?3:1.5;const l=Object.keys(Z).find(d=>Z[d]===e.ashtaKoota.yoni),b=Object.keys(Z).find(d=>Z[d]===s.ashtaKoota.yoni);l&&b&&(t.yoni=mt[l][b]??0);const u=Object.keys($).find(d=>$[d]===e.ashtaKoota.rashiLord),o=Object.keys($).find(d=>$[d]===s.ashtaKoota.rashiLord),m=be[u][o];m==="Friend"?t.grahaMaitri=5:m==="Neutral"?t.grahaMaitri=4:be[o][u]==="Neutral"?t.grahaMaitri=3:t.grahaMaitri=.5;const S=e.ashtaKoota.gana,r=s.ashtaKoota.gana;S===r||S==="देव"&&r==="मनुष्य"||S==="मनुष्य"&&r==="देव"?t.gana=6:S==="देव"&&r==="राक्षस"||S==="राक्षस"&&r==="देव"?t.gana=1:t.gana=0;const p=e.planets.find(d=>d.planet==="MOON").rashi,h=s.planets.find(d=>d.planet==="MOON").rashi,f=Math.abs(p-h);f===0||f===6?t.bhakoot=0:f===1||f===7?t.bhakoot=7:f===2||f===12?t.bhakoot=0:f===3||f===11||f===4||f===10?t.bhakoot=7:f===5||f===9?t.bhakoot=0:t.bhakoot=7,t.nadi=e.ashtaKoota.nadi===s.ashtaKoota.nadi?0:8,t.total=Object.values(t).reduce((d,j)=>d+j),t.total=Math.round(t.total*2)/2;let x=`कुल ${xt(t.total)}/३६ गुण मिलान भएको छ। `;return t.total>=28?x+="यो अति उत्तम मिलान हो।":t.total>=24?x+="यो उत्तम मिलान हो।":t.total>=18?x+="यो मध्यम मिलान हो, विवाह गर्न सकिन्छ।":x+="यो मिलान विवाहको लागि उपयुक्त मानिदैन।",{score:t,conclusion:x}}const sa=["SUN","MOON","MARS","MERCURY","JUPITER","VENUS","SATURN","RAHU","KETU"],T=360/27,te=T/4,Q=1e-9,ae=e=>(e%360+360)%360;async function he(e){try{const[,s]=e.datetime.split("T"),[t,n,g]=s.split(":").map(Number),i=new Date(new Date(e.datetime).getTime()+e.offset*36e5),c=(t*3600+n*60+g)/86400,l=new Date(Date.parse(e.datetime)),b=jt(l.getUTCFullYear(),l.getUTCMonth(),l.getUTCDate())+(l.getUTCHours()+l.getUTCMinutes()/60+l.getUTCSeconds()/3600)/24,u=Vt(b),o=Dt(i,e.longitude,c),m=J(o),S=pe(o),r=ae(m),p=ae(S),h=Math.floor((r-Q)/T),f=r-h*T,x=Math.floor((f-Q)/te)+1,d=ee[h]?.name??"?",j=ee[h]?.syllables[x-1]??"?",k=Math.floor(m/T),E=_(o-1,J,k*T,2),P=_(o,J,(k+1)*T,2),H=k*4+(x-1),B=_(o-.5,J,H*te,2),y=_(o,J,(H+1)*te,2),I=X(o),w=Math.floor(I/12),L=w%30+1,v=L<=15?"शुक्ल पक्ष":"कृष्ण पक्ष",K=_(o-1,X,w*12,2),O=_(o,X,(w+1)*12,2),R=S+m,W=Math.floor((R%360-Q)/T),De=It[W]??"?",ge=Math.floor(R/T),Ie=ge*T,Te=(ge+1)*T,fe=U=>pe(U)+J(U),Ee=_(o-1,fe,Ie,2),Oe=_(o,fe,Te,2),oe=Math.floor(I/6),Pe=Se[oe%Se.length],Le=_(o-1,X,oe*6,2),Re=_(o,X,(oe+1)*6,2),C=U=>U?Tt(U,o,i).toISOString():"",me=Et(i,e.latitude,e.longitude,e.offset),re=sa.map(U=>{const F=Ft(b,U,u),Be=Math.floor(F.eclipticLongitude/T),Je=Math.floor(F.eclipticLongitude%T/(T/4))+1;return{planet:U,eclipticLongitude:F.eclipticLongitude,eclipticLatitude:F.eclipticLatitude,speedLon:F.speedLon,rashi:F.rashi,degreesInSign:F.degreesInSign,retrograde:F.retrograde,nakshatra:ee[Be]?.name??"?",nakshatraPada:Je}}),V=Bt(b,e.latitude,e.longitude),Ce=Jt(V),Ue=je(r,i),_e=$t(r,i),Ke=Wt(r,i),Ve=Gt(r,i,v),Ye=qt(re,V,i),He=[9,10,3,12,4,60].map(U=>ea(U,re,V)),Fe=ta(Math.floor(r/30)+1,h,Math.floor(V/30)+1);return{birthDetails:{...e},calculationMeta:{backend:"Nepdate-panchangaCore",ayanamsa:"Lahiri",ayanamsaValue:u,zodiac:"Sidereal",houseSystem:"Whole Sign",calculationUtc:new Date().toISOString(),version:"2.1.0"},sunRise:me.sunrise,sunSet:me.sunset,planets:re,ascendant:{longitude:V,sign:Math.floor(V/30)+1,degreesInSign:V%30,nakshatra:ee[Math.floor((ae(V)-Q)/T)]?.name??"?",nakshatraPada:Math.floor((ae(V)%T-Q)/te)+1},houses:Ce,nakshatra:{index:h,pada:x,nameNepali:d,start:C(E),end:C(P),padaStart:C(B),padaEnd:C(y)},tithi:{tithiNumber:L,paksha:v,start:C(K),end:C(O)},yoga:{name:De,start:C(Ee),end:C(Oe)},karana:{name:Pe,start:C(Le),end:C(Re)},tithis:[],nakshatras:[],yogas:[],karanas:[],dashaSequence:Ue,tribhagiDasha:_e,yoginiDasha:Ke,ashtottariDasha:Ve,jaiminiDasha:Ye,divisionalCharts:He,ashtaKoota:Fe}}catch(s){return{error:s instanceof Error?s.message:"Unknown error during calculation."}}}async function na(e,s){const t=await he(e),n=await he(s);if("error"in t||"error"in n)return{error:"Could not calculate kundali for one or both individuals."};const{score:g,conclusion:i}=aa(t,n);return{groom:t,bride:n,score:g,conclusion:i}}const se={getKundali:he,getComparison:na},oa=(e,s)=>rt.find(t=>t.latitude===e&&t.longitude===s),ie=e=>{const s=new Date(e.datetime),t=Ot(s),n=s.getHours(),g=n>=12?"PM":"AM";let i=n%12;i===0&&(i=12);const c=oa(e.latitude,e.longitude)||{name:`${e.latitude.toFixed(4)}, ${e.longitude.toFixed(4)}`,romanization:"Manual Selection",latitude:e.latitude,longitude:e.longitude,zoneId:e.zoneId,offset:e.offset};return{name:e.name,dateSystem:"BS",bsYear:t.year,bsMonth:t.monthIndex+1,bsDay:t.day,hour:i,minute:s.getMinutes(),second:s.getSeconds(),period:g,location:c}},ra=({mode:e,onModeChange:s})=>{const t=()=>e==="individual"?"translateX(0%)":e==="comparison"?"translateX(100%)":"translateX(200%)";return a.jsxs("div",{className:"relative flex w-full max-w-md mx-auto p-1 bg-gray-200 dark:bg-gray-700 rounded-full mb-6",children:[a.jsx("span",{className:"absolute inset-y-0 w-1/3 bg-blue-500 rounded-full shadow-md transition-transform duration-300 ease-in-out",style:{transform:t()}}),a.jsx("button",{type:"button",onClick:()=>s("individual"),className:`relative w-1/3 py-2 text-sm font-medium transition-colors duration-300 rounded-full ${e==="individual"?"text-white":"text-gray-600 dark:text-gray-300"}`,children:A.individual}),a.jsx("button",{type:"button",onClick:()=>s("comparison"),className:`relative w-1/3 py-2 text-sm font-medium transition-colors duration-300 rounded-full ${e==="comparison"?"text-white":"text-gray-600 dark:text-gray-300"}`,children:A.comparison}),a.jsx("button",{type:"button",onClick:()=>s("saved"),className:`relative w-1/3 py-2 text-sm font-medium transition-colors duration-300 rounded-full ${e==="saved"?"text-white":"text-gray-600 dark:text-gray-300"}`,children:A.saved})]})},Me=({onBack:e,setIsKundaliResultsVisible:s,setKundaliBackAction:t})=>{const[n,g]=D.useState("individual"),[i,c]=D.useState(null),[l,b]=D.useState(null),[u,o]=D.useState(!1),[m,S]=D.useState(null),[r,p]=D.useState(!1),[h,f]=D.useState(null),[x,d]=D.useState(Date.now());D.useEffect(()=>{s(i!==null||l!==null||m!==null||r)},[i,l,m,r,s]);const j=D.useCallback(()=>{c(null),b(null),o(!1),S(null),f(null)},[]);D.useEffect(()=>(t(j),()=>t(()=>{})),[t,j]),D.useEffect(()=>{p(n==="saved")},[n]);const k=()=>{i||l||m||r?j():e()},E=(y,I)=>{try{let w=JSON.parse(localStorage.getItem("savedKundalis")||"[]"),L,v=-1;if(y==="individual"){const O=I;v=w.findIndex(R=>R.type==="individual"&&R.name===O.name),L={id:v!==-1?w[v].id:Date.now(),type:"individual",name:O.name,timestamp:new Date().toISOString(),data:O,defaultValues:ie(O)}}else{const{groom:O,bride:R}=I;v=w.findIndex(W=>W.type==="comparison"&&W.groomName===O.name&&W.brideName===R.name),L={id:v!==-1?w[v].id:Date.now(),type:"comparison",groomName:O.name,brideName:R.name,timestamp:new Date().toISOString(),data:{groom:O,bride:R},defaultValues:{groom:ie(O),bride:ie(R)}}}v!==-1&&w.splice(v,1);const K=[L,...w].slice(0,10);localStorage.setItem("savedKundalis",JSON.stringify(K))}catch(w){console.error("Failed to save data:",w)}},P=y=>{y.type==="individual"?(f({individual:y.defaultValues}),g("individual")):(f({groom:y.defaultValues.groom,bride:y.defaultValues.bride}),g("comparison")),d(Date.now()),p(!1)},H=async y=>{p(!1),o(!0),S(null);const I=new Promise(w=>setTimeout(w,1e3));try{if(y.type==="individual"){const w=se.getKundali(y.data),[L,v]=await Promise.all([I,w]);"error"in v?S(v.error):(c(v),E("individual",y.data))}else{const w=se.getComparison(y.data.groom,y.data.bride),[L,v]=await Promise.all([I,w]);"error"in v?S(v.error):(b(v),E("comparison",y.data))}}catch(w){S(w instanceof Error?w.message:"An unexpected error occurred.")}finally{o(!1)}},B=()=>u?a.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[300px]",children:[a.jsxs("svg",{className:"animate-spin h-10 w-10 text-amber-800 dark:text-amber-400 mb-4",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8z"})]}),a.jsx("div",{className:"text-lg font-semibold text-amber-800 dark:text-amber-400",children:A.calculating})]}):m?a.jsx("div",{className:"mt-4 bg-red-50 dark:bg-red-900/30 rounded-lg text-center p-4",children:a.jsxs("div",{className:"flex flex-col items-center justify-center",children:[a.jsxs("svg",{className:"w-16 h-16 text-red-500 dark:text-red-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}),a.jsx("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),a.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),a.jsx("p",{className:"mt-4 text-xl text-red-700 dark:text-red-400",children:m}),a.jsx("button",{className:"mt-4 text-blue-600 dark:text-blue-400 underline",onClick:k,children:A.returnToForm})]})}):i?a.jsx(it,{data:i,onReturnToForm:k}):l?a.jsx(lt,{result:l,onReturnToForm:k}):a.jsxs(a.Fragment,{children:[a.jsx(ra,{mode:n,onModeChange:y=>{y==="saved"?p(!0):g(y)}}),n==="comparison"?a.jsx(ct,{onCalculate:async(y,I)=>{o(!0),S(null);const w=new Promise(O=>setTimeout(O,1e3)),L=se.getComparison(y,I),[v,K]=await Promise.all([w,L]);"error"in K?S(K.error):(E("comparison",{groom:y,bride:I}),b(K)),o(!1)},isLoading:u,defaultValues:h||{}},x):a.jsx(dt,{onCalculate:async y=>{o(!0),S(null);const I=new Promise(K=>setTimeout(K,1e3)),w=se.getKundali(y),[L,v]=await Promise.all([I,w]);"error"in v?S(v.error):(E("individual",y),c(v)),o(!1)},isLoading:u,defaultValues:h?.individual},x),r&&a.jsx(ut,{onClose:()=>{p(!1),g("individual")},onEdit:P,onView:H})]});return a.jsx("main",{className:"flex-1 flex flex-col overflow-hidden px-2 md:px-3 max-w-7xl mx-auto w-full bg-slate-200 text-gray-900 dark:bg-gray-800 dark:text-gray-100 transition-colors",children:a.jsxs("div",{className:"min-h-3 sm:p-6 md:p-6 lg:p-8",children:[a.jsx("div",{className:"flex overflow-hidden print:hidden print:h-0 items-center mb-4",children:a.jsxs("button",{onClick:k,className:"flex return-to-main items-center gap-2 px-3 py-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",children:[a.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M19 12H5M12 19l-7-7 7-7"})}),A.returnTomain]})}),a.jsxs("div",{className:"flex justify-center text-base mb-4 font-bold text-gray-500 dark:text-gray-400",children:[A.Software_name,": ",A.Software_version]}),B()]})})},ma=Object.freeze(Object.defineProperty({__proto__:null,KundaliPage:Me,default:Me},Symbol.toStringTag,{value:"Module"})),ia=({onBack:e})=>a.jsx("main",{className:"flex-1 flex flex-col overflow-hidden px-2 sm:px-4 md:px-6 lg:px-40 max-w-7xl mx-auto w-full",children:a.jsxs("div",{className:"min-h-screen p-4 sm:p-6 md:p-8",children:[a.jsx("div",{className:"flex items-center mb-4",children:a.jsxs("button",{onClick:e,className:"flex items-center gap-2 px-3 py-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",children:[a.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M19 12H5M12 19l-7-7 7-7"})}),A.returnTomain]})}),a.jsx(Pt,{onBack:e})]})}),xa=Object.freeze(Object.defineProperty({__proto__:null,default:ia},Symbol.toStringTag,{value:"Module"})),z=({label:e,icon:s,isActive:t,onClick:n})=>a.jsxs("button",{onClick:n,disabled:t,className:`flex flex-col items-center justify-center p-4 border-2 rounded-lg w-32 h-28 transition-colors ${t?"border-blue-600 bg-blue-50 dark:bg-blue-900/50 cursor-default":"border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 hover:border-blue-500 dark:hover:border-blue-400"}`,children:[s,a.jsx("span",{className:"mt-2 text-sm font-medium",children:e})]}),la=({onBack:e,currentTheme:s,onThemeChange:t,currentMenuStyle:n,onMenuStyleChange:g,currentDesktopLayoutStyle:i,onDesktopLayoutStyleChange:c,onResetSettings:l,isAndroidApp:b,onReloadApp:u})=>{const o=()=>{window.Android&&window.Android.openWidgetSettings?window.Android.openWidgetSettings():(console.warn("Android bridge is not available."),Rt("Could not open widget settings. Are you in the native app?","error",3e3))};return a.jsxs("div",{className:"p-3 max-w-2xl mx-auto",children:[a.jsxs("header",{className:"flex items-center mb-6",children:[a.jsx("button",{onClick:e,className:"p-2 mr-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700",children:a.jsx(Qe,{className:"w-5 h-5"})}),a.jsx("h1",{className:"text-xl font-semibold",children:A.settings})]}),a.jsxs("div",{className:"space-y-5",children:[a.jsxs("section",{className:"p-4 bg-white dark:bg-gray-700 rounded-lg shadow",children:[a.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Reload App"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:"If you are online, this will clear the app cache and reload from the server. If offline, it will just refresh the current view."}),a.jsx("button",{onClick:u,className:"px-4 py-2 rounded-lg text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 dark:bg-blue-700 dark:hover:bg-blue-800 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Clear Cache and Reload"})]}),b&&a.jsxs("section",{className:"p-4 bg-white dark:bg-gray-700 rounded-lg shadow",children:[a.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Android Widget"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:"Customize the home screen widget for your device."}),a.jsx("button",{onClick:o,className:"px-4 py-2 rounded-lg text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 dark:bg-blue-700 dark:hover:bg-blue-800 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Open Widget Settings"})]}),a.jsxs("section",{className:"p-3 bg-white dark:bg-gray-700 rounded-lg shadow",children:[a.jsx("h2",{className:"text-lg font-semibold mb-3",children:A.theme}),a.jsxs("div",{className:"flex space-x-4",children:[a.jsx(z,{label:A.lightMode,icon:a.jsx(Ze,{className:"w-8 h-8 text-yellow-500"}),isActive:s==="light",onClick:s==="light"?void 0:t}),a.jsx(z,{label:A.darkMode,icon:a.jsx(qe,{className:"w-8 h-8 text-blue-300"}),isActive:s==="dark",onClick:s==="dark"?void 0:t})]})]}),a.jsxs("section",{className:"p-4 bg-white dark:bg-gray-700 rounded-lg shadow md:hidden",children:[a.jsx("h2",{className:"text-lg font-semibold mb-1",children:A.mobileNavStyle}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:A.mobileNavDesc}),a.jsxs("div",{className:"flex space-x-4",children:[a.jsx(z,{label:A.slideMenu,icon:a.jsx(xe,{className:"w-8 h-8"}),isActive:n==="slide",onClick:n==="slide"?void 0:()=>g("slide")}),a.jsx(z,{label:A.tabBar,icon:a.jsx(et,{className:"w-8 h-8"}),isActive:n==="tabs",onClick:n==="tabs"?void 0:()=>g("tabs")})]})]}),a.jsxs("section",{className:"hidden md:block p-4 bg-white dark:bg-gray-700 rounded-lg shadow",children:[a.jsx("h2",{className:"text-lg font-semibold mb-1",children:A.desktopNavStyle}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:A.desktopNavDesc}),a.jsxs("div",{className:"flex space-x-4",children:[a.jsx(z,{label:"Top Bar",icon:a.jsx(tt,{className:"w-8 h-8"}),isActive:i==="topbar",onClick:i==="topbar"?void 0:()=>c("topbar")}),a.jsx(z,{label:"Side Bar",icon:a.jsx(xe,{className:"w-8 h-8"}),isActive:i==="sidebar",onClick:i==="sidebar"?void 0:()=>c("sidebar")})]})]}),a.jsxs("section",{className:"p-4 bg-white dark:bg-gray-700 rounded-lg shadow",children:[a.jsx("h2",{className:"text-lg font-semibold mb-2",children:A.resetMessage}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:A.resetMessageDesc}),a.jsx("button",{onClick:l,className:"px-4 py-2 rounded-lg text-sm font-medium text-white bg-red-600 hover:bg-red-700 dark:bg-red-700 dark:hover:bg-red-800 transition-colors focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2",children:A.reset})]})]})]})},ba=Object.freeze(Object.defineProperty({__proto__:null,default:la},Symbol.toStringTag,{value:"Module"}));export{ga as A,xa as C,ma as K,ba as S,fa as T,Rt as t};
