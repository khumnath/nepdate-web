const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./pages-CvuvPmlx.js","./vendor-react-Bt5jsM_t.js","./vendor-other-DQJqTIja.js","./vendor-leaflet-Ch3uxlbW.js","./vendor-leaflet-Dgihpmma.css","./data-AHl0rTh7.js","./bikram-C-wTWGk0.js","./kundali-Ce1sDlE2.js","./vendor-utils-y-iLWhYP.js"])))=>i.map(i=>d[i]);
import"./index-CCIq1DnA.js";import{r as t,j as e,D as _,G as le,X as ie,H as ce,S as de,a as ue,I as V,M as he,b as me,J as fe,K as pe}from"./vendor-react-Bt5jsM_t.js";import{a3 as N,a4 as ge,N as v,C as xe,T as ye,s as be,u as we,M as ve,a5 as ke,a6 as Se,a7 as je}from"./bikram-C-wTWGk0.js";import{t as E,u as Te,A as Ee,T as Ne}from"./pages-CvuvPmlx.js";import{l as Ae,m as Ie,a as Ce,b as Le}from"./vendor-leaflet-Ch3uxlbW.js";import"./vendor-other-DQJqTIja.js";import"./data-AHl0rTh7.js";import"./kundali-Ce1sDlE2.js";import"./vendor-utils-y-iLWhYP.js";const Pe=()=>{const[a,s]=t.useState("light");return t.useEffect(()=>{const h=localStorage.getItem("theme")||"light";s(h),document.documentElement.classList.toggle("dark",h==="dark")},[]),{theme:a,toggleTheme:()=>{const d=a==="light"?"dark":"light";s(d),localStorage.setItem("theme",d),document.documentElement.classList.toggle("dark",d==="dark")},resetTheme:()=>{localStorage.removeItem("theme"),s("light"),document.documentElement.classList.toggle("dark",!1)}}},Re=()=>{const[a,s]=t.useState("tabs"),[g,c]=t.useState("topbar");return t.useEffect(()=>{const r=localStorage.getItem("menuStyle");s(r||"tabs");const f=localStorage.getItem("desktopLayoutStyle");c(f||"topbar")},[]),{menuStyle:a,desktopLayoutStyle:g,handleSetMenuStyle:r=>{s(r),localStorage.setItem("menuStyle",r)},handleSetDesktopLayoutStyle:r=>{c(r),localStorage.setItem("desktopLayoutStyle",r)},resetLayoutSettings:()=>{localStorage.removeItem("menuStyle"),localStorage.removeItem("desktopLayoutStyle"),s("tabs"),c("topbar")}}};function U(a={}){const{immediate:s=!1,onNeedRefresh:g,onOfflineReady:c,onRegistered:d,onRegisteredSW:h,onRegisterError:m}=a;let r,f;const x=async(n=!0)=>{await f};async function p(){if("serviceWorker"in navigator){if(r=await N(async()=>{const{Workbox:n}=await import("./vendor-other-DQJqTIja.js").then(o=>o.w);return{Workbox:n}},[],import.meta.url).then(({Workbox:n})=>new n("./sw.js",{scope:"./",type:"classic"})).catch(n=>{m?.(n)}),!r)return;r.addEventListener("activated",n=>{(n.isUpdate||n.isExternal)&&window.location.reload()}),r.addEventListener("installed",n=>{n.isUpdate||c?.()}),r.register({immediate:s}).then(n=>{h?h("./sw.js",n):d?.(n)}).catch(n=>{m?.(n)})}}return f=p(),x}const _e=()=>{const[a,s]=t.useState(!1),[g,c]=t.useState(!1),[d,h]=t.useState(()=>localStorage.getItem("pwa_installed")==="true"),[m,r]=t.useState(null);return t.useEffect(()=>{U({immediate:!0})},[]),t.useEffect(()=>{const x=window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone;if(s(!!x),x){h(!0);return}const p=()=>{localStorage.setItem("pwa_installed","true"),h(!0),c(!1)};window.addEventListener("appinstalled",p),"getInstalledRelatedApps"in navigator&&navigator.getInstalledRelatedApps().then(o=>{o.length>0&&(localStorage.getItem("pwa_installed")!=="true"&&localStorage.setItem("pwa_installed","true"),h(!0))});const n=o=>{o.preventDefault(),localStorage.removeItem("pwa_installed"),h(!1),r(o),c(!0)};return window.addEventListener("beforeinstallprompt",n),()=>{window.removeEventListener("appinstalled",p),window.removeEventListener("beforeinstallprompt",n)}},[]),{isStandalone:a,canInstall:g,isInstalled:d,deferredPrompt:m,handleInstallClick:async()=>{m&&(m.prompt(),await m.userChoice,r(null),c(!1))}}},De=()=>{const[a,s]=t.useState("calendar"),[g,c]=t.useState(null),[d,h]=t.useState(!1),[m,r]=t.useState(!1),[f,x]=t.useState(!1),[p,n]=t.useState(!1),o=t.useRef(null),[I,T]=t.useState(!1),i=t.useRef(null),k=t.useRef(0),[u,L]=t.useState(!1);t.useEffect(()=>{let l=null,y=0;const b=25,S=()=>{y++,typeof window.Android<"u"&&typeof window.Android.isAndroidApp=="function"?(L(!0),l&&clearInterval(l)):y>=b&&l&&clearInterval(l)};return S(),u||(l=window.setInterval(S,200)),()=>{l&&clearInterval(l)}},[]),t.useEffect(()=>{const l=y=>{m&&y.key==="Backspace"&&(y.preventDefault(),r(!1))};return m&&window.addEventListener("keydown",l),()=>{window.removeEventListener("keydown",l)}},[m]);const j=t.useCallback(()=>d?(h(!1),!0):f?(x(!1),!0):m?(r(!1),!0):a==="kundali"?p&&o.current?(o.current(),!0):(s("calendar"),!0):a==="converter"||a==="settings"||a==="privacy"||a==="radio"?(s("calendar"),!0):!1,[d,f,m,a,p]);t.useEffect(()=>{const l=()=>{k.current=0,T(!1),i.current&&(clearTimeout(i.current),i.current=null)};if(window.handleBackPress=()=>j()?(l(),!0):(k.current+=1,k.current===1?(T(!0),navigator.vibrate&&navigator.vibrate(50),i.current&&clearTimeout(i.current),i.current=window.setTimeout(()=>l(),2e3),!0):(l(),!1)),!u){const y=()=>{const S=new URL(window.location.href);S.hash=`#${Date.now()}`,window.history.pushState({dummy:!0},"",S.toString())};y();const b=()=>{if(j()){y();return}k.current+=1,k.current===1?(T(!0),navigator.vibrate&&navigator.vibrate(50),i.current&&clearTimeout(i.current),i.current=window.setTimeout(()=>l(),2e3),y()):(l(),window.history.go(-2))};return window.addEventListener("popstate",b),()=>{window.removeEventListener("popstate",b),l(),window.handleBackPress=void 0}}return()=>{u&&l()}},[u,j]);const C=l=>{c(l),h(!0)},P=t.useCallback(l=>{o.current=l},[]);return{activeView:a,setActiveView:s,selectedDate:g,isModalOpen:d,setIsModalOpen:h,isMenuOpen:m,setIsMenuOpen:r,isAboutOpen:f,setIsAboutOpen:x,isKundaliResultsVisible:p,setIsKundaliResultsVisible:n,showExitToast:I,handleDayClick:C,isAndroidWebView:u,setKundaliBackAction:P}},Me=(a,s)=>{const[g,c]=t.useState(!1),[d,h]=t.useState(null),[m,r]=t.useState(null),[f,x]=t.useState(!1),[p,n]=t.useState(null);return t.useEffect(()=>{typeof window.Android<"u"&&typeof window.Android.openWidgetSettings=="function"&&c(!0)},[]),t.useEffect(()=>{const i=k=>{if(k?.preventDefault?.(),a){s(!1);return}if(f)window.Android?.exitApp?window.Android.exitApp():window.history.length>1?window.history.back():window.close();else{x(!0);const u=window.setTimeout(()=>x(!1),2e3);n(u)}};return window.addEventListener("popstate",i),document.addEventListener("backbutton",i),()=>{window.removeEventListener("popstate",i),document.removeEventListener("backbutton",i),p&&clearTimeout(p)}},[a,f,p,s]),{isAndroidApp:g,showExitToast:f,handleTouchStart:i=>{h(i.touches[0].clientX),r(null)},handleTouchMove:i=>r(i.touches[0].clientX),handleTouchEnd:()=>{if(!d||!m)return;const i=m-d;i>60&&d<50?s(!0):i<-60&&a&&s(!1),h(null),r(null)}}},A=2e3,D=3e3,Be='id="root"',W=location.origin+"/",Oe=async()=>{try{const a=`${W}?t=${Date.now()}`,s=await fetch(a,{cache:"no-store",credentials:"omit",headers:{"Cache-Control":"no-cache"}});return s.ok?(s.headers.get("Content-Type")||"").includes("text/html")&&(await s.text()).includes(Be)?"fresh":"invalid":"unreachable"}catch{return"unreachable"}},Y=async()=>{if(!navigator.onLine){E("Offline! Full refresh aborted.","error",D);return}const a=await Oe();if(a==="unreachable"){E("Origin URL is not available. Using cached app...","error",D),typeof caches<"u"&&typeof caches.keys=="function"?setTimeout(()=>window.location.reload(),D):console.log("‚ÑπÔ∏è Cache API not available ‚Äî skipping reload for safety.");return}if(a==="invalid"){E("Warning: Cache data not replaced. Using cached app...","warning",A),typeof caches<"u"&&typeof caches.keys=="function"?setTimeout(()=>window.location.reload(),A):console.log("‚ÑπÔ∏è Cache API not available ‚Äî skipping reload for safety.");return}E("Fresh version confirmed. Reloading now...","info",A),setTimeout(()=>{window.location.href=W},A),typeof caches<"u"&&typeof caches.keys=="function"?setTimeout(async()=>{try{const s=await caches.keys();await Promise.all(s.map(g=>caches.delete(g))),console.log("‚úÖ Old cache cleared post-reload.")}catch(s){console.warn("Cache cleanup failed:",s)}},A+3e3):console.log("‚ÑπÔ∏è Cache API not available ‚Äî skipping cache clear for safety.")},Ve=t.lazy(()=>N(()=>import("./pages-CvuvPmlx.js").then(a=>a.K),__vite__mapDeps([0,1,2,3,4,5,6,7,8]),import.meta.url)),Ye=t.lazy(()=>N(()=>import("./pages-CvuvPmlx.js").then(a=>a.c),__vite__mapDeps([0,1,2,3,4,5,6,7,8]),import.meta.url)),Ue=t.lazy(()=>N(()=>import("./pages-CvuvPmlx.js").then(a=>a.S),__vite__mapDeps([0,1,2,3,4,5,6,7,8]),import.meta.url)),We=t.lazy(()=>N(()=>import("./pages-CvuvPmlx.js").then(a=>a.b),__vite__mapDeps([0,1,2,3,4,5,6,7,8]),import.meta.url)),ze=t.lazy(()=>N(()=>import("./pages-CvuvPmlx.js").then(a=>a.r),__vite__mapDeps([0,1,2,3,4,5,6,7,8]),import.meta.url)),Ke=()=>{const{theme:a,toggleTheme:s,resetTheme:g}=Pe(),{menuStyle:c,desktopLayoutStyle:d,handleSetMenuStyle:h,handleSetDesktopLayoutStyle:m,resetLayoutSettings:r}=Re(),{isStandalone:f,canInstall:x,handleInstallClick:p}=_e(),{activeView:n,setActiveView:o,selectedDate:I,isModalOpen:T,setIsModalOpen:i,isMenuOpen:k,setIsMenuOpen:u,isAboutOpen:L,setIsAboutOpen:j,handleDayClick:C,setIsKundaliResultsVisible:P,setKundaliBackAction:l,showExitToast:y}=De(),{activeSystem:b,currentYear:S,currentMonth:R,currentBsYear:z,currentBsMonth:K,currentAdYear:X,currentAdMonth:$,switchSystem:F,goToToday:H,changeMonth:M,changeYear:B,setCurrentBsYear:G,setCurrentAdYear:J,setCurrentBsMonth:q,setCurrentAdMonth:Q,initialToday:O,initialTodayBs:Z,todayDetails:ee}=Te(),{isAndroidApp:te,handleTouchStart:ae,handleTouchMove:se,handleTouchEnd:ne}=Me(k,u),re=()=>{g(),r(),E.info("Settings reset to default",2e3)};t.useEffect(()=>{new URLSearchParams(window.location.search).get("activeView")==="radio"&&(o("radio"),window.history.replaceState({},"","/"))},[o]),t.useEffect(()=>{y&&E.info(b==="bs"?"‡§¨‡§®‡•ç‡§¶ ‡§ó‡§∞‡•ç‡§®‡§ï‡•ã ‡§≤‡§æ‡§ó‡§ø ‡§´‡•á‡§∞‡§ø ‡§•‡§ø‡§ö‡•ç‡§®‡•Å‡§π‡•ã‡§∏‡•ç":"Press back again to exit",2e3)},[y,b]);const oe=()=>{C(O)};return e.jsxs("div",{className:`min-h-screen flex flex-col bg-slate-100 dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-colors relative ${d==="sidebar"?"md:flex-row":""} ${a==="dark"?"dark":""}`,onTouchStart:ae,onTouchMove:se,onTouchEnd:ne,children:[d==="topbar"&&e.jsxs("div",{className:"w-full flex items-center justify-between px-4 py-2 bg-slate-200 dark:bg-gray-800 z-30 print:hidden",children:[e.jsx(ge,{activeView:n,onNavigate:w=>{w==="about"?j(!0):o(w)}}),!f&&x&&e.jsxs("button",{onClick:p,className:"hidden md:flex ml-4 p-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700 items-center gap-2 text-sm",children:[e.jsx(_,{className:"w-4 h-4"})," ",e.jsx("span",{children:v.installApp})]})]}),e.jsx("header",{className:"px-4 py-2 dark:border-gray-700 bg-slate-200 dark:bg-gray-800 z-30 md:hidden",children:e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[c==="slide"&&e.jsx("button",{onClick:()=>u(!0),className:"p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700",children:e.jsx(le,{className:"w-5 h-5"})}),e.jsx("h1",{className:"text-lg sm:text-xl font-semibold",children:v.Nepdate_calendar})]}),c==="tabs"&&!f&&x&&e.jsxs("button",{onClick:p,className:"px-3 py-2 text-left text-xs rounded bg-blue-600 text-white hover:bg-blue-700 flex items-center gap-2",children:[e.jsx(_,{className:"w-5 h-5"})," ",e.jsx("span",{children:v.installApp})]})]})}),k&&e.jsx("div",{className:"fixed inset-0 bg-black/40 z-40 md:hidden",onClick:()=>u(!1)}),e.jsx("aside",{className:`fixed top-0 left-0 z-50 h-full bg-slate-200 dark:bg-gray-800 shadow-xl transform transition-transform duration-300 ease-in-out
          ${k?"translate-x-0":"-translate-x-full"}
          ${d==="sidebar"?"md:translate-x-0 md:sticky md:h-screen md:w-56":"md:hidden w-64"}`,children:e.jsxs("div",{className:"flex flex-col h-full p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100",children:"Menu"}),e.jsx("button",{onClick:()=>u(!1),className:"p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 md:hidden",children:e.jsx(ie,{className:"w-5 h-5"})})]}),e.jsxs("nav",{className:"flex flex-col space-y-3 text-gray-800 dark:text-gray-200",children:[e.jsxs("button",{onClick:()=>{o("calendar"),u(!1)},className:"px-3 py-2 flex items-center gap-2 rounded hover:bg-gray-300 dark:hover:bg-gray-700",children:[e.jsx(ce,{className:"w-4 h-4"})," ",v.home]}),e.jsxs("button",{onClick:()=>{o("converter"),u(!1)},className:"px-3 py-2 flex items-center gap-2 rounded hover:bg-gray-300 dark:hover:bg-gray-700",children:[e.jsx(de,{className:"w-4 h-4"})," ",v.converter]}),e.jsxs("button",{onClick:()=>{o("kundali"),u(!1)},className:"px-3 py-2 flex items-center gap-2 rounded hover:bg-gray-300 dark:hover:bg-gray-700",children:["üîØ ",v.kundali]}),e.jsxs("button",{onClick:()=>{o("settings"),u(!1)},className:"px-3 py-2 flex items-center gap-2 rounded hover:bg-gray-300 dark:hover:bg-gray-700",children:[e.jsx(ue,{className:"w-4 h-4"})," ",v.settings]}),e.jsxs("button",{onClick:()=>{o("privacy"),u(!1)},className:"px-3 py-2 flex items-center gap-2 rounded hover:bg-gray-300 dark:hover:bg-gray-700",children:[e.jsx(V,{className:"w-4 h-4"})," Privacy Policy"]}),e.jsxs("button",{onClick:()=>{j(!0),u(!1)},className:"px-3 py-2 flex items-center gap-2 rounded hover:bg-gray-300 dark:hover:bg-gray-700",children:[e.jsx(V,{className:"w-4 h-4"})," ",v.about]}),!f&&x&&e.jsxs("button",{onClick:()=>{p(),u(!1)},className:"px-3 py-2 flex items-center gap-2 rounded bg-blue-600 text-white hover:bg-blue-700",children:[e.jsx(_,{className:"w-4 h-4"})," ",v.installApp]}),e.jsxs("button",{onClick:()=>{s(),u(!1)},className:"px-3 py-2 flex items-center gap-2 rounded hover:bg-gray-300 dark:hover:bg-gray-700",children:[a==="light"?e.jsx(he,{className:"w-4 h-4"}):e.jsx(me,{className:"w-4 h-4"})," ",a==="light"?v.darkMode:v.lightMode]}),e.jsx("hr",{className:"border-gray-300 dark:border-gray-600 my-2"}),e.jsxs("button",{onClick:()=>{Y(),u(!1)},className:"px-3 py-2 flex items-center gap-2 rounded text-blue-600 dark:text-blue-400 hover:bg-blue-100 dark:hover:bg-blue-900/50",children:[e.jsx(fe,{className:"w-4 h-4"})," Clear Cache & Reload"]})]}),e.jsxs("div",{className:"mt-auto text-xs text-gray-500 dark:text-gray-400 border-t border-gray-200 dark:border-gray-700 pt-4",children:["¬© ",new Date().getFullYear()," ",v.project]})]})}),e.jsx("div",{className:"flex-1 overflow-hidden",children:e.jsx("div",{className:`h-full overflow-auto px-4 md:px-6 max-w-7xl xl:max-w-6xl mx-auto w-full ${c==="tabs"?"pb-24 md:pb-6":"pb-20 md:pb-6"}`,children:n==="kundali"?e.jsx(t.Suspense,{fallback:e.jsx("div",{className:"flex justify-center items-center min-h-[60vh]",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}),children:e.jsx(Ve,{onBack:()=>o("calendar"),setIsKundaliResultsVisible:P,setKundaliBackAction:l})}):n==="calendar"?e.jsxs(e.Fragment,{children:[e.jsx(xe,{activeSystem:b,bsYear:z,bsMonth:K,adYear:X,adMonth:$,onSystemChange:F,onTodayClick:H,theme:a,onThemeToggle:s}),e.jsxs("main",{className:"min-h-[60vh] md:grid md:grid-cols-12 md:gap-x-6",children:[e.jsx("aside",{className:"hidden md:block md:col-span-4",children:e.jsx(ye,{todayAd:O,todayBs:Z,todayDetails:ee,onShowDetailsClick:oe})}),e.jsxs("div",{className:"md:col-span-8 flex flex-col",children:[e.jsx(be,{activeSystem:b,currentYear:S,currentMonth:R,onYearChange:w=>b==="bs"?G(w):J(w),onMonthChange:w=>b==="bs"?q(w):Q(w),onPrevMonth:()=>M("prev"),onNextMonth:()=>M("next"),onPrevYear:()=>B("prev"),onNextYear:()=>B("next")}),e.jsx(we,{activeSystem:b,currentYear:S,currentMonth:R,onDayClick:C}),e.jsx(ve,{activeSystem:b,currentYear:S,currentMonth:R})]})]})]}):n==="converter"?e.jsx(t.Suspense,{fallback:e.jsx("div",{className:"flex justify-center items-center min-h-[60vh]",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}),children:e.jsx(Ye,{onBack:()=>o("calendar")})}):n==="settings"?e.jsx(t.Suspense,{fallback:e.jsx("div",{className:"flex justify-center items-center min-h-[60vh]",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}),children:e.jsx(Ue,{onBack:()=>o("calendar"),currentTheme:a,onThemeChange:s,currentMenuStyle:c,onMenuStyleChange:h,currentDesktopLayoutStyle:d,onDesktopLayoutStyleChange:m,onResetSettings:re,isAndroidApp:te,onReloadApp:Y})}):n==="privacy"?e.jsx(t.Suspense,{fallback:e.jsx("div",{className:"flex justify-center items-center min-h-[60vh]",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}),children:e.jsx(We,{})}):n==="radio"?e.jsx(t.Suspense,{fallback:e.jsx("div",{className:"flex justify-center items-center min-h-[60vh]",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}),children:e.jsx(ze,{})}):null})}),c==="slide"&&e.jsx("div",{className:"fixed bottom-0 left-0 right-0 w-full bg-slate-200 dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 z-50 print:hidden md:hidden",children:e.jsx(ke,{})}),c==="tabs"&&e.jsx("div",{className:"md:hidden print:hidden",children:e.jsx(Se,{activeView:n,onNavigate:w=>{w==="about"?j(!0):o(w==="privacy"?"privacy":w)}})}),e.jsx(je,{date:I,isOpen:T,onClose:()=>i(!1)}),L&&e.jsx(Ee,{setIsAboutOpen:j}),e.jsx(Ne,{})]})};Ae.Icon.Default.mergeOptions({iconUrl:Le,shadowUrl:Ce,iconRetinaUrl:Ie});U({onNeedRefresh(){confirm("A new version is available. Reload to update?")&&window.location.reload()},onOfflineReady(){console.log("App ready to work offline")}});pe.createRoot(document.getElementById("root")).render(e.jsx(t.StrictMode,{children:e.jsx(Ke,{})}));
