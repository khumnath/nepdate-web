import{r as m,j as e,b as lt,T as ot,u as dt,c as it,d as ct,R as xt}from"./vendor-react-CMh7LEwM.js";import{t as T,g as mt,N as a,a as u,b as se,G as ht,f as fe,c as ut,d as ee,e as _,h as U,R as gt,i as ye,j as Ne,k as bt,l as pt}from"./bikram-BtM4GS44.js";import{n as ce,T as oe,L as yt,a as Fe,X as Ee,S as jt,M as ft,B as de,C as xe,P as Re}from"./data-CMNPzb4Y.js";import{t as Nt}from"./vendor-utils-y-iLWhYP.js";const kt=ce.find(t=>t.romanization.toLowerCase()==="kathmandu"),E=kt??ce[0],vt=({label:t,children:n,...l})=>e.jsxs("div",{className:"relative w-full",children:[e.jsx("select",{...l,className:"w-full appearance-none bg-gray-100 border border-gray-300 rounded-md py-2 px-3 text-sm text-gray-800 focus:outline-none focus:bg-slate-200 focus:border-blue-400 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200 dark:focus:bg-blue-400 dark:focus:border-blue-400",children:n}),e.jsx("label",{className:"absolute -top-2 left-2.5 bg-gray-100 px-1 text-xs text-gray-500 dark:bg-gray-700 dark:text-gray-400",children:t}),e.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700 dark:text-gray-300",children:e.jsx(xe,{className:"w-4 h-4"})})]}),St=()=>{const t=dt();return m.useEffect(()=>{const n=setTimeout(()=>{try{t.invalidateSize()}catch{}},150);return()=>clearTimeout(n)},[t]),null},Dt=({onClose:t,onLocationSelect:n,initialPosition:l})=>{const[o,d]=m.useState(l),h=()=>(it({click(g){d([g.latlng.lat,g.latlng.lng])}}),e.jsx(ct,{position:o})),r=()=>{n(o[0],o[1]),t()};return e.jsx("div",{style:{position:"fixed",inset:0,top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",zIndex:9999,display:"flex",justifyContent:"center",alignItems:"center",padding:12},children:e.jsxs("div",{style:{width:"95%",maxWidth:960,height:620,display:"flex",flexDirection:"column",borderRadius:12,overflow:"hidden",background:void 0},className:"bg-slate-50 dark:bg-gray-800 dark:text-gray-200 rounded-lg shadow-lg",children:[e.jsxs("div",{className:"flex justify-between items-center border-b p-3 dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-semibold",children:a.selectOnMap}),e.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-100",children:e.jsx(Ee,{className:"w-5 h-5"})})]}),e.jsx("div",{style:{flex:1,minHeight:420,display:"flex",justifyContent:"center",alignItems:"center",position:"relative"},children:e.jsxs(lt,{center:l,zoom:7,scrollWheelZoom:!0,style:{height:"100%",width:"100%"},children:[e.jsx(ot,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),e.jsx(St,{}),e.jsx(h,{})]},`${l[0]}-${l[1]}`)}),e.jsxs("div",{className:"border-t p-3 flex justify-between items-center dark:border-gray-700",children:[e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:["Lat: ",o[0].toFixed(4),", Lon: ",o[1].toFixed(4)]}),e.jsx("button",{onClick:r,className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 dark:bg-blue-400 dark:text-blue-900 dark:hover:bg-blue-500 dark:hover:text-white",children:a.selectLocation})]})]})})},$e=({children:t})=>e.jsx("div",{className:"grid grid-cols-3 border border-gray-300 rounded-md overflow-hidden divide-x divide-gray-300 focus-within:border-blue-500 focus-within:ring-1 focus-within:ring-blue-500 dark:border-gray-600 dark:divide-gray-600 dark:focus-within:border-blue-400 dark:focus-within:ring-blue-400",children:t}),te=({label:t,children:n,...l})=>e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"absolute top-1 left-2 text-xs text-gray-500 z-10 dark:text-gray-400",children:t}),e.jsx("select",{...l,className:"relative w-full appearance-none bg-gray-100 pt-5 pb-1.5 px-2 text-sm text-gray-800 focus:outline-none focus:bg-slate-200 z-0 dark:bg-gray-700 dark:text-gray-200 dark:focus:bg-gray-600",children:n}),e.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700 z-10 dark:text-gray-300",children:e.jsx(xe,{className:"w-4 h-4"})})]}),wt=({label:t,type:n="number",...l})=>e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"absolute top-1 left-2 text-xs text-gray-500 z-10 dark:text-gray-400",children:t}),e.jsx("input",{...l,type:n,className:"relative w-full bg-gray-100 pt-5 pb-1.5 px-2 text-sm text-gray-800 focus:outline-none focus:bg-slate-200 z-0 dark:bg-gray-700 dark:text-gray-200 dark:focus:bg-gray-600"})]}),Ct=1900,Mt=2150,At=1960,It=2210,Pt=(t,n)=>{if(!t||!n)return 30;const l=t-de.BS_START_YEAR;if(t>=de.BS_START_YEAR&&l<de.NP_MONTHS_DATA.length){const o=de.NP_MONTHS_DATA[l];return o?o[n-1]:30}try{const o=fe(t,n-1,1),d=n-1===11?0:n,h=n-1===11?t+1:t,r=fe(h,d,1),g=Math.round((r.getTime()-o.getTime())/864e5);return g>0&&g<33?g:30}catch{return 30}},Le=m.forwardRef(({onCalculate:t,isLoading:n,hideSubmitButton:l=!1,defaultValues:o},d)=>{const h=new Date,r=T(h),[g,p]=m.useState(o?.name||"प्रयोगकर्ता"),[i,v]=m.useState(o?.dateSystem||"BS"),[c,y]=m.useState(!1),[N,f]=m.useState("search"),[j,b]=m.useState(h.getFullYear()),[k,C]=m.useState(h.getMonth()+1),[S,M]=m.useState(h.getDate()),[D,A]=m.useState(o?.bsYear||r.year),[R,I]=m.useState(o?.bsMonth||r.monthIndex+1),[P,B]=m.useState(o?.bsDay||r.day),z=m.useRef(null),[re,W]=m.useState(!1),[O,Z]=m.useState(null),[K,ne]=m.useState(o?.period||"PM"),[w,ze]=m.useState(o?.hour||4),[ve,Oe]=m.useState(o?.minute||15),[Se,Ke]=m.useState(o?.second||0),[X,De]=m.useState(E),[Y,me]=m.useState(E?.latitude??27.7172),[H,he]=m.useState(E?.longitude??85.324),[ue,J]=m.useState(E?.zoneId??"Asia/Kathmandu"),[Ye,we]=m.useState(!1),[le,He]=m.useState(""),Ve=m.useMemo(()=>{const s=le.trim().toLowerCase();return s?ce.filter(x=>x.romanization.toLowerCase().includes(s)||x.name.includes(le.trim())):ce},[le]);m.useEffect(()=>{if(!(typeof Y!="number"||typeof H!="number"||isNaN(Y)||isNaN(H)))try{const s=Nt(Y,H),x=oe.some(F=>F.zoneId===s);J(x?s:E?.zoneId??"Asia/Kathmandu")}catch{J(E?.zoneId??"Asia/Kathmandu")}},[Y,H,E?.zoneId]);const qe=m.useMemo(()=>Array.from({length:12},(s,x)=>x+1),[]),Ce=m.useMemo(()=>Array.from({length:60},(s,x)=>x),[]),V=m.useMemo(()=>{const x=(i==="BS"?D:j)||(i==="BS"?r.year:h.getFullYear());return i==="BS"?Pt(x,R):mt(x,k)},[i,D,R,j,k,r.year,h]);m.useEffect(()=>{i==="BS"&&P>V&&B(V),i==="AD"&&S>V&&M(V)},[V,i,P,S]);const Ge=s=>{const x=s.target.value,$=ut(x).replace(/[^0-9]/g,"");if($===""){i==="BS"?A(null):b(null);return}const q=parseInt($,10);isNaN(q)||(i==="BS"?A(q):b(q))},Ue=()=>{const s=i==="BS"?D:j;z.current=s,i==="BS"?A(null):b(null)},We=()=>{const s=i==="BS"?D:j;(s===null||String(s).trim()==="")&&(i==="BS"?A(z.current):b(z.current))},ge=()=>{const s=new Date,x=T(s);b(s.getFullYear()),C(s.getMonth()+1),M(s.getDate()),A(x.year),I(x.monthIndex+1),B(x.day)},Ze=s=>{De(s),me(s.latitude),he(s.longitude),J(s.zoneId),y(!1)},Xe=(s,x)=>{me(s),he(x),De({name:`${s.toFixed(4)}, ${x.toFixed(4)}`,romanization:"Manual Selection",latitude:s,longitude:x,zoneId:ue,offset:oe.find(F=>F.zoneId===ue)?.offset??5.75}),y(!1)},Me=()=>{let s=D,x=j;if(s===null&&x===null&&(ge(),s=r.year,x=h.getFullYear()),(i==="BS"?s:j)===null)return null;const $=Q=>Q.toString().padStart(2,"0");let q=x??h.getFullYear(),Ie=k,Pe=S;if(i==="BS"){const Q=s??r.year,pe=fe(Q,R-1,P);q=pe.getFullYear(),Ie=pe.getMonth()+1,Pe=pe.getDate()}let be=w;K==="PM"&&w<12&&(be+=12),K==="AM"&&w===12&&(be=0);const at=`${q}-${$(Ie)}-${$(Pe)}T${$(be)}:${$(ve)}:${$(Se)}`,st=X.latitude,rt=X.longitude,Te=X.zoneId,Be=oe.find(Q=>Q.zoneId===Te),nt=Be?Be.offset:5.75;return{name:g,datetime:at,latitude:st,longitude:rt,zoneId:Te,offset:nt,options:{zodiac:"SIDEREAL",ayanamsa:"LAHIRI",houseSystem:"WHOLE_SIGN",divisionalCharts:[9],dashaSystem:"VIMSHOTTARI"}}},Je=()=>{const s=i==="BS"?D:j;if(s===null||String(s).length<4)return!1;const[x,F]=i==="BS"?[At,It]:[Ct,Mt];return!(s<x||s>F)},Ae=()=>new Promise(s=>{Je()?s(Me()):(ge(),W(!0),Z(()=>s))});m.useImperativeHandle(d,()=>({validateAndGetData:Ae}));const Qe=()=>{W(!1);const s=Me();O&&(O(s),Z(null))},et=()=>{W(!1),O&&(O(null),Z(null))},tt=async s=>{s.preventDefault();const x=await Ae();x&&t(x)};return e.jsxs(e.Fragment,{children:[e.jsxs("form",{onSubmit:tt,className:"space-y-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",id:"name",value:g,onChange:s=>p(s.target.value),required:!0,className:"w-full bg-gray-100 border border-gray-300 rounded-md py-2 px-3 text-sm text-gray-800 focus:outline-none focus:bg-slate-200 focus:border-blue-400 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-100 dark:focus:bg-gray-600 dark:focus:border-blue-400"}),e.jsx("label",{htmlFor:"name",className:"absolute -top-2 left-2.5 bg-gray-100 px-1 text-xs text-gray-500 dark:bg-gray-700 dark:text-gray-400",children:a.name})]}),e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"flex p-1 bg-gray-200 dark:bg-gray-700 rounded-md",children:[e.jsx("button",{type:"button",onClick:()=>{v("BS")},className:`px-4 py-1 text-sm rounded ${i==="BS"?"bg-blue-500 text-white":"text-gray-600 dark:text-gray-300"}`,children:a.bs}),e.jsx("button",{type:"button",onClick:()=>{v("AD")},className:`px-4 py-1 text-sm rounded ${i==="AD"?"bg-blue-500 text-white":"text-gray-600 dark:text-gray-300"}`,children:a.ad})]})}),e.jsx("div",{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex-1",children:e.jsxs($e,{children:[e.jsx(wt,{label:a.year,value:i==="BS"?u(D??""):j??"",onChange:Ge,onFocus:Ue,onBlur:We,type:"tel",inputMode:"numeric",autoComplete:"off"}),e.jsx(te,{label:a.month,value:i==="BS"?R:k,onChange:s=>i==="BS"?I(Number(s.target.value)):C(Number(s.target.value)),children:Array.from({length:12},(s,x)=>e.jsx("option",{value:x+1,children:i==="BS"?se[x]:ht[x]},x+1))}),e.jsx(te,{label:a.day,value:i==="BS"?P:S,onChange:s=>i==="BS"?B(Number(s.target.value)):M(Number(s.target.value)),children:Array.from({length:V},(s,x)=>e.jsx("option",{value:x+1,children:u(x+1)},x+1))})]})}),e.jsx("button",{type:"button",onClick:ge,className:"px-3 py-2 text-sm bg-gray-200 dark:bg-gray-600 rounded-md hover:bg-gray-300 dark:hover:bg-gray-500","aria-label":a.resetToToday,children:a.resetToToday})]})}),e.jsxs($e,{children:[e.jsx(te,{label:a.hour,value:w,onChange:s=>ze(Number(s.target.value)),children:qe.map(s=>e.jsx("option",{value:s,children:u(s)},s))}),e.jsx(te,{label:a.minute,value:ve,onChange:s=>Oe(Number(s.target.value)),children:Ce.map(s=>e.jsx("option",{value:s,children:u(s)},s))}),e.jsx(te,{label:a.second,value:Se,onChange:s=>Ke(Number(s.target.value)),children:Ce.map(s=>e.jsx("option",{value:s,children:u(s)},s))})]}),e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"flex p-1 bg-gray-200 dark:bg-gray-700 rounded-md",children:[e.jsx("button",{type:"button",onClick:()=>ne("AM"),className:`px-4 py-1 text-sm rounded ${K==="AM"?"bg-blue-500 text-white":"text-gray-600 dark:text-gray-300"}`,children:a.am}),e.jsx("button",{type:"button",onClick:()=>ne("PM"),className:`px-4 py-1 text-sm rounded ${K==="PM"?"bg-blue-500 text-white":"text-gray-600 dark:text-gray-300"}`,children:a.pm})]})}),e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"absolute -top-2 left-2.5 bg-gray-100 px-1 text-xs text-gray-500 dark:bg-gray-700 dark:text-gray-400 z-10",children:a.location}),e.jsxs("button",{type:"button",onClick:()=>{y(!0),f("search")},className:"w-full bg-gray-100 border border-gray-300 rounded-md py-2 px-3 text-sm text-gray-800 focus:outline-none focus:bg-slate-200 focus:border-blue-400 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200 flex justify-between items-center text-left",children:[e.jsxs("span",{children:[X.name," ",e.jsxs("span",{className:"text-gray-500 dark:text-gray-400 text-xs",children:["(",X.romanization,")"]})]}),e.jsx(yt,{className:"w-4 h-4 text-gray-500"})]})]}),!l&&e.jsx("div",{className:"pt-4",children:e.jsx("button",{type:"submit",disabled:n,className:"w-full flex justify-center items-center py-3 border border-transparent rounded-md shadow-sm text-base font-medium text-white bg-blue-500 hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:bg-gray-400 disabled:cursor-not-allowed dark:bg-blue-600 dark:hover:bg-blue-700 dark:disabled:bg-gray-500",children:n?e.jsxs(e.Fragment,{children:[e.jsx(Fe,{className:"w-5 h-5 mr-3 animate-spin"}),a.calculating]}):a.calculate})})]}),c&&e.jsx("div",{className:"fixed inset-0 flex items-start justify-center bg-black/60 z-50 p-4 pt-8 sm:pt-8 transition-opacity",onClick:()=>y(!1),children:e.jsxs("div",{className:"bg-slate-200 dark:bg-gray-800 w-full h-full sm:h-auto sm:max-h-[90vh] sm:rounded-lg shadow-xl max-w-lg p-4 flex flex-col transition-transform",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"flex justify-between items-center pb-3 border-b dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-semibold",children:N==="search"?a.searchOrSelectLocation:a.enterManually}),e.jsx("button",{onClick:()=>y(!1),className:"text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-100",children:e.jsx(Ee,{className:"w-5 h-5"})})]}),N==="search"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative my-4",children:[e.jsx(jt,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:a.locationSearchPlaceholder,value:le,onChange:s=>He(s.target.value),className:"w-full bg-gray-100 border border-gray-300 rounded-md py-2 pl-10 pr-3 text-sm text-gray-800 focus:outline-none focus:bg-slate-200 focus:border-blue-400 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-100 dark:focus:bg-gray-600 dark:focus:border-blue-400"})]}),e.jsx("div",{className:"overflow-y-auto flex-1",children:Ve.map(s=>e.jsxs("div",{onClick:()=>Ze(s),className:"p-2.5 cursor-pointer hover:bg-blue-100 dark:hover:bg-blue-900/50 rounded-md text-sm flex justify-between",children:[e.jsx("span",{children:s.name}),e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:s.romanization})]},s.name))}),e.jsx("div",{className:"pt-3 mt-3 border-t dark:border-gray-700 text-center",children:e.jsxs("button",{onClick:()=>f("manual"),className:"text-sm text-blue-600 dark:text-blue-400 hover:underline",children:[a.cantFindLocation," ",a.enterManuallyOrMap]})})]}):e.jsxs("div",{className:"pt-4 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",step:"0.0001",id:"latitude",value:Y,onChange:s=>me(parseFloat(s.target.value)),required:!0,className:"w-full bg-gray-100 border border-gray-300 rounded-md py-2 px-3 text-sm text-gray-800 focus:outline-none focus:bg-slate-200 focus:border-blue-400 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-100 dark:focus:bg-gray-600 dark:focus:border-blue-400"}),e.jsx("label",{htmlFor:"latitude",className:"absolute -top-2 left-2.5 bg-slate-200 px-1 text-xs text-gray-500 dark:bg-gray-800 dark:text-gray-400",children:a.latitudeShort})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",step:"0.0001",id:"longitude",value:H,onChange:s=>he(parseFloat(s.target.value)),required:!0,className:"w-full bg-gray-100 border border-gray-300 rounded-md py-2 px-3 text-sm text-gray-800 focus:outline-none focus:bg-slate-200 focus:border-blue-400 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-100 dark:focus:bg-gray-600 dark:focus:border-blue-400"}),e.jsx("label",{htmlFor:"longitude",className:"absolute -top-2 left-2.5 bg-slate-200 px-1 text-xs text-gray-500 dark:bg-gray-800 dark:text-gray-400",children:a.longitudeShort})]})]}),e.jsx(vt,{label:a.timezone,value:ue,onChange:s=>J(s.target.value),children:oe.map(s=>e.jsx("option",{value:s.zoneId,children:s.label},s.zoneId))}),e.jsxs("button",{type:"button",onClick:()=>we(!0),className:"w-full flex justify-center items-center gap-2 py-2 bg-gray-200 hover:bg-gray-300 rounded-md dark:bg-gray-600 dark:hover:bg-gray-500","aria-label":a.selectOnMap,children:[e.jsx(ft,{className:"w-5 h-5"})," ",a.selectOnMap]}),e.jsx("div",{className:"text-center",children:e.jsxs("button",{onClick:()=>f("search"),className:"text-sm text-blue-600 dark:text-blue-400 hover:underline",children:["← ",a.backToSearch]})})]})]})}),Ye&&e.jsx(Dt,{onClose:()=>we(!1),onLocationSelect:Xe,initialPosition:[Y,H]}),re&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black/60 z-50 p-4 transition-opacity",children:e.jsxs("div",{className:"bg-slate-200 dark:bg-gray-800 rounded-lg shadow-xl max-w-sm w-full p-6 text-center",onClick:s=>s.stopPropagation(),children:[e.jsx("h3",{className:"text-lg font-semibold text-amber-700 dark:text-amber-400",children:a.invalidDateTitle}),e.jsx("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-300",children:a.invalidDateMessage(i)}),e.jsxs("div",{className:"mt-6 flex justify-center gap-4",children:[e.jsx("button",{onClick:et,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-300 rounded-md hover:bg-gray-400 dark:bg-gray-600 dark:text-gray-200 dark:hover:bg-gray-500",children:a.edit}),e.jsx("button",{onClick:Qe,className:"px-4 py-2 text-sm font-medium text-white bg-blue-500 rounded-md hover:bg-blue-600",children:a.proceed})]})]})})]})}),Tt=({cx:t,cy:n,onSelect:l})=>e.jsxs("svg",{className:"absolute inset-0 w-full h-full",viewBox:"0 0 400 400",children:[e.jsx("defs",{children:e.jsx("path",{id:"lotus-petal",d:`M 200 200
             C 150 150, 150 50, 200 0
             C 250 50, 250 150, 200 200 Z`})}),Array.from({length:12},(o,d)=>e.jsx("use",{href:"#lotus-petal",fill:"transparent",className:"overlay-wedge",style:{cursor:"pointer",pointerEvents:"auto"},transform:`rotate(${-d*30-90}, ${t}, ${n})`,onClick:()=>l(d+1)},d))]}),Bt={10:0,11:-30,12:-60,1:-90,2:-120,3:-150,4:-180,5:-210,6:-240,7:-270,8:-300,9:-330};function ie(t){const n=Math.floor(t),l=Math.floor((t-n)*60);return`${u(n)}°${u(l)}′`}function _e(t){const n=Math.round(t/30*100);return`${u(n)}%`}const $t=({planets:t,ascendantSign:n,ascendantDegrees:l,ascendantNakshatra:o,ascendantNakshatraPada:d,chartType:h="lagna"})=>{const[r,g]=m.useState(null),p=t.find(c=>c.planet==="MOON"),i=p?.rashi??1,v=m.useMemo(()=>{const c=new Map;return t.forEach(y=>{const N=y.rashi,f=h==="chandra"?(N-i+12)%12+1:N;c.has(f)||c.set(f,[]),c.get(f).push(y)}),c},[t,h,i]);return e.jsxs("div",{className:"birth-chart-wrapper text-stone-800 dark:text-stone-100",children:[e.jsxs("div",{className:"birth-chart",children:[Array.from({length:12},(c,y)=>y+1).map(c=>{const y=v.get(c)||[],N=Bt[c];if(N===void 0)return null;const f=[];return h!=="chandra"&&c===n&&f.push(e.jsxs("div",{className:"planet-item ascendant",children:[e.jsx("span",{children:ee.ASCENDANT}),l!==void 0&&e.jsx("span",{className:"planet-deg",children:ie(l)})]},"asc")),h==="chandra"&&c===1&&f.push(e.jsx("div",{className:"planet-item ascendant",children:e.jsxs("span",{children:[ee.ASCENDANT," (चन्द्र)"]})},"asc-chandra")),y.forEach(j=>{f.push(e.jsxs("div",{className:"planet-item",children:[e.jsx("span",{className:j.retrograde?"retrograde":"",children:ee[j.planet]}),j.degreesInSign!==void 0&&e.jsx("span",{className:"planet-deg",children:ie(j.degreesInSign)})]},j.planet))}),e.jsxs("div",{className:"petal",style:{transform:`translateX(-50%) rotate(${N}deg)`},children:[e.jsx("div",{className:"rashi-number font-semibold",children:u(c)}),e.jsx("div",{className:"planets-container",children:f})]},c)}),e.jsx("div",{className:"chart-center-dot text-2xl font-bold dark:text-red-400",children:"ॐ"}),e.jsx(Tt,{cx:200,cy:200,onSelect:c=>g(c)})]}),r&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black/50 z-50",onClick:()=>g(null),children:e.jsxs("div",{className:"bg-slate-200 dark:bg-gray-800 dark:text-stone-100 rounded-lg shadow-lg p-6 max-w-md w-full transition-colors duration-300",onClick:c=>c.stopPropagation(),children:[e.jsxs("h3",{className:"font-bold text-lg mb-2 text-blue-600 dark:text-blue-400",children:["घर ",u(r)," – ",_[r-1]," (स्वामी:"," ",U[gt[r]],")"]}),h!=="chandra"&&r===n&&l!==void 0&&e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"flex justify-between text-stone-800 dark:text-stone-100",children:[e.jsxs("span",{children:[ee.ASCENDANT," (",_[n-1],")"]}),e.jsxs("span",{children:[ie(l)," (",_e(l),")"]})]}),o&&d&&e.jsxs("div",{className:"text-sm ml-2 text-gray-600 dark:text-gray-400",children:[ye[o],u(d)]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 h-2 rounded",children:e.jsx("div",{className:"bg-green-500 h-2 rounded",style:{width:`${Math.round(l/30*100)}%`}})})]}),h==="chandra"&&r===1&&p&&e.jsxs("div",{className:"mb-2",children:[e.jsx("div",{className:"flex justify-between text-stone-800 dark:text-stone-100",children:e.jsxs("span",{children:[ee.ASCENDANT," (चन्द्र)"]})}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 h-2 rounded",children:e.jsx("div",{className:"bg-green-500 h-2 rounded",style:{width:`${Math.round((p.degreesInSign||0)/30*100)}%`}})}),p.nakshatra&&p.nakshatraPada&&e.jsxs("div",{className:"text-sm text-red-600 dark:text-red-400 font-semibold mt-1",children:["जनम नक्षत्र:"," ",ye[p.nakshatra],u(p.nakshatraPada)]})]}),(v.get(r)||[]).map(c=>{if(h==="chandra"&&r===1&&c.planet==="MOON")return null;const y=c.degreesInSign!==void 0?Math.round(c.degreesInSign/30*100):null;return e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"flex justify-between text-stone-800 dark:text-stone-100",children:[e.jsx("span",{className:c.retrograde?"font-bold text-blue-600 dark:text-blue-400":"",children:U[c.planet]}),c.degreesInSign!==void 0&&e.jsxs("span",{children:[ie(c.degreesInSign)," (",_e(c.degreesInSign),")"]})]}),c.nakshatra&&c.nakshatraPada&&e.jsxs("div",{className:"text-sm ml-2 text-gray-600 dark:text-gray-400",children:[ye[c.nakshatra],u(c.nakshatraPada)]}),y!==null&&e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 h-2 rounded",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded",style:{width:`${y}%`}})})]},c.planet)})]})})]})},Lt=({planets:t})=>e.jsxs("div",{className:"kundali-card p-4 sm:p-6 rounded-lg overflow-x-auto dark:bg-gray-800 dark:text-stone-100 transition-colors duration-300",children:[e.jsx("h3",{className:"text-xl font-bold text-blue-400 dark:text-blue-400 mb-4",children:a.planetaryPositions}),e.jsxs("table",{className:"w-full text-left text-sm sm:text-base",children:[e.jsx("thead",{className:"border-b-2 border-amber-200 dark:border-amber-700 text-stone-600 dark:text-stone-300",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 px-2",children:a.planet}),e.jsx("th",{className:"py-2 px-2",children:a.rashi}),e.jsx("th",{className:"py-2 px-2",children:a.degrees}),e.jsx("th",{className:"py-2 px-2",children:a.nakshatra}),e.jsx("th",{className:"py-2 px-2",children:a.pada})]})}),e.jsx("tbody",{children:t.map(n=>e.jsxs("tr",{className:"border-b border-amber-100 dark:border-stone-700 hover:bg-amber-50/70 dark:hover:bg-gray-800 transition-colors duration-200",children:[e.jsxs("td",{className:"py-2 px-2 font-medium text-stone-800 dark:text-stone-100",children:[U[n.planet],n.retrograde&&e.jsxs("span",{className:"text-blue-600 dark:text-blue-400 ml-1",children:["(",a.retrograde,")"]})]}),e.jsx("td",{className:"py-2 px-2",children:_[n.rashi-1]}),e.jsx("td",{className:"py-2 px-2 font-mono",children:Ne(n.degreesInSign)}),e.jsx("td",{className:"py-2 px-2",children:n.nakshatra}),e.jsx("td",{className:"py-2 px-2",children:u(n.nakshatraPada)})]},n.planet))})]})]}),ke=({data:t,title:n,titleClassName:l})=>{const o=k=>{if(!k)return"?";try{const C=new Date(k),S=C.getUTCHours(),M=C.getUTCMinutes(),D=S<12?a.am:a.pm,A=S%12===0?12:S%12;return`${u(A)}:${u(M.toString().padStart(2,"0"))} ${D}`}catch{return"?"}},d=(k,C,S)=>{if(!k||!C||!S)return"?";try{const M=ne=>{const w=new Date(ne);return new Date(w.getUTCFullYear(),w.getUTCMonth(),w.getUTCDate(),w.getUTCHours(),w.getUTCMinutes(),w.getUTCSeconds())},D=M(S),A=M(k),R=M(C),I=T(D),P=T(A),B=T(R),z=o(k),re=o(C),W=P.year===I.year&&P.monthIndex===I.monthIndex&&P.day===I.day,O=B.year===I.year&&B.monthIndex===I.monthIndex&&B.day===I.day,Z=W?z:`${u(P.day)} गते ${z}`,K=O?re:`${u(B.day)} गते ${re}`;return`${Z} देखि ${K} सम्म`}catch{return"N/A"}},h=t.planets.find(k=>k.planet==="MOON"),r=t.planets.find(k=>k.planet==="SUN"),g=new Date(t.birthDetails.datetime),p=T(g),i=`${u(p.year)} ${se[p.monthIndex]} ${u(p.day)}`,v=bt[g.getDay()],c=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"long",day:"numeric"}).format(g),y=new Intl.DateTimeFormat("ne-NP",{hour:"numeric",minute:"numeric",hour12:!0}).format(g),N=pt[t.nakshatra.index],f=N?N.syllables[t.nakshatra.pada-1]:"?",j=_[t.ascendant.sign-1],b=Ne(t.ascendant.degreesInSign);return e.jsxs("div",{className:"kundali-card p-4 sm:p-6 rounded-lg h-full bg-slate-200 dark:bg-gray-800",children:[e.jsx("h3",{className:`text-xl font-bold mb-4 text-center ${l||"text-blue-400 dark:text-blue-400"}`,children:n||a.birthDetails}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-6 gap-y-2 text-sm",children:[e.jsxs("div",{className:"flex gap-1 items-start ",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[a.birthDateBS,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:i})]}),e.jsxs("div",{className:"flex gap-1 items-start",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[a.birthDateAD,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:c})]}),e.jsxs("div",{className:"flex gap-1 items-start",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[a.birthTime,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:y})]}),e.jsxs("div",{className:"flex gap-1 items-start",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[a.dayOfWeek,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:v})]})]}),e.jsxs("div",{className:"mt-6 pt-4 border-t-2 border-amber-200 dark:border-amber-700",children:[e.jsx("h3",{className:"text-lg font-bold text-blue-400 dark:text-blue-400 mb-3",children:a.dailyTimings}),e.jsxs("div",{className:"grid grid-cols-[auto_1fr] sm:grid-cols-[auto_1fr_auto_1fr] items-center gap-x-4 gap-y-2 text-sm",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400 text-right",children:[a.sunrise,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100 text-left",children:u(t.sunRise)}),e.jsxs("span",{className:"text-stone-500 dark:text-stone-400 text-right sm:text-right",children:[a.sunset,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100 text-left",children:u(t.sunSet)})]})]}),e.jsxs("div",{className:"mt-6 pt-4 border-t-2 border-amber-200 dark:border-amber-700",children:[e.jsx("h3",{className:"text-lg font-bold text-blue-400 dark:text-blue-400 mb-3",children:a.astrologicalDetails}),e.jsxs("div",{className:"grid grid-cols-[auto_1fr] items-center gap-x-4 gap-y-3 text-sm",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400 text-right",children:[a.lagna,":"]}),e.jsxs("span",{className:"font-semibold text-stone-800 dark:text-stone-100 text-left",children:[j," (",b,")"]}),t.ashtaKoota.lagnesh&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400 text-right",children:[a.lagnesh,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100 text-left",children:t.ashtaKoota.lagnesh})]}),h&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400 text-right",children:[a.moonSign,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100 text-left",children:_[h.rashi-1]})]}),t.ashtaKoota.rashiLord&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400 text-right",children:[a.rashiLord,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100 text-left",children:t.ashtaKoota.rashiLord})]}),r&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400 text-right",children:[a.sunSign,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100 text-left",children:_[r.rashi-1]})]}),e.jsxs("span",{className:"text-stone-500 dark:text-stone-400 text-right",children:[a.birthNakshatra,":"]}),e.jsxs("div",{className:"text-left",children:[e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:t.nakshatra.nameNepali}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:d(t.nakshatra.start,t.nakshatra.end,t.birthDetails.datetime)}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[e.jsxs("span",{className:"font-semibold",children:["पद ",u(t.nakshatra.pada),": "]}),d(t.nakshatra.padaStart,t.nakshatra.padaEnd,t.birthDetails.datetime)]})]}),e.jsxs("span",{className:"text-stone-500 dark:text-stone-400 text-right",children:[a.tithi,":"]}),e.jsxs("div",{className:"text-left",children:[e.jsxs("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:[t.tithi.paksha," - ",u(t.tithi.tithiNumber)]}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:d(t.tithi.start,t.tithi.end,t.birthDetails.datetime)})]}),e.jsxs("span",{className:"text-stone-500 dark:text-stone-400 text-right",children:[a.yoga,":"]}),e.jsxs("div",{className:"text-left",children:[e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:t.yoga.name}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:d(t.yoga.start,t.yoga.end,t.birthDetails.datetime)})]}),e.jsxs("span",{className:"text-stone-500 dark:text-stone-400 text-right",children:[a.karana,":"]}),e.jsxs("div",{className:"text-left",children:[e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:t.karana.name}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:d(t.karana.start,t.karana.end,t.birthDetails.datetime)})]}),e.jsxs("span",{className:"text-stone-500 dark:text-stone-400 text-right",children:[a.suggestedSyllable,":"]}),e.jsx("span",{className:"font-bold text-amber-600 dark:text-amber-600 text-lg text-left",children:f})]})]}),t.ashtaKoota&&e.jsxs("div",{className:"mt-6 pt-4 border-t-2 border-amber-200 dark:border-amber-700",children:[e.jsx("h3",{className:"text-lg font-bold text-blue-400 dark:text-blue-400 mb-3",children:a.gunaMilanDetails}),e.jsxs("div",{className:"grid grid-cols-[auto_1fr_auto_1fr] sm:grid-cols-[auto_1fr_auto_1fr_auto_1fr] gap-x-4 gap-y-2 text-sm items-baseline",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[a.varna,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:t.ashtaKoota.varna}),e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[a.vasya,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:t.ashtaKoota.vasya}),e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[a.gana,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:t.ashtaKoota.gana}),e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[a.yoni,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:t.ashtaKoota.yoni}),e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[a.nadi,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:t.ashtaKoota.nadi}),e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[a.tatva,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:t.ashtaKoota.tatva}),e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[a.paya,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:t.ashtaKoota.paya})]})]}),e.jsxs("div",{className:"mt-6 pt-4 border-t-2 border-amber-200 dark:border-amber-700",children:[e.jsx("h3",{className:"text-lg font-bold text-blue-400 dark:text-blue-400 mb-2",children:a.calculationDetails}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-6 gap-y-2 text-sm",children:[e.jsxs("div",{className:"flex gap-1 items-start",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[a.backend,":"]}),e.jsxs("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:[t.calculationMeta.backend,": ",t.calculationMeta.version]})]}),e.jsxs("div",{className:"flex gap-1 items-start",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[a.ayanamsa,":"]}),e.jsxs("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:[t.calculationMeta.ayanamsa," (",Ne(t.calculationMeta.ayanamsaValue),")"]})]}),e.jsxs("div",{className:"flex gap-1 items-start",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[a.houseSystem,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:t.calculationMeta.houseSystem})]})]})]})]})},G=t=>{if(!t||t==="N/A")return"N/A";try{const n=new Date(t);if(isNaN(n.getTime()))return"N/A";const l=T(n),o=u(l.year.toString()),d=se[l.monthIndex],h=u(l.day.toString());return`${o} ${d} ${h}`}catch(n){return console.error("Date formatting error:",n),"N/A"}},ae=({dashaSequence:t,title:n})=>{const[l,o]=m.useState(null),d=n===a.jaiminiDasha,h=r=>{o(g=>g===r?null:r)};return e.jsxs("div",{className:"kundali-card p-4 sm:p-6 mb-11 print:mb-4 rounded-lg bg-slate-200 dark:bg-gray-800",children:[e.jsx("h3",{className:"text-xl font-bold text-blue-400 dark:text-blue-400 mb-4 print:hidden",children:n}),d&&e.jsx("p",{className:"text-xs text-stone-500 dark:text-stone-400 -mt-3 mb-3 px-2 print:hidden",children:a.jaiminiProportionalNote}),e.jsx("div",{className:"print:hidden",children:e.jsxs("table",{className:"w-full text-left text-sm sm:text-base border-collapse",children:[e.jsx("thead",{className:"border-b-2 border-amber-200 dark:border-amber-700 text-stone-600 dark:text-stone-300",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 px-2",children:d?"दशा राशि":a.mahaDasha}),e.jsx("th",{className:"py-2 px-2",children:a.startsOn}),e.jsx("th",{className:"py-2 px-2",children:a.endsOn})]})}),e.jsx("tbody",{children:t.map(r=>{const g=r.planet+r.start,p=r.subDashas&&r.subDashas.length>0;return e.jsxs(xt.Fragment,{children:[e.jsxs("tr",{className:`border-b border-amber-100 dark:border-amber-800 ${p?"cursor-pointer hover:bg-amber-50/70 dark:hover:bg-amber-900/40":""}`,onClick:()=>p&&h(g),"aria-expanded":p&&l===g,"aria-controls":`antardasha-${g}`,children:[e.jsxs("td",{className:"py-2 px-2 font-medium text-stone-800 dark:text-stone-100 flex items-center relative",children:[p&&e.jsxs("div",{className:"relative group",children:[e.jsx(xe,{className:`w-4 h-4 mr-2 text-amber-700 dark:text-blue-400 transition-transform duration-300 ${l===g?"rotate-180":""}`}),e.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 mt-1 px-2 py-1 bg-zinc-800 text-white text-xs rounded shadow-md opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap z-[999] dark:bg-gray-800 dark:text-stone-200",children:a.antarDasha_clickToExpand})]}),e.jsx("span",{className:`z-0 ${p?"":"ml-6"}`,children:d?r.planet:U[r.planet]})]}),e.jsx("td",{className:"py-2 px-2 text-stone-700 dark:text-stone-200",children:G(r.start)}),e.jsx("td",{className:"py-2 px-2 text-stone-700 dark:text-stone-200",children:G(r.end)})]}),p&&e.jsx("tr",{className:"bg-slate-200 dark:bg-gray-800",children:e.jsx("td",{colSpan:3,className:"p-0 border-none",children:e.jsx("div",{id:`antardasha-${g}`,className:`overflow-hidden transition-all duration-500 ease-in-out ${l===g?"max-h-[1000px]":"max-h-0"}`,children:e.jsxs("div",{className:"p-4 bg-amber-50/50 dark:bg-amber-900/20",children:[e.jsx("h4",{className:"font-semibold text-blue-400 dark:text-blue-400 mb-2 pl-2",children:d?"अन्तरदशा राशि":a.antarDasha}),e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"text-stone-500 dark:text-stone-400",children:e.jsxs("tr",{children:[e.jsx("th",{className:"font-medium py-1 px-2 text-left",children:d?"राशि":a.planet}),e.jsx("th",{className:"font-medium py-1 px-2 text-left",children:a.startsOn}),e.jsx("th",{className:"font-medium py-1 px-2 text-left",children:a.endsOn})]})}),e.jsx("tbody",{children:r.subDashas.map(i=>e.jsxs("tr",{className:"border-b border-amber-100 dark:border-amber-800 last:border-b-0",children:[e.jsx("td",{className:"py-1.5 px-2 text-stone-800 dark:text-stone-100",children:d?i.planet:U[i.planet]}),e.jsx("td",{className:"py-1.5 px-2 text-stone-700 dark:text-stone-200",children:G(i.start)}),e.jsx("td",{className:"py-1.5 px-2 text-stone-700 dark:text-stone-200",children:G(i.end)})]},i.planet+i.start))})]})]})})})})]},g)})})]})}),e.jsxs("div",{className:"hidden print:block mt-6",children:[e.jsx("h4",{className:"text-lg font-semibold mb-2 text-stone-800",children:n}),d&&e.jsx("p",{className:"text-xs text-stone-500 -mt-2 mb-2 px-2 italic",children:a.jaiminiProportionalNote}),e.jsxs("table",{className:"w-full text-left text-sm border-collapse mb-4",children:[e.jsx("thead",{className:"border-b-2 border-stone-400 text-stone-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 px-2",children:d?"दशा राशि":a.mahaDasha}),e.jsx("th",{className:"py-2 px-2",children:a.startsOn}),e.jsx("th",{className:"py-2 px-2",children:a.endsOn})]})}),e.jsx("tbody",{children:t.slice(0,12).map(r=>e.jsxs("tr",{className:"border-b border-stone-200",children:[e.jsx("td",{className:"py-2 px-2 font-medium text-stone-800",children:d?r.planet:U[r.planet]}),e.jsx("td",{className:"py-2 px-2 text-stone-700",children:G(r.start)}),e.jsx("td",{className:"py-2 px-2 text-stone-700",children:G(r.end)})]},`print-${r.planet}-${r.start}`))})]}),e.jsx("p",{className:"text-xs text-stone-600 px-2 italic",children:a.subDashaPrintNote})]})]})},je=({chart:t})=>{if(!t.chartData)return null;const n="planets"in t.chartData?t.chartData.planets:[],l="ascendant"in t.chartData?t.chartData.ascendant.sign:1,o="ascendant"in t.chartData?t.chartData.ascendant.degreesInSign:void 0,d="ascendant"in t.chartData?t.chartData.ascendant.nakshatra:void 0,h="ascendant"in t.chartData?t.chartData.ascendant.nakshatraPada:void 0;return e.jsxs("div",{className:"chart-instance dark:bg-gray-800",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2 text-center dark:text-blue-400",children:t.title}),e.jsx("div",{className:"chart-card dark:bg-gray-800 rounded-lg p-2 transition-colors duration-300",children:e.jsx($t,{planets:n.map(r=>({planet:r.planet,rashi:"rashi"in r?r.rashi:r.sign,degreesInSign:"degreesInSign"in r?r.degreesInSign:void 0,retrograde:r.retrograde,nakshatra:r.nakshatra,nakshatraPada:r.nakshatraPada})),ascendantSign:l,ascendantDegrees:o,ascendantNakshatra:d,ascendantNakshatraPada:h,chartType:t.type})})]},t.title)},Kt=({data:t,onReturnToForm:n})=>{const[l,o]=m.useState(!1),d=t.divisionalCharts.find(b=>b.name.includes("D9")),h=t.divisionalCharts.find(b=>b.name.includes("D10")),r=t.divisionalCharts.find(b=>b.name.includes("D3")),g=t.divisionalCharts.find(b=>b.name.includes("D12")),p=t.divisionalCharts.find(b=>b.name.includes("D4")),i=t.divisionalCharts.find(b=>b.name.includes("D60")),v=[{type:"lagna",title:a.rashiChart,chartData:t},{type:"chandra",title:a.chandraChart,chartData:t},{type:"navamsha",title:a.navamsaChart,chartData:d},{type:"dashamsa",title:a.dashamsaChart,chartData:h}],c=[{type:"drekkana",title:a.drekkanaChart,chartData:r},{type:"dwadamsha",title:a.dwadamshaChart,chartData:g},{type:"chaturthamsha",title:a.chaturthamshaChart,chartData:p},{type:"shashtiamsha",title:a.shashtiamshaChart,chartData:i}].filter(b=>b.chartData),y=new Date,N=T(y),f=`${u(N.year)} ${se[N.monthIndex]} ${u(N.day)}`,j=y.toLocaleTimeString("ne-NP",{hour:"numeric",minute:"2-digit",hour12:!0});return e.jsxs("div",{className:"kundali-display-container flex flex-col bg-slate-200 rounded-xl shadow-lg w-full  lg:max-w-4xl xl:max-w-6xl lg:p-4 md:p-1 space-y-4 text-sm md:text-base dark:bg-gray-800 dark:text-gray-200 dark:border dark:border-gray-700 pb-40 print:pb-0",children:[e.jsxs("header",{className:"kundali-card rounded-lg text-center dark:bg-gray-800 dark:text-blue-400 transition-colors duration-300",children:[e.jsx("h2",{className:"text-3xl self-center font-bold text-blue-400 dark:text-blue-400",children:a.kundaliOf(t.birthDetails.name)}),e.jsxs("div",{className:"hidden text-xs self-center print:block font-bold text-gray-400 dark:text-gray-400(",children:[a.printedDate,": ",f," ",j]})]}),e.jsx("div",{className:"grid grid-cols-1 gap-6",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{className:"lg:col-span-2 flex flex-col",children:e.jsx("div",{className:"flex-1 kundali-card p-4 rounded-lg bg-slate-200 dark:bg-gray-800 dark:text-stone-100 shadow transition-colors duration-300",children:e.jsx(ke,{data:t})})}),e.jsx("div",{className:"flex-1 kundali-card lg:p-4 md:p-1 rounded-lg bg-slate-200 dark:bg-gray-800 dark:text-stone-100 shadow transition-colors duration-300",children:e.jsx(Lt,{planets:t.planets})})]})}),e.jsxs("div",{className:"print:hidden",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-6 mt-6",children:v.map(b=>e.jsx(je,{chart:b},b.type))}),c.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-6 mt-6 transition-all duration-500 ease-in-out overflow-hidden ${l?"max-h-[2000px] opacity-100":"max-h-0 opacity-0"}`,children:l&&c.map(b=>e.jsx(je,{chart:b},b.type))}),e.jsx("div",{className:"text-center mt-4",children:e.jsxs("button",{onClick:()=>o(!l),className:"flex items-center justify-center gap-2 mx-auto px-4 py-2 text-sm font-medium text-blue-600 dark:text-blue-400 bg-blue-100/50 dark:bg-blue-900/20 rounded-lg hover:bg-blue-100 dark:hover:bg-blue-900/40 transition",children:[e.jsx("span",{children:l?a.showLessCharts:a.showMoreCharts}),e.jsx(xe,{className:`w-4 h-4 transition-transform duration-300 ${l?"rotate-180":""}`})]})})]})]}),e.jsx("div",{className:"hidden print:block",children:e.jsx("div",{className:"flex flex-wrap -mx-3 mt-6 pt-6 border-t-2 border-dashed border-gray-300 dark:border-gray-700",children:[...v,...c].map(b=>e.jsx("div",{className:"w-1/2 px-3 mb-6 break-inside-avoid",children:e.jsx(je,{chart:b})},`print-${b.type}`))})}),e.jsx(ae,{dashaSequence:t.dashaSequence,title:a.dashaPeriods}),t.tribhagiDasha&&t.tribhagiDasha.length>0&&e.jsx(ae,{dashaSequence:t.tribhagiDasha,title:a.tribhagiDasha}),t.yoginiDasha&&t.yoginiDasha.length>0&&e.jsx(ae,{dashaSequence:t.yoginiDasha,title:a.yoginiDasha}),t.ashtottariDasha&&t.ashtottariDasha.length>0&&e.jsx(ae,{dashaSequence:t.ashtottariDasha,title:a.ashtottariDasha}),t.jaiminiDasha&&t.jaiminiDasha.length>0&&e.jsx(ae,{dashaSequence:t.jaiminiDasha,title:a.jaiminiDasha}),e.jsxs("div",{className:"hidden print:block text-center text-xs text-gray-500 pt-4 mt-4 border-t border-gray-300",children:[e.jsxs("p",{children:["© ",new Date().getFullYear()," ",a.project]}),e.jsxs("p",{className:"mt-1",children:[t.birthDetails.name," को कुण्डली"]})]}),e.jsxs("div",{className:"fixed bottom-12 left-1/2 transform -translate-x-1/2 z-[999] print:hidden w-full px-4 text-center",children:[e.jsxs("div",{className:"flex gap-4 justify-center",children:[e.jsxs("button",{className:"bg-blue-600 dark:bg-blue-600 text-white px-6 py-2 rounded shadow-md hover:bg-blue-700 dark:hover:bg-blue-800 transition flex items-center gap-2",onClick:n,children:["← ",a.returnToForm]}),e.jsxs("button",{className:"bg-gray-600 dark:bg-gray-500 text-white px-6 py-2 rounded shadow-md hover:bg-gray-700 dark:hover:bg-gray-600 transition flex items-center gap-2",onClick:()=>window.print(),children:[e.jsx(Re,{className:"w-4 h-4"})," ",a.print]})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2 md:hidden",children:a.mobilePrintHint})]})]})},_t={name:"पारस",dateSystem:"BS",bsYear:2050,bsMonth:2,bsDay:17,hour:10,minute:15,second:0,period:"AM"},Ft={name:"हिमानी",dateSystem:"BS",bsYear:2053,bsMonth:2,bsDay:9,hour:2,minute:30,second:0,period:"PM"},Yt=({onCalculate:t,isLoading:n})=>{const l=m.useRef(null),o=m.useRef(null),d=async()=>{const h=await l.current?.validateAndGetData(),r=await o.current?.validateAndGetData();h&&r&&t(h,r)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-slate-50 rounded-xl shadow-lg p-4 dark:bg-gray-800/50",children:[e.jsx("h2",{className:"text-xl font-bold text-blue-700 dark:text-blue-300 mb-4 text-center",children:a.groomDetails}),e.jsx(Le,{ref:l,onCalculate:()=>{},isLoading:!1,hideSubmitButton:!0,defaultValues:_t})]}),e.jsxs("div",{className:"bg-slate-50 rounded-xl shadow-lg p-4 dark:bg-gray-800/50",children:[e.jsx("h2",{className:"text-xl font-bold text-pink-700 dark:text-pink-400 mb-4 text-center",children:a.brideDetails}),e.jsx(Le,{ref:o,onCalculate:()=>{},isLoading:!1,hideSubmitButton:!0,defaultValues:Ft})]})]}),e.jsx("div",{className:"pt-4",children:e.jsx("button",{type:"button",onClick:d,disabled:n,className:"w-full flex justify-center items-center py-3 border border-transparent rounded-md shadow-sm text-base font-medium text-white bg-green-500 hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:bg-gray-400 disabled:cursor-not-allowed dark:bg-green-600 dark:hover:bg-green-700 dark:disabled:bg-gray-500",children:n?e.jsxs(e.Fragment,{children:[e.jsx(Fe,{className:"w-5 h-5 mr-3 animate-spin"}),a.calculating]}):a.calculateComparison})})]})},L=({label:t,groomValue:n,brideValue:l,maxPoints:o,obtainedPoints:d})=>e.jsxs("tr",{className:"border-b border-amber-100 dark:border-stone-700 last:border-b-0",children:[e.jsx("td",{className:"py-2 px-2 font-medium text-stone-800 dark:text-stone-100",children:t}),e.jsx("td",{className:"py-2 px-2 text-stone-700 dark:text-stone-200",children:n}),e.jsx("td",{className:"py-2 px-2 text-stone-700 dark:text-stone-200",children:l}),e.jsx("td",{className:"py-2 px-2 text-center text-stone-700 dark:text-stone-200",children:u(o)}),e.jsx("td",{className:"py-2 px-2 text-center font-semibold text-stone-800 dark:text-stone-100",children:u(d)})]}),Ht=({result:t,onReturnToForm:n})=>{const{groom:l,bride:o,score:d,conclusion:h}=t,r=new Date,g=T(r),p=`${u(g.year)} ${se[g.monthIndex]} ${u(g.day)}`,i=r.toLocaleTimeString("ne-NP",{hour:"numeric",minute:"2-digit",hour12:!0});return e.jsxs("div",{className:"kundali-display-container flex flex-col  bg-slate-200 rounded-xl shadow-lg w-full lg:max-w-4xl xl:max-w-6xl lg:p-4 md:p-1 space-y-4 text-sm md:text-base dark:bg-gray-800 dark:text-gray-200 dark:border dark:border-gray-700",children:[e.jsxs("header",{className:"kundali-card rounded-lg text-center p-4 dark:bg-gray-800",children:[e.jsxs("h2",{className:"text-2xl font-bold text-blue-400 dark:text-blue-400",children:[l.birthDetails.name," र ",o.birthDetails.name," को गुण मिलान"]}),e.jsxs("div",{className:"hidden text-xs self-center print:block font-bold text-gray-400 dark:text-gray-400(",children:[a.printedDate,": ",p," ",i]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx("div",{children:e.jsx(ke,{data:l,title:a.groomDetails,titleClassName:"text-blue-700 dark:text-blue-300"})}),e.jsx("div",{children:e.jsx(ke,{data:o,title:a.brideDetails,titleClassName:"text-pink-700 dark:text-pink-400"})})]}),e.jsxs("div",{className:"kundali-card p-4 sm:p-6 rounded-lg overflow-x-auto bg-slate-200 dark:bg-gray-800",children:[e.jsx("h3",{className:"text-xl font-bold text-blue-400 dark:text-blue-400 mb-4",children:a.gunaMilanTableTitle}),e.jsxs("table",{className:"w-full text-left text-sm sm:text-base",children:[e.jsx("thead",{className:"border-b-2 border-amber-200 dark:border-amber-700 text-stone-600 dark:text-stone-300",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 px-2",children:a.koota}),e.jsx("th",{className:"py-2 px-2",children:a.groom}),e.jsx("th",{className:"py-2 px-2",children:a.bride}),e.jsx("th",{className:"py-2 px-2 text-center",children:a.maxPoints}),e.jsx("th",{className:"py-2 px-2 text-center",children:a.obtainedPoints})]})}),e.jsxs("tbody",{children:[e.jsx(L,{label:a.varna,groomValue:l.ashtaKoota.varna,brideValue:o.ashtaKoota.varna,maxPoints:1,obtainedPoints:d.varna}),e.jsx(L,{label:a.vasya,groomValue:l.ashtaKoota.vasya,brideValue:o.ashtaKoota.vasya,maxPoints:2,obtainedPoints:d.vasya}),e.jsx(L,{label:a.tara,groomValue:l.nakshatra.nameNepali,brideValue:o.nakshatra.nameNepali,maxPoints:3,obtainedPoints:d.tara}),e.jsx(L,{label:a.yoni,groomValue:l.ashtaKoota.yoni,brideValue:o.ashtaKoota.yoni,maxPoints:4,obtainedPoints:d.yoni}),e.jsx(L,{label:a.grahaMaitri,groomValue:l.ashtaKoota.rashiLord,brideValue:o.ashtaKoota.rashiLord,maxPoints:5,obtainedPoints:d.grahaMaitri}),e.jsx(L,{label:a.gana,groomValue:l.ashtaKoota.gana,brideValue:o.ashtaKoota.gana,maxPoints:6,obtainedPoints:d.gana}),e.jsx(L,{label:a.bhakoot,groomValue:_[l.planets.find(v=>v.planet==="MOON").rashi-1],brideValue:_[o.planets.find(v=>v.planet==="MOON").rashi-1],maxPoints:7,obtainedPoints:d.bhakoot}),e.jsx(L,{label:a.nadi,groomValue:l.ashtaKoota.nadi,brideValue:o.ashtaKoota.nadi,maxPoints:8,obtainedPoints:d.nadi})]}),e.jsx("tfoot",{className:"border-t-2 border-amber-300 dark:border-amber-600 font-bold",children:e.jsxs("tr",{children:[e.jsx("td",{colSpan:3,className:"py-2 px-2 text-right text-stone-800 dark:text-stone-100",children:a.totalPoints}),e.jsx("td",{className:"py-2 px-2 text-center text-stone-800 dark:text-stone-100",children:u(36)}),e.jsx("td",{className:"py-2 px-2 text-center text-lg text-blue-600 dark:text-blue-400",children:u(d.total)})]})})]})]}),e.jsxs("div",{className:"kundali-card rounded-lg bg-slate-200 dark:bg-gray-800",children:[e.jsx("h3",{className:"text-xl font-bold text-blue-400 dark:text-blue-400",children:a.conclusion}),e.jsx("p",{className:"text-stone-800 dark:text-stone-100",children:h})]}),e.jsx("div",{className:"hidden print:block text-center text-xs text-gray-500 mt-4 border-t border-gray-300",children:e.jsxs("p",{children:["© ",new Date().getFullYear()," ",a.project]})}),typeof window<"u"&&e.jsxs("div",{className:"print:hidden",children:[e.jsx("div",{className:"h-32 print:h-0 print:overflow-hidden","aria-hidden":"true"}),e.jsxs("div",{className:"fixed bottom-12 left-1/2 transform -translate-x-1/2 z-[999] w-full px-4 text-center print:hidden",children:[e.jsxs("div",{className:"flex gap-4 justify-center",children:[e.jsxs("button",{className:"bg-blue-600 dark:bg-blue-600 text-white px-6 py-2 rounded shadow-md hover:bg-blue-700 dark:hover:bg-blue-800 transition flex items-center gap-2",onClick:n,children:["← ",a.returnToForm]}),e.jsxs("button",{className:"bg-gray-600 dark:bg-gray-500 text-white px-6 py-2 rounded shadow-md hover:bg-gray-700 dark:hover:bg-gray-600 transition flex items-center gap-2",onClick:()=>window.print(),children:[e.jsx(Re,{className:"w-4 h-4"})," ",a.print]})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2 md:hidden",children:a.mobilePrintHint})]})]})]})};export{Ht as C,Kt as K,Yt as a,Le as b};
