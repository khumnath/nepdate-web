import{r as i,j as e,b as Oe,T as $e,u as Be,c as Fe,d as Re,R as He}from"./vendor-react-CMh7LEwM.js";import{n as Z,T as U,B as H,L as Ye,M as he,a as Ke,C as ee,X as Ze}from"./data-BimLjh3x.js";import{t as ae,N as s,g as We,a as m,b as se,f as Ve,c as L,d as J,e as D,h as E,R as qe,i as ue,j as Ge,k as Xe}from"./bikram-CMsQeUJ7.js";import{t as Ue}from"./vendor-utils-y-iLWhYP.js";const Je="2.0.0",Qe=Z.find(t=>t.romanization.toLowerCase()==="kathmandu"),v=Qe??Z[0],ea=({label:t,children:l,...c})=>e.jsxs("div",{className:"relative w-full",children:[e.jsx("select",{...c,className:"w-full appearance-none bg-gray-100 border border-gray-300 rounded-md py-2 px-3 text-sm text-gray-800 focus:outline-none focus:bg-slate-200 focus:border-blue-400 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200 dark:focus:bg-blue-400 dark:focus:border-blue-400",children:l}),e.jsx("label",{className:"absolute -top-2 left-2.5 bg-gray-100 px-1 text-xs text-gray-500 dark:bg-gray-700 dark:text-gray-400",children:t}),e.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700 dark:text-gray-300",children:e.jsx(ee,{className:"w-4 h-4"})})]}),aa=()=>{const t=Be();return i.useEffect(()=>{const l=setTimeout(()=>{try{t.invalidateSize()}catch{}},150);return()=>clearTimeout(l)},[t]),null},sa=({onClose:t,onLocationSelect:l,initialPosition:c})=>{const[o,r]=i.useState(c),h=()=>(Fe({click(g){r([g.latlng.lat,g.latlng.lng])}}),e.jsx(Re,{position:o})),n=()=>{l(o[0],o[1]),t()};return e.jsx("div",{style:{position:"fixed",inset:0,top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",zIndex:9999,display:"flex",justifyContent:"center",alignItems:"center",padding:12},children:e.jsxs("div",{style:{width:"95%",maxWidth:960,height:620,display:"flex",flexDirection:"column",borderRadius:12,overflow:"hidden",background:void 0},className:"bg-slate-50 dark:bg-gray-800 dark:text-gray-200 rounded-lg shadow-lg",children:[e.jsxs("div",{className:"flex justify-between items-center border-b p-3 dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-semibold",children:s.selectOnMap}),e.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-100",children:e.jsx(Ze,{className:"w-5 h-5"})})]}),e.jsx("div",{style:{flex:1,minHeight:420,display:"flex",justifyContent:"center",alignItems:"center",position:"relative"},children:e.jsxs(Oe,{center:c,zoom:7,scrollWheelZoom:!0,style:{height:"100%",width:"100%"},children:[e.jsx($e,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),e.jsx(aa,{}),e.jsx(h,{})]},`${c[0]}-${c[1]}`)}),e.jsxs("div",{className:"border-t p-3 flex justify-between items-center dark:border-gray-700",children:[e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:["Lat: ",o[0].toFixed(4),", Lon: ",o[1].toFixed(4)]}),e.jsx("button",{onClick:n,className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 dark:bg-blue-400 dark:text-blue-900 dark:hover:bg-blue-500 dark:hover:text-white",children:s.selectLocation})]})]})})},Q=({children:t})=>e.jsx("div",{className:"grid grid-cols-3 border border-gray-300 rounded-md overflow-hidden divide-x divide-gray-300 focus-within:border-blue-500 focus-within:ring-1 focus-within:ring-blue-500 dark:border-gray-600 dark:divide-gray-600 dark:focus-within:border-blue-400 dark:focus-within:ring-blue-400",children:t}),N=({label:t,children:l,...c})=>e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"absolute top-1 left-2 text-xs text-gray-500 z-10 dark:text-gray-400",children:t}),e.jsx("select",{...c,className:"relative w-full appearance-none bg-gray-100 pt-5 pb-1.5 px-2 text-sm text-gray-800 focus:outline-none focus:bg-slate-200 z-0 dark:bg-gray-700 dark:text-gray-200 dark:focus:bg-gray-600",children:l}),e.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700 z-10 dark:text-gray-300",children:e.jsx(ee,{className:"w-4 h-4"})})]}),ma=({onCalculate:t,isLoading:l})=>{const[c,o]=i.useState("प्रयोगकर्ता"),[r,h]=i.useState("BS"),[n,g]=i.useState("closed"),j=new Date,d=ae(j),[u,k]=i.useState(j.getFullYear()),[b,p]=i.useState(j.getMonth()+1),[T,te]=i.useState(j.getDate()),[P,be]=i.useState(d.year),[_,pe]=i.useState(d.monthIndex+1),[z,re]=i.useState(d.day),[W,je]=i.useState("PM"),[O,ke]=i.useState(4),[ne,ye]=i.useState(15),[le,fe]=i.useState(0),[Ne,ve]=i.useState(s.self),[C,$]=i.useState("nepal"),[S,Se]=i.useState(v),[y,V]=i.useState(v?.latitude??27.7172),[f,q]=i.useState(v?.longitude??85.324),[B,M]=i.useState(v?.zoneId??"Asia/Kathmandu"),[we,de]=i.useState(!1),[F,G]=i.useState(v?.name??"Kathmandu");i.useEffect(()=>{if(!(typeof y!="number"||typeof f!="number"||isNaN(y)||isNaN(f)))try{const a=Ue(y,f),x=U.some(R=>R.zoneId===a);M(x?a:v?.zoneId??"Asia/Kathmandu")}catch(a){console.error("tzlookup failed:",a),M(v?.zoneId??"Asia/Kathmandu")}},[y,f,v?.zoneId]);const Ie=i.useMemo(()=>Array.from({length:H.BS_END_YEAR-H.BS_START_YEAR+1},(a,x)=>H.BS_END_YEAR-x),[]),Ce=i.useMemo(()=>Array.from({length:102},(a,x)=>2034-x),[]),Ae=i.useMemo(()=>Array.from({length:12},(a,x)=>x+1),[]),oe=i.useMemo(()=>Array.from({length:60},(a,x)=>x),[]),w=i.useMemo(()=>{const a=H.NP_MONTHS_DATA[P];return r==="BS"?a?a[_-1]:30:We(u,b)},[r,P,_,u,b]),De=i.useMemo(()=>{const a=F.toLowerCase().trim();return!a||a===S?.name.toLowerCase().trim()?Z:Z.filter(x=>x.name.includes(a)||x.romanization&&x.romanization.toLowerCase().includes(a))},[F,S?.name]);i.useEffect(()=>{r==="BS"&&z>w&&re(w),r==="AD"&&T>w&&te(w)},[w,r,z,T]);const Me=a=>{Se(a),V(a.latitude),q(a.longitude),M(a.zoneId)},Le=(a,x)=>{V(a),q(x)},Ee=a=>{a.preventDefault();const x=I=>I.toString().padStart(2,"0");let R=u,ie=b,ce=T;if(r==="BS"){const I=Ve(P,_-1,z);R=I.getFullYear(),ie=I.getMonth()+1,ce=I.getDate()}let X=O;W==="PM"&&O<12&&(X+=12),W==="AM"&&O===12&&(X=0);const Te=`${R}-${x(ie)}-${x(ce)}T${x(X)}:${x(ne)}:${x(le)}`,Pe=C==="nepal"?S?.latitude??27.7172:y,_e=C==="nepal"?S?.longitude??85.324:f,xe=C==="nepal"?S?.zoneId??"Asia/Kathmandu":B,me=U.find(I=>I.zoneId===xe),ze=me?me.offset:5.75;t({name:c,datetime:Te,latitude:Pe,longitude:_e,zoneId:xe,offset:ze,options:{zodiac:"SIDEREAL",ayanamsa:"LAHIRI",houseSystem:"WHOLE_SIGN",divisionalCharts:[9],dashaSystem:"VIMSHOTTARI"}})};return e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{width:"100%",minHeight:800,paddingTop:24,paddingBottom:24},className:"bg-slate-200 dark:bg-gray-800 flex justify-center items-start overflow-y-auto",children:e.jsxs("form",{onSubmit:Ee,className:"kundali-card bg-slate-50 rounded-xl shadow-lg w-full lg:p-4 md:p-1  space-y-4 text-sm md:text-base dark:bg-gray-800 dark:text-gray-200 dark:border dark:border-gray-700",style:{maxWidth:1200},children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-blue-700 dark:text-blue-300",children:s.mainTitle}),e.jsxs("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:["App Version: ",e.jsx("span",{className:"font-mono",children:Je})]})]}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 xl:gap-x-8",children:[e.jsxs("div",{className:"space-y-3 md:space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium text-stone-700 mb-1 dark:text-stone-300",children:s.name}),e.jsx("input",{type:"text",value:c,onChange:a=>o(a.target.value),className:"w-full px-3 py-2 border border-stone-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-300 dark:focus:ring-blue-400 dark:focus:border-blue-400",required:!0})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between py-1.5 items-center mb-1",children:[e.jsx("label",{className:"block font-medium text-stone-700 dark:text-stone-300",children:s.dateOfBirth}),e.jsx("div",{className:"flex bg-gray-200  py-2 rounded-md p-0.5 w-auto dark:bg-gray-700",children:["BS","AD"].map(a=>e.jsx("button",{type:"button",onClick:()=>h(a),className:`px-3 py-1 text-xs rounded-md transition-colors duration-200 ${r===a?"bg-blue-500 text-white shadow dark:bg-blue-400 dark:text-blue-900":"text-gray-600 hover:bg-gray-300 dark:text-gray-300 dark:hover:bg-gray-600"}`,children:a==="BS"?s.bs:s.ad},a))})]}),r==="BS"?e.jsxs(Q,{children:[e.jsx(N,{label:s.year,value:P,onChange:a=>be(+a.target.value),children:Ie.map(a=>e.jsx("option",{value:a,children:m(a)},a))}),e.jsx(N,{label:s.month,value:_,onChange:a=>pe(+a.target.value),children:Array.from({length:12},(a,x)=>x+1).map(a=>e.jsx("option",{value:a,children:se[a-1]},a))}),e.jsx(N,{label:s.day,value:z,onChange:a=>re(+a.target.value),children:Array.from({length:w},(a,x)=>x+1).map(a=>e.jsx("option",{value:a,children:m(a)},a))})]}):e.jsxs(Q,{children:[e.jsx(N,{label:s.year,value:u,onChange:a=>k(+a.target.value),children:Ce.map(a=>e.jsx("option",{value:a,children:m(a)},a))}),e.jsx(N,{label:s.month,value:b,onChange:a=>p(+a.target.value),children:Array.from({length:12},(a,x)=>x+1).map(a=>e.jsx("option",{value:a,children:m(a)},a))}),e.jsx(N,{label:s.day,value:T,onChange:a=>te(+a.target.value),children:Array.from({length:w},(a,x)=>x+1).map(a=>e.jsx("option",{value:a,children:m(a)},a))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium text-stone-700 mb-1 dark:text-stone-300",children:s.birthTimeLabel}),e.jsxs(Q,{children:[e.jsx(N,{label:s.hour,value:O,onChange:a=>ke(+a.target.value),children:Ae.map(a=>e.jsx("option",{value:a,children:m(a)},a))}),e.jsx(N,{label:s.minute,value:ne,onChange:a=>ye(+a.target.value),children:oe.map(a=>e.jsx("option",{value:a,children:m(a.toString().padStart(2,"0"))},a))}),e.jsx(N,{label:s.second,value:le,onChange:a=>fe(+a.target.value),children:oe.map(a=>e.jsx("option",{value:a,children:m(a.toString().padStart(2,"0"))},a))})]}),e.jsx("div",{className:"mt-1.5",children:e.jsx("div",{className:"flex bg-gray-200 rounded-md p-0.5 w-full dark:bg-gray-700",children:["AM","PM"].map(a=>e.jsx("button",{type:"button",onClick:()=>je(a),className:`w-full px-3 py-1.5 text-sm rounded-md transition-colors duration-200 ${W===a?"bg-blue-500 text-white shadow dark:bg-blue-400 dark:text-blue-900":"text-gray-600 hover:bg-gray-300 dark:text-gray-300 dark:hover:bg-gray-600"}`,children:s[a.toLowerCase()]},a))})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium text-stone-700 mb-1 dark:text-stone-300",children:s.relation}),e.jsxs("select",{value:Ne,onChange:a=>ve(a.target.value),className:"w-full bg-gray-100 border border-gray-300 rounded-md py-2 px-3 text-sm text-gray-800 focus:outline-none focus:bg-slate-200 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200 dark:focus:bg-gray-600 dark:focus:border-blue-400",children:[e.jsx("option",{children:s.self}),e.jsx("option",{children:"छोरा"}),e.jsx("option",{children:"छोरी"}),e.jsx("option",{children:"जीवनसाथी"})]})]})]}),e.jsx("div",{className:"space-y-3 md:space-y-4 mt-3 xl:mt-0",children:e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium text-stone-700 mb-1 dark:text-stone-300",children:s.birthPlace}),e.jsxs("div",{className:"flex bg-gray-200 rounded-md p-0.5 w-full mb-2 dark:bg-gray-700",children:[e.jsxs("button",{type:"button",onClick:()=>{$("nepal"),S&&G(S.name)},className:`w-full px-3 py-1.5 text-sm rounded-md transition-colors duration-200 ${C==="nepal"?"bg-blue-500 text-white shadow dark:bg-blue-400 dark:text-blue-900":"text-gray-600 hover:bg-gray-300 dark:text-gray-300 dark:hover:bg-gray-600"}`,children:[e.jsx(Ye,{className:"w-4 h-4 inline-block -mt-0.5 mr-1"}),s.selectFromList]}),e.jsxs("button",{type:"button",onClick:()=>{$("manual"),g("manual")},className:`w-full px-3 py-1.5 text-sm rounded-md transition-colors duration-200 ${C==="manual"?"bg-blue-500 text-white shadow dark:bg-blue-400 dark:text-blue-900":"text-gray-600 hover:bg-gray-300 dark:text-gray-300 dark:hover:bg-gray-600"}`,children:[e.jsx(he,{className:"w-4 h-4 inline-block -mt-0.5 mr-1"}),s.enterManually]})]}),C==="nepal"&&e.jsx("input",{type:"text",value:F,readOnly:!0,onFocus:()=>g("search"),onClick:()=>g("search"),placeholder:s.searchLocation,className:"w-full px-3 py-2 border border-stone-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-100 dark:focus:ring-blue-400 dark:focus:border-blue-400"}),e.jsxs("div",{className:"mt-2 p-2 bg-gray-100 dark:bg-gray-700 rounded-md text-center",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:s.selectedLocation}),e.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1 flex justify-center flex-wrap gap-x-3 gap-y-1",children:[e.jsxs("span",{children:[s.latitudeShort,": ",y.toFixed(4)]}),e.jsxs("span",{children:[s.longitudeShort,": ",f.toFixed(4)]}),e.jsxs("span",{children:["TZ: ",B]})]})]})]})}),n!=="closed"&&e.jsx("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(0,0,0,0.5)",zIndex:9999,display:"flex",flexDirection:"column"},children:n==="search"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-3 shadow-md flex items-center",children:[e.jsx("input",{autoFocus:!0,type:"text",value:F,onChange:a=>G(a.target.value),placeholder:s.searchLocation,className:"flex-1 px-3 py-2 border border-stone-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-100 dark:focus:ring-blue-400 dark:focus:border-blue-400"}),e.jsx("button",{onClick:()=>g("closed"),className:"ml-2 px-3 py-2 bg-red-500 text-white rounded-md",children:s.close})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto bg-white dark:bg-gray-800 dark:text-gray-200",children:[De.map(a=>e.jsx("div",{className:"p-3 border-b cursor-pointer hover:bg-gray-100 dark:border-gray-700 dark:hover:bg-gray-700",onClick:()=>{Me(a),G(a.name),g("closed")},children:a.name},a.name)),e.jsxs("div",{className:"p-3 border-t font-medium cursor-pointer hover:bg-gray-100 dark:border-gray-700 dark:hover:bg-gray-700",onClick:()=>{$("manual"),g("manual")},children:["--- ",s.outsideNepal," ---"]})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-3 shadow-md flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold dark:text-gray-200",children:s.enterManually}),e.jsx("button",{onClick:()=>g("closed"),className:"px-3 py-2 bg-red-500 text-white rounded-md",children:s.close})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto bg-white dark:bg-gray-800 p-4 space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-0.5 dark:text-gray-400",children:s.latitude}),e.jsx("input",{type:"number",step:"any",value:y,onChange:a=>V(parseFloat(a.target.value)),className:"w-full px-3 py-2 text-sm border border-stone-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-100 dark:focus:ring-blue-400 dark:focus:border-blue-400"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-0.5 dark:text-gray-400",children:s.longitude}),e.jsx("input",{type:"number",step:"any",value:f,onChange:a=>q(parseFloat(a.target.value)),className:"w-full px-3 py-2 text-sm border border-stone-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-100 dark:focus:ring-blue-400 dark:focus:border-blue-400"})]})]}),e.jsx("div",{children:e.jsx(ea,{label:s.timezone,value:B,onChange:a=>M(a.target.value),children:U.map(a=>e.jsx("option",{value:a.zoneId,children:a.label},a.zoneId))})}),e.jsxs("button",{type:"button",onClick:()=>de(!0),className:"w-full flex items-center justify-center gap-2 bg-blue-50 text-blue-700 border border-blue-200 rounded-md text-sm py-2 hover:bg-blue-100 dark:bg-blue-900 dark:text-blue-200 dark:border-blue-700 dark:hover:bg-blue-800",children:[e.jsx(he,{className:"w-4 h-4"}),s.selectOnMap]}),e.jsxs("div",{className:"mt-2 p-2 bg-gray-100 dark:bg-gray-700 rounded-md text-center",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:s.selectedLocation}),e.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1 flex justify-center flex-wrap gap-x-3 gap-y-1",children:[e.jsxs("span",{children:[s.latitudeShort,": ",y.toFixed(4)]}),e.jsxs("span",{children:[s.longitudeShort,": ",f.toFixed(4)]}),e.jsxs("span",{children:["TZ: ",B]})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-3 border-t dark:border-gray-700 flex justify-between",children:[e.jsx("button",{type:"button",onClick:()=>{$("nepal"),g("search")},className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 dark:bg-gray-600 dark:text-gray-200 dark:hover:bg-gray-500",children:s?.baktoSearchLocation}),e.jsx("button",{type:"button",onClick:()=>g("closed"),className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 dark:bg-blue-400 dark:text-blue-900 dark:hover:bg-blue-500",children:s?.selectLocationConform})]})]})}),e.jsx("div",{style:{position:"relative"},className:"bg-slate-50/90 pt-4 pb-2 px-4 rounded-b-xl dark:bg-gray-800/90",children:e.jsx("button",{type:"submit",disabled:l,className:"w-full flex justify-center items-center py-3 border border-transparent rounded-md shadow-sm text-base font-medium text-white bg-blue-500 hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:bg-blue-300 disabled:cursor-not-allowed dark:bg-blue-400 dark:text-blue-900 dark:hover:bg-blue-500 dark:hover:text-white dark:focus:ring-blue-300 dark:disabled:bg-blue-200 dark:disabled:text-gray-500",children:l?e.jsxs(e.Fragment,{children:[e.jsx(Ke,{className:"w-5 h-5 mr-3 animate-spin"}),s.calculating]}):s.calculate})})]})]})}),we&&e.jsx(sa,{initialPosition:[y,f],onClose:()=>de(!1),onLocationSelect:Le})]})},ta=({cx:t,cy:l,onSelect:c})=>e.jsxs("svg",{className:"absolute inset-0 w-full h-full",viewBox:"0 0 400 400",children:[e.jsx("defs",{children:e.jsx("path",{id:"lotus-petal",d:`M 200 200
             C 150 150, 150 50, 200 0
             C 250 50, 250 150, 200 200 Z`})}),Array.from({length:12},(o,r)=>e.jsx("use",{href:"#lotus-petal",fill:"transparent",className:"overlay-wedge",style:{cursor:"pointer",pointerEvents:"auto"},transform:`rotate(${-r*30-90}, ${t}, ${l})`,onClick:()=>c(r+1)},r))]}),ra={10:0,11:-30,12:-60,1:-90,2:-120,3:-150,4:-180,5:-210,6:-240,7:-270,8:-300,9:-330};function Y(t){const l=Math.floor(t),c=Math.floor((t-l)*60);return`${m(l)}°${m(c)}′`}function ge(t){const l=Math.round(t/30*100);return`${m(l)}%`}const A=({planets:t,ascendantSign:l,ascendantDegrees:c,chartType:o="lagna"})=>{const[r,h]=i.useState(null),n=t.find(d=>d.planet==="MOON"),g=n?.rashi??1,j=i.useMemo(()=>{const d=new Map;return t.forEach(u=>{const k=u.rashi,b=o==="chandra"?(k-g+12)%12+1:k;d.has(b)||d.set(b,[]),d.get(b).push(u)}),d},[t,o,g]);return e.jsxs("div",{className:"birth-chart-wrapper text-stone-800 dark:text-stone-100",children:[e.jsxs("div",{className:"birth-chart relative",children:[Array.from({length:12},(d,u)=>u+1).map(d=>{const u=j.get(d)||[],k=ra[d];if(k===void 0)return null;const b=[];return["lagna","dashamsa","hora","saptamsa"].includes(o)&&d===l&&b.push(e.jsxs("div",{className:"planet-item ascendant",children:[e.jsx("span",{children:L.ASCENDANT}),c!==void 0&&e.jsx("span",{className:"planet-deg",children:Y(c)})]},"asc")),o==="chandra"&&d===1&&b.push(e.jsx("div",{className:"planet-item ascendant",children:e.jsxs("span",{children:[L.ASCENDANT," (चन्द्र)"]})},"asc-chandra")),u.forEach(p=>{b.push(e.jsxs("div",{className:"planet-item",children:[e.jsx("span",{className:p.retrograde?"retrograde":"",children:L[p.planet]}),o==="navamsha"&&p.nakshatraPada!==void 0&&e.jsxs("span",{children:["(",J[p.nakshatra],m(p.nakshatraPada),")"]}),o!=="navamsha"&&p.degreesInSign!==void 0&&e.jsx("span",{className:"planet-deg",children:Y(p.degreesInSign)})]},p.planet))}),e.jsxs("div",{className:"petal",style:{transform:`translateX(-50%) rotate(${k}deg)`},children:[e.jsx("div",{className:"rashi-number font-semibold",children:m(d)}),e.jsx("div",{className:"planets-container",children:b})]},d)}),e.jsx("div",{className:"chart-center-dot text-2xl font-bold dark:text-blue-400",children:"ॐ"}),["lagna","chandra","dashamsa","hora","saptamsa"].includes(o)&&e.jsx(ta,{cx:200,cy:200,onSelect:d=>h(d)})]}),["lagna","chandra","dashamsa","hora","saptamsa"].includes(o)&&r&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black/50 z-50",onClick:()=>h(null),children:e.jsxs("div",{className:"bg-slate-200 dark:bg-gray-800 dark:text-stone-100 rounded-lg shadow-lg p-6 max-w-md w-full transition-colors duration-300",onClick:d=>d.stopPropagation(),children:[e.jsxs("h3",{className:"font-bold text-lg mb-2",children:["घर ",m(r)," – ",D[r-1]," (स्वामी:"," ",E[qe[r]],")"]}),["lagna","dashamsa","hora","saptamsa"].includes(o)&&r===l&&c!==void 0&&e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:[L.ASCENDANT," (",D[l-1],")"]}),e.jsxs("span",{children:[Y(c)," (",ge(c),")"]})]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-800 h-2 rounded",children:e.jsx("div",{className:"bg-green-500 h-2 rounded",style:{width:`${Math.round(c/30*100)}%`}})})]}),o==="chandra"&&r===1&&n&&e.jsxs("div",{className:"mb-2",children:[e.jsx("div",{className:"flex justify-between",children:e.jsxs("span",{children:[L.ASCENDANT," (चन्द्र)"]})}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-800 h-2 rounded",children:e.jsx("div",{className:"bg-green-500 h-2 rounded",style:{width:`${Math.round((n.degreesInSign||0)/30*100)}%`}})}),n.nakshatra&&n.nakshatraPada&&e.jsxs("div",{className:"text-sm text-red-600 dark:text-red-400 font-semibold mt-1",children:["जनम नक्षत्र:"," ",J[n.nakshatra],m(n.nakshatraPada)]})]}),(j.get(r)||[]).map(d=>{if(o==="chandra"&&r===1&&d.planet==="MOON")return null;const u=d.degreesInSign!==void 0?Math.round(d.degreesInSign/30*100):null;return e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:d.retrograde?"retrograde font-bold":"",children:E[d.planet]}),d.degreesInSign!==void 0&&e.jsxs("span",{children:[Y(d.degreesInSign)," (",ge(d.degreesInSign),")"]})]}),d.nakshatra&&d.nakshatraPada&&o==="navamsha"&&e.jsxs("div",{className:"text-sm ml-2 text-gray-600 dark:text-gray-400",children:[J[d.nakshatra],m(d.nakshatraPada)]}),u!==null&&e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-800 h-2 rounded",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded",style:{width:`${u}%`}})})]},d.planet)})]})})]})},na=({planets:t})=>e.jsxs("div",{className:"kundali-card p-4 sm:p-6 rounded-lg overflow-x-auto dark:bg-gray-800 dark:text-stone-100 transition-colors duration-300",children:[e.jsx("h3",{className:"text-xl font-bold text-blue-400 dark:text-blue-400 mb-4",children:s.planetaryPositions}),e.jsxs("table",{className:"w-full text-left text-sm sm:text-base",children:[e.jsx("thead",{className:"border-b-2 border-amber-200 dark:border-amber-700 text-stone-600 dark:text-stone-300",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 px-2",children:s.planet}),e.jsx("th",{className:"py-2 px-2",children:s.rashi}),e.jsx("th",{className:"py-2 px-2",children:s.degrees}),e.jsx("th",{className:"py-2 px-2",children:s.nakshatra}),e.jsx("th",{className:"py-2 px-2",children:s.pada})]})}),e.jsx("tbody",{children:t.map(l=>e.jsxs("tr",{className:"border-b border-amber-100 dark:border-stone-700 hover:bg-amber-50/70 dark:hover:bg-gray-800 transition-colors duration-200",children:[e.jsxs("td",{className:"py-2 px-2 font-medium text-stone-800 dark:text-stone-100",children:[E[l.planet],l.retrograde&&e.jsxs("span",{className:"text-blue-600 dark:text-blue-400 ml-1",children:["(",s.retrograde,")"]})]}),e.jsx("td",{className:"py-2 px-2",children:D[l.rashi-1]}),e.jsx("td",{className:"py-2 px-2 font-mono",children:ue(l.degreesInSign)}),e.jsx("td",{className:"py-2 px-2",children:l.nakshatra}),e.jsx("td",{className:"py-2 px-2",children:m(l.nakshatraPada)})]},l.planet))})]})]}),la=({data:t})=>{const l=t.planets.find(p=>p.planet==="MOON"),c=t.planets.find(p=>p.planet==="SUN"),o=new Date(t.birthDetails.datetime),r=ae(o),h=`${m(r.year)} ${se[r.monthIndex]} ${m(r.day)}`,n=Ge[o.getDay()],g=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"long",day:"numeric"}).format(o),j=new Intl.DateTimeFormat("ne-NP",{hour:"numeric",minute:"numeric",hour12:!0}).format(o),d=Xe[t.nakshatra.index],u=d?d.syllables[t.nakshatra.pada-1]:"?",k=D[t.ascendant.sign-1],b=ue(t.ascendant.degreesInSign);return e.jsxs("div",{className:"kundali-card p-4 sm:p-6 rounded-lg h-full bg-slate-200 dark:bg-gray-800",children:[e.jsx("h3",{className:"text-xl font-bold text-blue-400 dark:text-blue-400 mb-4",children:s.generalInfo}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-6 gap-y-2 text-sm",children:[e.jsxs("div",{className:"flex gap-1 items-start ",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[s.birthDateBS,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:h})]}),e.jsxs("div",{className:"flex gap-1 items-start",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[s.birthDateAD,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:g})]}),e.jsxs("div",{className:"flex gap-1 items-start",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[s.birthTime,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:j})]}),e.jsxs("div",{className:"flex gap-1 items-start",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[s.dayOfWeek,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:n})]}),e.jsxs("div",{className:"flex gap-1 items-start",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[s.lagna,":"]}),e.jsxs("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:[k," (",b,")"]})]}),l&&e.jsxs("div",{className:"flex gap-1 items-start",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[s.moonSign,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:D[l.rashi-1]})]}),c&&e.jsxs("div",{className:"flex gap-1 items-start",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[s.sunSign,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:D[c.rashi-1]})]}),e.jsxs("div",{className:"flex gap-1 items-start",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[s.birthNakshatra,":"]}),e.jsxs("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:[t.nakshatra.nameNepali," (",m(t.nakshatra.pada),")"]})]}),e.jsxs("div",{className:"flex gap-1 items-start",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[s.suggestedSyllable,":"]}),e.jsx("span",{className:"font-bold text-amber-600 dark:text-amber-600 text-lg",children:u})]}),e.jsxs("div",{className:"flex gap-1 items-start",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[s.tithi,":"]}),e.jsxs("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:[t.tithi.paksha," - ",m(t.tithi.tithiNumber)]})]}),e.jsxs("div",{className:"flex gap-1 items-start",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[s.yoga,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:t.yoga})]}),e.jsxs("div",{className:"flex gap-1 items-start",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[s.karana,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:t.karana})]})]}),e.jsxs("div",{className:"mt-6 pt-4 border-t-2 border-amber-200 dark:border-amber-700",children:[e.jsx("h3",{className:"text-lg font-bold text-blue-400 dark:text-blue-400 mb-2",children:s.calculationDetails}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-6 gap-y-2 text-sm",children:[e.jsxs("div",{className:"flex gap-1 items-start",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[s.backend,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:t.calculationMeta.backend})]}),e.jsxs("div",{className:"flex gap-1 items-start",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[s.ayanamsa,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:t.calculationMeta.ayanamsa})]}),e.jsxs("div",{className:"flex gap-1 items-start",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[s.houseSystem,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:t.calculationMeta.houseSystem})]})]})]})]})},K=t=>{try{const l=ae(new Date(t)),c=m(l.year.toString()),o=se[l.monthIndex],r=m(l.day.toString());return`${c} ${o} ${r}`}catch(l){return console.error("Date formatting error:",l),m(t.split("T")[0])+" AD"}},da=({dashaSequence:t})=>{const[l,c]=i.useState(null),o=r=>{c(h=>h===r?null:r)};return e.jsxs("div",{className:"kundali-card p-4 sm:p-6 mb-11 rounded-lg bg-slate-200 dark:bg-gray-800",children:[e.jsx("h3",{className:"text-xl font-bold text-blue-400 dark:text-blue-400 mb-4",children:s.dashaPeriods}),e.jsxs("table",{className:"w-full text-left text-sm sm:text-base border-collapse",children:[e.jsx("thead",{className:"border-b-2 border-amber-200 dark:border-amber-700 text-stone-600 dark:text-stone-300",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 px-2",children:s.mahaDasha}),e.jsx("th",{className:"py-2 px-2",children:s.startsOn}),e.jsx("th",{className:"py-2 px-2",children:s.endsOn})]})}),e.jsx("tbody",{children:t.map(r=>e.jsxs(He.Fragment,{children:[e.jsxs("tr",{className:"border-b border-amber-100 dark:border-amber-800 cursor-pointer hover:bg-amber-50/70 dark:hover:bg-amber-900/40",onClick:()=>o(r.planet),"aria-expanded":l===r.planet,"aria-controls":`antardasha-${r.planet}`,children:[e.jsxs("td",{className:"py-2 px-2 font-medium text-stone-800 dark:text-stone-100 flex items-center relative",children:[e.jsxs("div",{className:"relative group",children:[e.jsx(ee,{className:`w-4 h-4 mr-2 text-amber-700 dark:text-blue-400 transition-transform duration-300 ${l===r.planet?"rotate-180":""}`}),e.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 mt-1 px-2 py-1 bg-zinc-800 text-white text-xs rounded shadow-md opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap z-[999] dark:bg-gray-800 dark:text-stone-200",children:s.antarDasha_clickToExpand})]}),e.jsx("span",{className:"z-0",children:E[r.planet]})]}),e.jsx("td",{className:"py-2 px-2 text-stone-700 dark:text-stone-200",children:K(r.start)}),e.jsx("td",{className:"py-2 px-2 text-stone-700 dark:text-stone-200",children:K(r.end)})]}),r.subDashas&&r.subDashas.length>0&&e.jsx("tr",{className:"bg-slate-200 dark:bg-gray-800",children:e.jsx("td",{colSpan:3,className:"p-0 border-none",children:e.jsx("div",{id:`antardasha-${r.planet}`,className:`overflow-hidden transition-all duration-500 ease-in-out ${l===r.planet?"max-h-[1000px]":"max-h-0"}`,children:e.jsxs("div",{className:"p-4 bg-amber-50/50 dark:bg-amber-900/20",children:[e.jsx("h4",{className:"font-semibold text-blue-400 dark:text-blue-400 mb-2 pl-2",children:s.antarDasha}),e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"text-stone-500 dark:text-stone-400",children:e.jsxs("tr",{children:[e.jsx("th",{className:"font-medium py-1 px-2 text-left",children:s.planet}),e.jsx("th",{className:"font-medium py-1 px-2 text-left",children:s.startsOn}),e.jsx("th",{className:"font-medium py-1 px-2 text-left",children:s.endsOn})]})}),e.jsx("tbody",{children:r.subDashas.map(h=>e.jsxs("tr",{className:"border-b border-amber-100 dark:border-amber-800 last:border-b-0",children:[e.jsx("td",{className:"py-1.5 px-2 text-stone-800 dark:text-stone-100",children:E[h.planet]}),e.jsx("td",{className:"py-1.5 px-2 text-stone-700 dark:text-stone-200",children:K(h.start)}),e.jsx("td",{className:"py-1.5 px-2 text-stone-700 dark:text-stone-200",children:K(h.end)})]},h.planet))})]})]})})})})]},r.planet))})]})]})},ha=({data:t,onReturnToForm:l})=>{const c=t.divisionalCharts.find(n=>n.name==="Navamsa (D9)"),o=t.divisionalCharts.find(n=>n.name==="Dashamsa (D10)"),r=t.divisionalCharts.find(n=>n.name==="Hora (D2)"),h=t.divisionalCharts.find(n=>n.name==="Saptamsa (D7)");return e.jsxs("div",{className:"dashboard-container  bg-slate-50 rounded-xl shadow-lg w-full  lg:max-w-4xl xl:max-w-6xl p-4 space-y-4 text-sm md:text-base dark:bg-gray-800 dark:text-gray-200 dark:border dark:border-gray-700",children:[e.jsx("header",{className:"kundali-card rounded-lg text-center dark:bg-gray-800 dark:text-blue-400 transition-colors duration-300",children:e.jsx("h2",{className:"text-3xl self-center font-bold text-blue-400 dark:text-blue-400",children:s.kundaliOf(t.birthDetails.name)})}),e.jsx("div",{className:"grid grid-cols-1 gap-6",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{className:"lg:col-span-2 flex flex-col",children:e.jsx("div",{className:"flex-1 kundali-card p-4 rounded-lg bg-slate-200 dark:bg-gray-800 dark:text-stone-100 shadow transition-colors duration-300",children:e.jsx(la,{data:t,layout:"two-column"})})}),e.jsx("div",{className:"flex-1 kundali-card p-4 rounded-lg bg-slate-200 dark:bg-gray-800 dark:text-stone-100 shadow transition-colors duration-300",children:e.jsx(na,{planets:t.planets})})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-6 mt-6",children:[e.jsxs("div",{className:"chart-instance dark:bg-gray-800",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2 text-center dark:text-blue-400",children:s.rashiChart}),e.jsx("div",{className:"chart-card dark:bg-gray-800 rounded-lg p-2 transition-colors duration-300",children:e.jsx(A,{planets:t.planets,ascendantSign:t.ascendant.sign,ascendantDegrees:t.ascendant.degreesInSign,chartType:"lagna"})})]}),c&&e.jsxs("div",{className:"chart-instance",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2 text-center dark:text-blue-400",children:s.navamsaChart}),e.jsx("div",{className:"chart-card dark:bg-gray-800 rounded-lg p-2 transition-colors duration-300",children:e.jsx(A,{planets:c.planets.map(n=>({planet:n.planet,rashi:n.sign,retrograde:n.retrograde,nakshatra:n.nakshatra,nakshatraPada:n.nakshatraPada})),ascendantSign:c.ascendant.sign,chartType:"navamsha"})})]}),o&&e.jsxs("div",{className:"chart-instance",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2 text-center dark:text-blue-400",children:s.dashamsaChart}),e.jsx("div",{className:"chart-card dark:bg-gray-800 rounded-lg p-2 transition-colors duration-300",children:e.jsx(A,{planets:o.planets.map(n=>({planet:n.planet,rashi:n.sign,retrograde:n.retrograde,nakshatra:n.nakshatra,nakshatraPada:n.nakshatraPada,degreesInSign:n.degreesInSign})),ascendantSign:o.ascendant.sign,ascendantDegrees:o.ascendant.degreesInSign,chartType:"dashamsa"})})]}),r&&e.jsxs("div",{className:"chart-instance",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2 text-center dark:text-blue-400",children:s.horaChart}),e.jsx("div",{className:"chart-card dark:bg-gray-800 rounded-lg p-2 transition-colors duration-300",children:e.jsx(A,{planets:r.planets.map(n=>({planet:n.planet,rashi:n.sign,retrograde:n.retrograde,nakshatra:n.nakshatra,nakshatraPada:n.nakshatraPada,degreesInSign:n.degreesInSign})),ascendantSign:r.ascendant.sign,ascendantDegrees:r.ascendant.degreesInSign,chartType:"hora"})})]}),h&&e.jsxs("div",{className:"chart-instance",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2 text-center dark:text-blue-400",children:s.saptamsaChart}),e.jsx("div",{className:"chart-card dark:bg-gray-800 rounded-lg p-2 transition-colors duration-300",children:e.jsx(A,{planets:h.planets.map(n=>({planet:n.planet,rashi:n.sign,retrograde:n.retrograde,nakshatra:n.nakshatra,nakshatraPada:n.nakshatraPada,degreesInSign:n.degreesInSign})),ascendantSign:h.ascendant.sign,ascendantDegrees:h.ascendant.degreesInSign,chartType:"saptamsa"})})]}),e.jsxs("div",{className:"chart-instance",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2 text-center dark:text-blue-400",children:s.chandraChart}),e.jsx("div",{className:"chart-card dark:bg-gray-800 rounded-lg p-2 transition-colors duration-300",children:e.jsx(A,{planets:t.planets,ascendantSign:t.ascendant.sign,ascendantDegrees:t.ascendant.degreesInSign,chartType:"chandra"})})]})]}),e.jsx(da,{dashaSequence:t.dashaSequence}),e.jsx("div",{className:"fixed bottom-12 left-1/2 transform -translate-x-1/2 z-[999]",children:e.jsxs("button",{className:"bg-blue-600 dark:bg-blue-600 text-white px-6 py-2 rounded shadow-md hover:bg-blue-700 dark:hover:bg-blue-800 transition",onClick:l,children:["← ",s.returnToForm]})})]})};export{ma as K,ha as a};
